import{e as R,f as B}from"./chunk-TSRGIXR5.js";var A=R((ct,O)=>{"use strict";(function(t,e){typeof O=="object"&&typeof O.exports=="object"?O.exports=t.document?e(t,!0):function(l){if(!l.document)throw new Error("SUNEDITOR_MODULES a window with a document");return e(l)}:e(t)})(typeof window<"u"?window:ct,function(t,e){let l={name:"dialog",add:function(i){let n=i.context;n.dialog={kind:"",updateModal:!1,_closeSignal:!1};let s=i.util.createElement("DIV");s.className="se-dialog sun-editor-common";let o=i.util.createElement("DIV");o.className="se-dialog-back",o.style.display="none";let a=i.util.createElement("DIV");a.className="se-dialog-inner",a.style.display="none",s.appendChild(o),s.appendChild(a),n.dialog.modalArea=s,n.dialog.back=o,n.dialog.modal=a,n.dialog.modal.addEventListener("mousedown",this._onMouseDown_dialog.bind(i)),n.dialog.modal.addEventListener("click",this._onClick_dialog.bind(i)),n.element.relative.appendChild(s),s=null,o=null,a=null},_onMouseDown_dialog:function(i){/se-dialog-inner/.test(i.target.className)?this.context.dialog._closeSignal=!0:this.context.dialog._closeSignal=!1},_onClick_dialog:function(i){(/close/.test(i.target.getAttribute("data-command"))||this.context.dialog._closeSignal)&&this.plugins.dialog.close.call(this)},open:function(i,n){if(this.modalForm)return!1;this.plugins.dialog._bindClose&&(this._d.removeEventListener("keydown",this.plugins.dialog._bindClose),this.plugins.dialog._bindClose=null),this.plugins.dialog._bindClose=function(o){/27/.test(o.keyCode)&&this.plugins.dialog.close.call(this)}.bind(this),this._d.addEventListener("keydown",this.plugins.dialog._bindClose),this.context.dialog.updateModal=n,this.options.popupDisplay==="full"?this.context.dialog.modalArea.style.position="fixed":this.context.dialog.modalArea.style.position="absolute",this.context.dialog.kind=i,this.modalForm=this.context[i].modal;let s=this.context[i].focusElement;typeof this.plugins[i].on=="function"&&this.plugins[i].on.call(this,n),this.context.dialog.modalArea.style.display="block",this.context.dialog.back.style.display="block",this.context.dialog.modal.style.display="block",this.modalForm.style.display="block",s&&s.focus()},_bindClose:null,close:function(){this.plugins.dialog._bindClose&&(this._d.removeEventListener("keydown",this.plugins.dialog._bindClose),this.plugins.dialog._bindClose=null);let i=this.context.dialog.kind;this.modalForm.style.display="none",this.context.dialog.back.style.display="none",this.context.dialog.modalArea.style.display="none",this.context.dialog.updateModal=!1,typeof this.plugins[i].init=="function"&&this.plugins[i].init.call(this),this.context.dialog.kind="",this.modalForm=null,this.focus()}};return typeof e>"u"&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"dialog",{enumerable:!0,writable:!1,configurable:!1,value:l})),l})});var q=R((pt,H)=>{"use strict";(function(t,e){typeof H=="object"&&typeof H.exports=="object"?H.exports=t.document?e(t,!0):function(l){if(!l.document)throw new Error("SUNEDITOR_MODULES a window with a document");return e(l)}:e(t)})(typeof window<"u"?window:pt,function(t,e){let l={name:"component",set_container:function(i,n){let s=this.util.createElement("DIV");return s.className="se-component "+n,s.appendChild(i),s},set_cover:function(i){let n=this.util.createElement("FIGURE");return n.appendChild(i),n},create_caption:function(){let i=this.util.createElement("FIGCAPTION");return i.innerHTML="<div>"+this.lang.dialogBox.caption+"</div>",i}};return typeof e>"u"&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"component",{enumerable:!0,writable:!1,configurable:!1,value:l})),l})});var j=R((ft,V)=>{"use strict";(function(t,e){typeof V=="object"&&typeof V.exports=="object"?V.exports=t.document?e(t,!0):function(l){if(!l.document)throw new Error("SUNEDITOR_MODULES a window with a document");return e(l)}:e(t)})(typeof window<"u"?window:ft,function(t,e){let l={name:"resizing",add:function(i){let n=i.icons,s=i.context;s.resizing={_resizeClientX:0,_resizeClientY:0,_resize_plugin:"",_resize_w:0,_resize_h:0,_origin_w:0,_origin_h:0,_rotateVertical:!1,_resize_direction:"",_move_path:null,_isChange:!1,alignIcons:{basic:n.align_justify,left:n.align_left,right:n.align_right,center:n.align_center}};let o=this.setController_resize(i);s.resizing.resizeContainer=o,s.resizing.resizeDiv=o.querySelector(".se-modal-resize"),s.resizing.resizeDot=o.querySelector(".se-resize-dot"),s.resizing.resizeDisplay=o.querySelector(".se-resize-display");let a=this.setController_button(i);s.resizing.resizeButton=a;let c=s.resizing.resizeHandles=s.resizing.resizeDot.querySelectorAll("span");s.resizing.resizeButtonGroup=a.querySelector("._se_resizing_btn_group"),s.resizing.rotationButtons=a.querySelectorAll("._se_resizing_btn_group ._se_rotation"),s.resizing.percentageButtons=a.querySelectorAll("._se_resizing_btn_group ._se_percentage"),s.resizing.alignMenu=a.querySelector(".se-resizing-align-list"),s.resizing.alignMenuList=s.resizing.alignMenu.querySelectorAll("button"),s.resizing.alignButton=a.querySelector("._se_resizing_align_button"),s.resizing.autoSizeButton=a.querySelector("._se_resizing_btn_group ._se_auto_size"),s.resizing.captionButton=a.querySelector("._se_resizing_caption_button"),o.addEventListener("mousedown",function(r){r.preventDefault()}),c[0].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[1].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[2].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[3].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[4].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[5].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[6].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),c[7].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(i)),a.addEventListener("click",this.onClick_resizeButton.bind(i)),s.element.relative.appendChild(o),s.element.relative.appendChild(a),o=null,a=null,c=null},setController_resize:function(i){let n=i.util.createElement("DIV");return n.className="se-controller se-resizing-container",n.style.display="none",n.innerHTML='<div class="se-modal-resize"></div><div class="se-resize-dot"><span class="tl"></span><span class="tr"></span><span class="bl"></span><span class="br"></span><span class="lw"></span><span class="th"></span><span class="rw"></span><span class="bh"></span><div class="se-resize-display"></div></div>',n},setController_button:function(i){let n=i.lang,s=i.icons,o=i.util.createElement("DIV");return o.className="se-controller se-controller-resizing",o.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="se-btn-group _se_resizing_btn_group"><button type="button" data-command="percent" data-value="1" class="se-tooltip _se_percentage"><span>100%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.resize100+'</span></span></button><button type="button" data-command="percent" data-value="0.75" class="se-tooltip _se_percentage"><span>75%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.resize75+'</span></span></button><button type="button" data-command="percent" data-value="0.5" class="se-tooltip _se_percentage"><span>50%</span><span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.resize50+'</span></span></button><button type="button" data-command="auto" class="se-btn se-tooltip _se_auto_size">'+s.auto_size+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.autoSize+'</span></span></button><button type="button" data-command="rotate" data-value="-90" class="se-btn se-tooltip _se_rotation">'+s.rotate_left+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.rotateLeft+'</span></span></button><button type="button" data-command="rotate" data-value="90" class="se-btn se-tooltip _se_rotation">'+s.rotate_right+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.rotateRight+'</span></span></button></div><div class="se-btn-group" style="padding-top: 0;"><button type="button" data-command="mirror" data-value="h" class="se-btn se-tooltip">'+s.mirror_horizontal+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.mirrorHorizontal+'</span></span></button><button type="button" data-command="mirror" data-value="v" class="se-btn se-tooltip">'+s.mirror_vertical+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.mirrorVertical+'</span></span></button><button type="button" data-command="onalign" class="se-btn se-tooltip _se_resizing_align_button">'+s.align_justify+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.toolbar.align+'</span></span></button><div class="se-btn-group-sub sun-editor-common se-list-layer se-resizing-align-list"><div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="basic">'+s.align_justify+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.dialogBox.basic+'</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="left">'+s.align_left+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.dialogBox.left+'</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="center">'+s.align_center+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.dialogBox.center+'</span></span></button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="align" data-value="right">'+s.align_right+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.dialogBox.right+'</span></span></button></li></ul></div></div><button type="button" data-command="caption" class="se-btn se-tooltip _se_resizing_caption_button">'+s.caption+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.dialogBox.caption+'</span></span></button><button type="button" data-command="revert" class="se-btn se-tooltip">'+s.revert+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.dialogBox.revertButton+'</span></span></button><button type="button" data-command="update" class="se-btn se-tooltip">'+s.modify+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.edit+'</span></span></button><button type="button" data-command="delete" class="se-btn se-tooltip">'+s.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+n.controller.remove+"</span></span></button></div>",o},_module_getSizeX:function(i,n,s,o){return n||(n=i._element),s||(s=i._cover),o||(o=i._container),n?/%$/.test(n.style.width)?(o&&this.util.getNumber(o.style.width,2)||100)+"%":n.style.width:""},_module_getSizeY:function(i,n,s,o){return n||(n=i._element),s||(s=i._cover),o||(o=i._container),!o||!s?n&&n.style.height||"":this.util.getNumber(s.style.paddingBottom,0)>0&&!this.context.resizing._rotateVertical?s.style.height:!/%$/.test(n.style.height)||!/%$/.test(n.style.width)?n.style.height:(o&&this.util.getNumber(o.style.height,2)||100)+"%"},_module_setModifyInputSize:function(i,n){let s=i._onlyPercentage&&this.context.resizing._rotateVertical;i.proportion.checked=i._proportionChecked=i._element.getAttribute("data-proportion")!=="false";let o=s?"":this.plugins.resizing._module_getSizeX.call(this,i);if(o===i._defaultSizeX&&(o=""),i._onlyPercentage&&(o=this.util.getNumber(o,2)),i.inputX.value=o,n.setInputSize.call(this,"x"),!i._onlyPercentage){let a=s?"":this.plugins.resizing._module_getSizeY.call(this,i);a===i._defaultSizeY&&(a=""),i._onlyPercentage&&(a=this.util.getNumber(a,2)),i.inputY.value=a}i.inputX.disabled=!!s,i.inputY.disabled=!!s,i.proportion.disabled=!!s,n.setRatio.call(this)},_module_setInputSize:function(i,n){if(i._onlyPercentage){n==="x"&&i.inputX.value>100&&(i.inputX.value=100);return}if(i.proportion.checked&&i._ratio&&/\d/.test(i.inputX.value)&&/\d/.test(i.inputY.value)){let s=i.inputX.value.replace(/\d+|\./g,"")||i.sizeUnit,o=i.inputY.value.replace(/\d+|\./g,"")||i.sizeUnit;if(s!==o)return;let a=s==="%"?2:0;n==="x"?i.inputY.value=this.util.getNumber(i._ratioY*this.util.getNumber(i.inputX.value,a),a)+o:i.inputX.value=this.util.getNumber(i._ratioX*this.util.getNumber(i.inputY.value,a),a)+s}},_module_setRatio:function(i){let n=i.inputX.value,s=i.inputY.value;if(i.proportion.checked&&/\d+/.test(n)&&/\d+/.test(s)){let o=n.replace(/\d+|\./g,"")||i.sizeUnit,a=s.replace(/\d+|\./g,"")||i.sizeUnit;if(o!==a)i._ratio=!1;else if(!i._ratio){let c=this.util.getNumber(n,0),r=this.util.getNumber(s,0);i._ratio=!0,i._ratioX=c/r,i._ratioY=r/c}}else i._ratio=!1},_module_sizeRevert:function(i){i._onlyPercentage?i.inputX.value=i._origin_w>100?100:i._origin_w:(i.inputX.value=i._origin_w,i.inputY.value=i._origin_h)},_module_saveCurrentSize:function(i){let n=this.plugins.resizing._module_getSizeX.call(this,i),s=this.plugins.resizing._module_getSizeY.call(this,i);i._element.setAttribute("width",n.replace("px","")),i._element.setAttribute("height",s.replace("px","")),i._element.setAttribute("data-size",n+","+s),i._videoRatio&&(i._videoRatio=s)},call_controller_resize:function(i,n){let s=this.context.resizing,o=this.context[n];s._resize_plugin=n;let a=s.resizeContainer,c=s.resizeDiv,r=this.util.getOffset(i,this.context.element.wysiwygFrame),u=s._rotateVertical=/^(90|270)$/.test(Math.abs(i.getAttribute("data-rotate")).toString()),p=u?i.offsetHeight:i.offsetWidth,f=u?i.offsetWidth:i.offsetHeight,_=r.top,h=r.left-this.context.element.wysiwygFrame.scrollLeft;a.style.top=_+"px",a.style.left=h+"px",a.style.width=p+"px",a.style.height=f+"px",c.style.top="0px",c.style.left="0px",c.style.width=p+"px",c.style.height=f+"px";let g=i.getAttribute("data-align")||"basic";g=g==="none"?"basic":g;let d=this.util.getParentElement(i,this.util.isComponent),m=this.util.getParentElement(i,"FIGURE"),v=this.plugins.resizing._module_getSizeX.call(this,o,i,m,d)||"auto",b=o._onlyPercentage&&n==="image"?"":", "+(this.plugins.resizing._module_getSizeY.call(this,o,i,m,d)||"auto");this.util.changeTxt(s.resizeDisplay,this.lang.dialogBox[g]+" ("+v+b+")"),s.resizeButtonGroup.style.display=o._resizing?"":"none";let y=o._resizing&&!o._resizeDotHide&&!o._onlyPercentage?"flex":"none",x=s.resizeHandles;for(let w=0,L=x.length;w<L;w++)x[w].style.display=y;if(o._resizing){let w=s.rotationButtons;w[0].style.display=w[1].style.display=o._rotation?"":"none"}if(o._alignHide)s.alignButton.style.display="none";else{s.alignButton.style.display="";let w=s.alignMenuList;this.util.changeElement(s.alignButton.firstElementChild,s.alignIcons[g]);for(let L=0,E=w.length;L<E;L++)w[L].getAttribute("data-value")===g?this.util.addClass(w[L],"on"):this.util.removeClass(w[L],"on")}let C=s.percentageButtons,S=/%$/.test(i.style.width)&&/%$/.test(d.style.width)?this.util.getNumber(d.style.width,0)/100+"":"";for(let w=0,L=C.length;w<L;w++)C[w].getAttribute("data-value")===S?this.util.addClass(C[w],"active"):this.util.removeClass(C[w],"active");o._captionShow?(s.captionButton.style.display="",this.util.getChildElement(i.parentNode,"figcaption")?(this.util.addClass(s.captionButton,"active"),o._captionChecked=!0):(this.util.removeClass(s.captionButton,"active"),o._captionChecked=!1)):s.captionButton.style.display="none",a.style.display="block";let k={left:0,top:50};this.options.iframe&&(k.left-=this.context.element.wysiwygFrame.parentElement.offsetLeft,k.top-=this.context.element.wysiwygFrame.parentElement.offsetTop),this.setControllerPosition(s.resizeButton,a,"bottom",k);let I=function(){this.util.setDisabledButtons.call(this.util,!1,this.resizingDisabledButtons),this.history._resetCachingButton()};this.controllersOn(a,s.resizeButton,I.bind(this),i,n),this.util.setDisabledButtons(!0,this.resizingDisabledButtons),s._resize_w=p,s._resize_h=f;let z=(i.getAttribute("origin-size")||"").split(",");return s._origin_w=z[0]||i.naturalWidth,s._origin_h=z[1]||i.naturalHeight,{w:p,h:f,t:_,l:h}},_closeAlignMenu:null,openAlignMenu:function(){let i=this.context.resizing.alignButton;this.util.addClass(i,"on"),this.context.resizing.alignMenu.style.top=i.offsetTop+i.offsetHeight+"px",this.context.resizing.alignMenu.style.left=i.offsetLeft-i.offsetWidth/2+"px",this.context.resizing.alignMenu.style.display="block",this.plugins.resizing._closeAlignMenu=function(){this.util.removeClass(this.context.resizing.alignButton,"on"),this.context.resizing.alignMenu.style.display="none",this.removeDocEvent("click",this.plugins.resizing._closeAlignMenu),this.plugins.resizing._closeAlignMenu=null}.bind(this),this.addDocEvent("click",this.plugins.resizing._closeAlignMenu)},onClick_resizeButton:function(i){i.stopPropagation();let n=i.target,s=n.getAttribute("data-command")||n.parentNode.getAttribute("data-command");if(!s)return;let o=n.getAttribute("data-value")||n.parentNode.getAttribute("data-value"),a=this.context.resizing._resize_plugin,c=this.context[a],r=c._element,u=this.plugins[a];if(i.preventDefault(),!(typeof this.plugins.resizing._closeAlignMenu=="function"&&(this.plugins.resizing._closeAlignMenu(),s==="onalign"))){switch(s){case"auto":this.plugins.resizing.resetTransform.call(this,r),u.setAutoSize.call(this),this.selectComponent(r,a);break;case"percent":let p=this.plugins.resizing._module_getSizeY.call(this,c);if(this.context.resizing._rotateVertical){let y=r.getAttribute("data-percentage");y&&(p=y.split(",")[1])}this.plugins.resizing.resetTransform.call(this,r),u.setPercentSize.call(this,o*100,this.util.getNumber(p,0)===null||!/%$/.test(p)?"":p),this.selectComponent(r,a);break;case"mirror":let f=r.getAttribute("data-rotate")||"0",_=r.getAttribute("data-rotateX")||"",h=r.getAttribute("data-rotateY")||"";o==="h"&&!this.context.resizing._rotateVertical||o==="v"&&this.context.resizing._rotateVertical?h=h?"":"180":_=_?"":"180",r.setAttribute("data-rotateX",_),r.setAttribute("data-rotateY",h),this.plugins.resizing._setTransForm(r,f,_,h);break;case"rotate":let g=this.context.resizing,d=r.getAttribute("data-rotate")*1+o*1,m=this._w.Math.abs(d)>=360?0:d;r.setAttribute("data-rotate",m),g._rotateVertical=/^(90|270)$/.test(this._w.Math.abs(m).toString()),this.plugins.resizing.setTransformSize.call(this,r,null,null),this.selectComponent(r,a);break;case"onalign":this.plugins.resizing.openAlignMenu.call(this);return;case"align":let v=o==="basic"?"none":o;u.setAlign.call(this,v,null,null,null),this.selectComponent(r,a);break;case"caption":let b=!c._captionChecked;if(u.openModify.call(this,!0),c._captionChecked=c.captionCheckEl.checked=b,u.update_image.call(this,!1,!1,!1),b){let y=this.util.getChildElement(c._caption,function(x){return x.nodeType===3});y?this.setRange(y,0,y,y.textContent.length):c._caption.focus(),this.controllersOff()}else this.selectComponent(r,a),u.openModify.call(this,!0);break;case"revert":u.setOriginSize.call(this),this.selectComponent(r,a);break;case"update":u.openModify.call(this),this.controllersOff();break;case"delete":u.destroy.call(this);break}this.history.push(!1)}},resetTransform:function(i){let n=(i.getAttribute("data-size")||i.getAttribute("data-origin")||"").split(",");this.context.resizing._rotateVertical=!1,i.style.maxWidth="",i.style.transform="",i.style.transformOrigin="",i.setAttribute("data-rotate",""),i.setAttribute("data-rotateX",""),i.setAttribute("data-rotateY",""),this.plugins[this.context.resizing._resize_plugin].setSize.call(this,n[0]?n[0]:"auto",n[1]?n[1]:"",!0)},setTransformSize:function(i,n,s){let o=i.getAttribute("data-percentage"),a=this.context.resizing._rotateVertical,c=i.getAttribute("data-rotate")*1,r="";if(o&&!a)o=o.split(","),o[0]==="auto"&&o[1]==="auto"?this.plugins[this.context.resizing._resize_plugin].setAutoSize.call(this):this.plugins[this.context.resizing._resize_plugin].setPercentSize.call(this,o[0],o[1]);else{let u=this.util.getParentElement(i,"FIGURE"),p=n||i.offsetWidth,f=s||i.offsetHeight,_=(a?f:p)+"px",h=(a?p:f)+"px";if(this.plugins[this.context.resizing._resize_plugin].cancelPercentAttr.call(this),this.plugins[this.context.resizing._resize_plugin].setSize.call(this,p+"px",f+"px",!0),u.style.width=_,u.style.height=this.context[this.context.resizing._resize_plugin]._caption?"":h,a){let g=p/2+"px "+p/2+"px 0",d=f/2+"px "+f/2+"px 0";r=c===90||c===-270?d:g}}i.style.transformOrigin=r,this.plugins.resizing._setTransForm(i,c.toString(),i.getAttribute("data-rotateX")||"",i.getAttribute("data-rotateY")||""),a?i.style.maxWidth="none":i.style.maxWidth="",this.plugins.resizing.setCaptionPosition.call(this,i)},_setTransForm:function(i,n,s,o){let a=(i.offsetWidth-i.offsetHeight)*(/-/.test(n)?1:-1),c="";if(/[1-9]/.test(n)&&(s||o))switch(c=s?"Y":"X",n){case"90":c=s&&o?"X":o?c:"";break;case"270":a*=-1,c=s&&o?"Y":s?c:"";break;case"-90":c=s&&o?"Y":s?c:"";break;case"-270":a*=-1,c=s&&o?"X":o?c:"";break;default:c=""}n%180===0&&(i.style.maxWidth=""),i.style.transform="rotate("+n+"deg)"+(s?" rotateX("+s+"deg)":"")+(o?" rotateY("+o+"deg)":"")+(c?" translate"+c+"("+a+"px)":"")},setCaptionPosition:function(i){let n=this.util.getChildElement(this.util.getParentElement(i,"FIGURE"),"FIGCAPTION");n&&(n.style.marginTop=(this.context.resizing._rotateVertical?i.offsetWidth-i.offsetHeight:0)+"px")},onMouseDown_resize_handle:function(i){i.stopPropagation(),i.preventDefault();let n=this.context.resizing,s=n._resize_direction=i.target.classList[0];n._resizeClientX=i.clientX,n._resizeClientY=i.clientY,this.context.element.resizeBackground.style.display="block",n.resizeButton.style.display="none",n.resizeDiv.style.float=/l/.test(s)?"right":/r/.test(s)?"left":"none";let o=function(r){if(r.type==="keydown"&&r.keyCode!==27)return;let u=n._isChange;n._isChange=!1,this.removeDocEvent("mousemove",a),this.removeDocEvent("mouseup",o),this.removeDocEvent("keydown",o),r.type==="keydown"?(this.controllersOff(),this.context.element.resizeBackground.style.display="none",this.plugins[this.context.resizing._resize_plugin].init.call(this)):(this.plugins.resizing.cancel_controller_resize.call(this,s),u&&this.history.push(!1))}.bind(this),a=this.plugins.resizing.resizing_element.bind(this,n,s,this.context[n._resize_plugin]);this.addDocEvent("mousemove",a),this.addDocEvent("mouseup",o),this.addDocEvent("keydown",o)},resizing_element:function(i,n,s,o){let a=o.clientX,c=o.clientY,r=s._element_w,u=s._element_h,p=s._element_w+(/r/.test(n)?a-i._resizeClientX:i._resizeClientX-a),f=s._element_h+(/b/.test(n)?c-i._resizeClientY:i._resizeClientY-c),_=s._element_h/s._element_w*p;/t/.test(n)&&(i.resizeDiv.style.top=s._element_h-(/h/.test(n)?f:_)+"px"),/l/.test(n)&&(i.resizeDiv.style.left=s._element_w-p+"px"),/r|l/.test(n)&&(i.resizeDiv.style.width=p+"px",r=p),/^(t|b)[^h]$/.test(n)?(i.resizeDiv.style.height=_+"px",u=_):/^(t|b)h$/.test(n)&&(i.resizeDiv.style.height=f+"px",u=f),i._resize_w=r,i._resize_h=u,this.util.changeTxt(i.resizeDisplay,this._w.Math.round(r)+" x "+this._w.Math.round(u)),i._isChange=!0},cancel_controller_resize:function(i){let n=this.context.resizing._rotateVertical;this.controllersOff(),this.context.element.resizeBackground.style.display="none";let s=this._w.Math.round(n?this.context.resizing._resize_h:this.context.resizing._resize_w),o=this._w.Math.round(n?this.context.resizing._resize_w:this.context.resizing._resize_h);if(!n&&!/%$/.test(s)){let r=this.context.element.wysiwygFrame.clientWidth-32-2;this.util.getNumber(s,0)>r&&(o=this._w.Math.round(o/s*r),s=r)}let a=this.context.resizing._resize_plugin;this.plugins[a].setSize.call(this,s,o,!1,i),n&&this.plugins.resizing.setTransformSize.call(this,this.context[this.context.resizing._resize_plugin]._element,s,o),this.selectComponent(this.context[a]._element,a)}};return typeof e>"u"&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"resizing",{enumerable:!0,writable:!1,configurable:!1,value:l})),l})});var Y=R((gt,W)=>{"use strict";(function(t,e){typeof W=="object"&&typeof W.exports=="object"?W.exports=t.document?e(t,!0):function(l){if(!l.document)throw new Error("SUNEDITOR_MODULES a window with a document");return e(l)}:e(t)})(typeof window<"u"?window:gt,function(t,e){let l={name:"fileManager",_xmlHttp:null,_checkMediaComponent:function(i){return/IMG/i.test(i)?!/FIGURE/i.test(i.parentElement.nodeName)||!/FIGURE/i.test(i.parentElement.parentElement.nodeName):!0},upload:function(i,n,s,o,a){this.showLoading();let c=this.plugins.fileManager,r=c._xmlHttp=this.util.getXMLHttpRequest();if(r.onreadystatechange=c._callBackUpload.bind(this,r,o,a),r.open("post",i,!0),n!==null&&typeof n=="object"&&this._w.Object.keys(n).length>0)for(let u in n)r.setRequestHeader(u,n[u]);r.send(s)},_callBackUpload:function(i,n,s){if(i.readyState===4)if(i.status===200)try{n(i)}catch(o){throw Error('[SUNEDITOR.fileManager.upload.callBack.fail] cause : "'+o.message+'"')}finally{this.closeLoading()}else{this.closeLoading();let o=i.responseText?JSON.parse(i.responseText):i;if(typeof s!="function"||s("",o,this)){let a="[SUNEDITOR.fileManager.upload.serverException] status: "+i.status+", response: "+(o.errorMessage||i.responseText);throw this.functions.noticeOpen(a),Error(a)}}},checkInfo:function(i,n,s,o,a){let c=[];for(let d=0,m=n.length;d<m;d++)c=c.concat([].slice.call(this.context.element.wysiwyg.querySelectorAll(n[d]+':not([data-se-embed="true"])')));let r=this.plugins.fileManager,u=this.context[i],p=u._infoList,f=r.setInfo.bind(this);if(c.length===p.length)if(this._componentsInfoReset){for(let d=0,m=c.length;d<m;d++)f(i,c[d],s,null,a);return}else{let d=!1;for(let m=0,v=p.length,b;m<v;m++)if(b=p[m],c.filter(function(y){return b.src===y.src&&b.index.toString()===y.getAttribute("data-index")}).length===0){d=!0;break}if(!d)return}let _=a?this.context.resizing._resize_plugin:"";a&&(this.context.resizing._resize_plugin=i);let h=[],g=[];for(let d=0,m=p.length;d<m;d++)g[d]=p[d].index;for(u.__updateTags=c;c.length>0;){let d=c.shift();!this.util.getParentElement(d,this.util.isMediaComponent)||!r._checkMediaComponent(d)?(h.push(u._infoIndex),o(d)):!d.getAttribute("data-index")||g.indexOf(d.getAttribute("data-index")*1)<0?(h.push(u._infoIndex),d.removeAttribute("data-index"),f(i,d,s,null,a)):h.push(d.getAttribute("data-index")*1)}for(let d=0,m;d<p.length;d++)m=p[d].index,!(h.indexOf(m)>-1)&&(p.splice(d,1),typeof s=="function"&&s(null,m,"delete",null,0,this),d--);a&&(this.context.resizing._resize_plugin=_)},setInfo:function(i,n,s,o,a){let c=a?this.context.resizing._resize_plugin:"";a&&(this.context.resizing._resize_plugin=i);let r=this.plugins[i],u=this.context[i],p=u._infoList,f=n.getAttribute("data-index"),_=null,h="";if(o||(o={name:n.getAttribute("data-file-name")||(typeof n.src=="string"?n.src.split("/").pop():""),size:n.getAttribute("data-file-size")||0}),!f||this._componentsInfoInit)h="create",f=u._infoIndex++,n.setAttribute("data-index",f),n.setAttribute("data-file-name",o.name),n.setAttribute("data-file-size",o.size),_={src:n.src,index:f*1,name:o.name,size:o.size},p.push(_);else{h="update",f*=1;for(let g=0,d=p.length;g<d;g++)if(f===p[g].index){_=p[g];break}_||(f=u._infoIndex++,_={index:f},p.push(_)),_.src=n.src,_.name=n.getAttribute("data-file-name"),_.size=n.getAttribute("data-file-size")*1}if(_.element=n,_.delete=r.destroy.bind(this,n),_.select=function(g){g.scrollIntoView(!0),this._w.setTimeout(r.select.bind(this,g))}.bind(this,n),a){if(!n.getAttribute("origin-size")&&n.naturalWidth&&n.setAttribute("origin-size",n.naturalWidth+","+n.naturalHeight),!n.getAttribute("data-origin")){let g=this.util.getParentElement(n,this.util.isMediaComponent),d=this.util.getParentElement(n,"FIGURE"),m=this.plugins.resizing._module_getSizeX.call(this,u,n,d,g),v=this.plugins.resizing._module_getSizeY.call(this,u,n,d,g);n.setAttribute("data-origin",m+","+v),n.setAttribute("data-size",m+","+v)}if(!n.style.width){let g=(n.getAttribute("data-size")||n.getAttribute("data-origin")||"").split(",");r.onModifyMode.call(this,n,null),r.applySize.call(this,g[0],g[1])}this.context.resizing._resize_plugin=c}typeof s=="function"&&s(n,f,h,_,--u._uploadFileLength<0?0:u._uploadFileLength,this)},deleteInfo:function(i,n,s){if(n>=0){let o=this.context[i]._infoList;for(let a=0,c=o.length;a<c;a++)if(n===o[a].index){o.splice(a,1),typeof s=="function"&&s(null,n,"delete",null,0,this);return}}},resetInfo:function(i,n){let s=this.context[i];if(typeof n=="function"){let o=s._infoList;for(let a=0,c=o.length;a<c;a++)n(null,o[a].index,"delete",null,0,this)}s._infoList=[],s._infoIndex=0}};return typeof e>"u"&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"fileManager",{enumerable:!0,writable:!1,configurable:!1,value:l})),l})});var At=R((Tt,X)=>{"use strict";(function(t,e){typeof X=="object"&&typeof X.exports=="object"?X.exports=t.document?e(t,!0):function(l){if(!l.document)throw new Error("SUNEDITOR_MODULES a window with a document");return e(l)}:e(t)})(typeof window<"u"?window:Tt,function(t,e){let l={name:"fileBrowser",_xmlHttp:null,_loading:null,add:function(i){let n=i.context;n.fileBrowser={_closeSignal:!1,area:null,header:null,tagArea:null,body:null,list:null,tagElements:null,items:[],selectedTags:[],selectorHandler:null,contextPlugin:"",columnSize:4};let s=i.util.createElement("DIV");s.className="se-file-browser sun-editor-common";let o=i.util.createElement("DIV");o.className="se-file-browser-back";let a=i.util.createElement("DIV");a.className="se-file-browser-inner",a.innerHTML=this.set_browser(i),s.appendChild(o),s.appendChild(a),this._loading=s.querySelector(".se-loading-box"),n.fileBrowser.area=s,n.fileBrowser.header=a.querySelector(".se-file-browser-header"),n.fileBrowser.titleArea=a.querySelector(".se-file-browser-title"),n.fileBrowser.tagArea=a.querySelector(".se-file-browser-tags"),n.fileBrowser.body=a.querySelector(".se-file-browser-body"),n.fileBrowser.list=a.querySelector(".se-file-browser-list"),n.fileBrowser.tagArea.addEventListener("click",this.onClickTag.bind(i)),n.fileBrowser.list.addEventListener("click",this.onClickFile.bind(i)),a.addEventListener("mousedown",this._onMouseDown_browser.bind(i)),a.addEventListener("click",this._onClick_browser.bind(i)),n.element.relative.appendChild(s),s=null,o=null,a=null},set_browser:function(i){let n=i.lang;return'<div class="se-file-browser-content"><div class="se-file-browser-header"><button type="button" data-command="close" class="se-btn se-file-browser-close" class="close" title="'+n.dialogBox.close+'" aria-label="'+n.dialogBox.close+'">'+i.icons.cancel+'</button><span class="se-file-browser-title"></span><div class="se-file-browser-tags"></div></div><div class="se-file-browser-body"><div class="se-loading-box sun-editor-common"><div class="se-loading-effect"></div></div><div class="se-file-browser-list"></div></div></div>'},_onMouseDown_browser:function(i){/se-file-browser-inner/.test(i.target.className)?this.context.fileBrowser._closeSignal=!0:this.context.fileBrowser._closeSignal=!1},_onClick_browser:function(i){i.stopPropagation(),(/close/.test(i.target.getAttribute("data-command"))||this.context.fileBrowser._closeSignal)&&this.plugins.fileBrowser.close.call(this)},open:function(i,n){this.plugins.fileBrowser._bindClose&&(this._d.removeEventListener("keydown",this.plugins.fileBrowser._bindClose),this.plugins.fileBrowser._bindClose=null),this.plugins.fileBrowser._bindClose=function(c){/27/.test(c.keyCode)&&this.plugins.fileBrowser.close.call(this)}.bind(this),this._d.addEventListener("keydown",this.plugins.fileBrowser._bindClose);let s=this.context.fileBrowser;s.contextPlugin=i,s.selectorHandler=n;let o=this.context[i],a=o.listClass;this.util.hasClass(s.list,a)||(s.list.className="se-file-browser-list "+a),this.options.popupDisplay==="full"?s.area.style.position="fixed":s.area.style.position="absolute",s.titleArea.textContent=o.title,s.area.style.display="block",this.plugins.fileBrowser._drawFileList.call(this,this.context[i].url,this.context[i].header)},_bindClose:null,close:function(){let i=this.plugins.fileBrowser;i._xmlHttp&&i._xmlHttp.abort(),i._bindClose&&(this._d.removeEventListener("keydown",i._bindClose),i._bindClose=null);let n=this.context.fileBrowser;n.area.style.display="none",n.selectorHandler=null,n.selectedTags=[],n.items=[],n.list.innerHTML=n.tagArea.innerHTML=n.titleArea.textContent="",typeof this.plugins[n.contextPlugin].init=="function"&&this.plugins[n.contextPlugin].init.call(this),n.contextPlugin=""},showBrowserLoading:function(){this._loading.style.display="block"},closeBrowserLoading:function(){this._loading.style.display="none"},_drawFileList:function(i,n){let s=this.plugins.fileBrowser,o=s._xmlHttp=this.util.getXMLHttpRequest();if(o.onreadystatechange=s._callBackGet.bind(this,o),o.open("get",i,!0),n!==null&&typeof n=="object"&&this._w.Object.keys(n).length>0)for(let a in n)o.setRequestHeader(a,n[a]);o.send(null),this.plugins.fileBrowser.showBrowserLoading()},_callBackGet:function(i){if(i.readyState===4){if(this.plugins.fileBrowser._xmlHttp=null,i.status===200)try{let n=JSON.parse(i.responseText);n.result.length>0?this.plugins.fileBrowser._drawListItem.call(this,n.result,!0):n.nullMessage&&(this.context.fileBrowser.list.innerHTML=n.nullMessage)}catch(n){throw Error('[SUNEDITOR.fileBrowser.drawList.fail] cause : "'+n.message+'"')}finally{this.plugins.fileBrowser.closeBrowserLoading(),this.context.fileBrowser.body.style.maxHeight=this._w.innerHeight-this.context.fileBrowser.header.offsetHeight-50+"px"}else if(this.plugins.fileBrowser.closeBrowserLoading(),i.status!==0){let n=i.responseText?JSON.parse(i.responseText):i,s="[SUNEDITOR.fileBrowser.get.serverException] status: "+i.status+", response: "+(n.errorMessage||i.responseText);throw Error(s)}}},_drawListItem:function(i,n){let s=this.context.fileBrowser,o=this.context[s.contextPlugin],a=[],c=i.length,r=o.columnSize||s.columnSize,u=r<=1?1:Math.round(c/r)||1,p=o.itemTemplateHandler,f="",_='<div class="se-file-item-column">',h=1;for(let g=0,d,m;g<c;g++)if(d=i[g],m=d.tag?typeof d.tag=="string"?d.tag.split(","):d.tag:[],m=d.tag=m.map(function(v){return v.trim()}),_+=p(d),(g+1)%u===0&&h<r&&g+1<c&&(h++,_+='</div><div class="se-file-item-column">'),n&&m.length>0)for(let v=0,b=m.length,y;v<b;v++)y=m[v],y&&a.indexOf(y)===-1&&(a.push(y),f+='<a title="'+y+'" aria-label="'+y+'">'+y+"</a>");_+="</div>",s.list.innerHTML=_,n&&(s.items=i,s.tagArea.innerHTML=f,s.tagElements=s.tagArea.querySelectorAll("A"))},onClickTag:function(i){let n=i.target;if(!this.util.isAnchor(n))return;let s=n.textContent,o=this.plugins.fileBrowser,a=this.context.fileBrowser,c=a.tagArea.querySelector('a[title="'+s+'"]'),r=a.selectedTags,u=r.indexOf(s);u>-1?(r.splice(u,1),this.util.removeClass(c,"on")):(r.push(s),this.util.addClass(c,"on")),o._drawListItem.call(this,r.length===0?a.items:a.items.filter(function(p){return p.tag.some(function(f){return r.indexOf(f)>-1})}),!1)},onClickFile:function(i){i.preventDefault(),i.stopPropagation();let n=this.context.fileBrowser,s=n.list,o=i.target,a=null;if(o===s)return;for(;s!==o.parentNode&&(a=o.getAttribute("data-command"),!a);)o=o.parentNode;if(!a)return;(n.selectorHandler||this.context[n.contextPlugin].selectorHandler)(o,o.parentNode.querySelector(".__se__img_name").textContent),this.plugins.fileBrowser.close.call(this)}};return typeof e>"u"&&(t.SUNEDITOR_MODULES||Object.defineProperty(t,"SUNEDITOR_MODULES",{enumerable:!0,writable:!1,configurable:!1,value:{}}),Object.defineProperty(t.SUNEDITOR_MODULES,"fileBrowser",{enumerable:!0,writable:!1,configurable:!1,value:l})),l})});var G={name:"blockquote",display:"command",add:function(t,e){let l=t.context;l.blockquote={targetButton:e,tag:t.util.createElement("BLOCKQUOTE")}},active:function(t){if(!t)this.util.removeClass(this.context.blockquote.targetButton,"active");else if(/blockquote/i.test(t.nodeName))return this.util.addClass(this.context.blockquote.targetButton,"active"),!0;return!1},action:function(){let t=this.util.getParentElement(this.getSelectionNode(),"blockquote");t?this.detachRangeFormatElement(t,null,null,!1,!1):this.applyRangeFormatElement(this.context.blockquote.tag.cloneNode(!1))}};var K={name:"align",display:"submenu",add:function(t,e){let l=t.icons,i=t.context;i.align={targetButton:e,_itemMenu:null,_alignList:null,currentAlign:"",defaultDir:t.options.rtl?"right":"left",icons:{justify:l.align_justify,left:l.align_left,right:l.align_right,center:l.align_center}};let n=this.setSubmenu(t),s=i.align._itemMenu=n.querySelector("ul");s.addEventListener("click",this.pickup.bind(t)),i.align._alignList=s.querySelectorAll("li button"),t.initMenuTarget(this.name,e,n),n=null,s=null},setSubmenu:function(t){let e=t.lang,l=t.icons,i=t.util.createElement("DIV"),n=t.options.alignItems,s="";for(let o=0,a,c;o<n.length;o++)a=n[o],c=e.toolbar["align"+a.charAt(0).toUpperCase()+a.slice(1)],s+='<li><button type="button" class="se-btn-list se-btn-align" data-value="'+a+'" title="'+c+'" aria-label="'+c+'"><span class="se-list-icon">'+l["align_"+a]+"</span>"+c+"</button></li>";return i.className="se-submenu se-list-layer se-list-align",i.innerHTML='<div class="se-list-inner"><ul class="se-list-basic">'+s+"</ul></div>",i},active:function(t){let e=this.context.align,l=e.targetButton,i=l.firstElementChild;if(!t)this.util.changeElement(i,e.icons[e.defaultDir]),l.removeAttribute("data-focus");else if(this.util.isFormatElement(t)){let n=t.style.textAlign;if(n)return this.util.changeElement(i,e.icons[n]||e.icons[e.defaultDir]),l.setAttribute("data-focus",n),!0}return!1},on:function(){let t=this.context.align,e=t._alignList,l=t.targetButton.getAttribute("data-focus")||t.defaultDir;if(l!==t.currentAlign){for(let i=0,n=e.length;i<n;i++)l===e[i].getAttribute("data-value")?this.util.addClass(e[i],"active"):this.util.removeClass(e[i],"active");t.currentAlign=l}},exchangeDir:function(){let t=this.options.rtl?"right":"left";if(!this.context.align||this.context.align.defaultDir===t)return;this.context.align.defaultDir=t;let e=this.context.align._itemMenu,l=e.querySelector('[data-value="left"]'),i=e.querySelector('[data-value="right"]');if(l&&i){let n=l.parentElement,s=i.parentElement;n.appendChild(i),s.appendChild(l)}},pickup:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,l=null;for(;!l&&!/UL/i.test(e.tagName);)l=e.getAttribute("data-value"),e=e.parentNode;if(!l)return;let i=this.context.align.defaultDir,n=this.getSelectedElements();for(let s=0,o=n.length;s<o;s++)this.util.setStyle(n[s],"textAlign",l===i?"":l);this.effectNode=null,this.submenuOff(),this.focus(),this.history.push(!1)}};var Q={name:"font",display:"submenu",add:function(t,e){let l=t.context;l.font={targetText:e.querySelector(".txt"),targetTooltip:e.parentNode.querySelector(".se-tooltip-text"),_fontList:null,currentFont:""};let i=this.setSubmenu(t);i.querySelector(".se-list-inner").addEventListener("click",this.pickup.bind(t)),l.font._fontList=i.querySelectorAll("ul li button"),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){let e=t.lang,l=t.util.createElement("DIV");l.className="se-submenu se-list-layer se-list-font-family";let i,n,s,o,a=t.options.font,c='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="'+e.toolbar.default+'" aria-label="'+e.toolbar.default+'">('+e.toolbar.default+")</button></li>";for(s=0,o=a.length;s<o;s++)i=a[s],n=i.split(",")[0],c+='<li><button type="button" class="se-btn-list" data-value="'+i+'" data-txt="'+n+'" title="'+n+'" aria-label="'+n+'" style="font-family:'+i+';">'+n+"</button></li>";return c+="</ul></div>",l.innerHTML=c,l},active:function(t){let e=this.context.font.targetText,l=this.context.font.targetTooltip;if(t){if(t.style&&t.style.fontFamily.length>0){let i=t.style.fontFamily.replace(/["']/g,"");return this.util.changeTxt(e,i),this.util.changeTxt(l,this.lang.toolbar.font+" ("+i+")"),!0}}else{let i=this.hasFocus?this.wwComputedStyle.fontFamily:this.lang.toolbar.font;this.util.changeTxt(e,i),this.util.changeTxt(l,this.hasFocus?this.lang.toolbar.font+(i?" ("+i+")":""):i)}return!1},on:function(){let t=this.context.font,e=t._fontList,l=t.targetText.textContent;if(l!==t.currentFont){for(let i=0,n=e.length;i<n;i++)l===(e[i].getAttribute("data-value")||"").replace(/'|"/g,"")?this.util.addClass(e[i],"active"):this.util.removeClass(e[i],"active");t.currentFont=l}},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation();let e=t.target.getAttribute("data-value");if(e){let l=this.util.createElement("SPAN");/[\s\d\W]/.test(e)&&!/^['"].*['"]$/.test(e)&&(e='"'+e+'"'),l.style.fontFamily=e,this.nodeChange(l,["font-family"],null,null)}else this.nodeChange(null,["font-family"],["span"],!0);this.submenuOff()}};var J={name:"fontSize",display:"submenu",add:function(t,e){let l=t.context;l.fontSize={targetText:e.querySelector(".txt"),_sizeList:null,currentSize:""};let i=this.setSubmenu(t),n=i.querySelector("ul");n.addEventListener("click",this.pickup.bind(t)),l.fontSize._sizeList=n.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null,n=null},setSubmenu:function(t){let e=t.options,l=t.lang,i=t.util.createElement("DIV");i.className="se-submenu se-list-layer se-list-font-size";let n=e.fontSize?e.fontSize:[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72],s='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="'+l.toolbar.default+'" aria-label="'+l.toolbar.default+'">('+l.toolbar.default+")</button></li>";for(let o=0,a=e.fontSizeUnit,c=n.length,r;o<c;o++)r=n[o],s+='<li><button type="button" class="se-btn-list" data-value="'+r+a+'" title="'+r+a+'" aria-label="'+r+a+'" style="font-size:'+r+a+';">'+r+"</button></li>";return s+="</ul></div>",i.innerHTML=s,i},active:function(t){if(!t)this.util.changeTxt(this.context.fontSize.targetText,this.hasFocus?this._convertFontSize.call(this,this.options.fontSizeUnit,this.wwComputedStyle.fontSize):this.lang.toolbar.fontSize);else if(t.style&&t.style.fontSize.length>0)return this.util.changeTxt(this.context.fontSize.targetText,this._convertFontSize.call(this,this.options.fontSizeUnit,t.style.fontSize)),!0;return!1},on:function(){let t=this.context.fontSize,e=t._sizeList,l=t.targetText.textContent;if(l!==t.currentSize){for(let i=0,n=e.length;i<n;i++)l===e[i].getAttribute("data-value")?this.util.addClass(e[i],"active"):this.util.removeClass(e[i],"active");t.currentSize=l}},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation();let e=t.target.getAttribute("data-value");if(e){let l=this.util.createElement("SPAN");l.style.fontSize=e,this.nodeChange(l,["font-size"],null,null)}else this.nodeChange(null,["font-size"],["span"],!0);this.submenuOff()}};var F={name:"colorPicker",add:function(t){let e=t.context;e.colorPicker={colorListHTML:"",_colorInput:"",_defaultColor:"#000",_styleProperty:"color",_currentColor:"",_colorList:[]},e.colorPicker.colorListHTML=this.createColorList(t,this._makeColorList)},createColorList:function(t,e){let l=t.options,i=t.lang,n=!l.colorList||l.colorList.length===0?["#ff0000","#ff5e00","#ffe400","#abf200","#00d8ff","#0055ff","#6600ff","#ff00dd","#000000","#ffd8d8","#fae0d4","#faf4c0","#e4f7ba","#d4f4fa","#d9e5ff","#e8d9ff","#ffd9fa","#f1f1f1","#ffa7a7","#ffc19e","#faed7d","#cef279","#b2ebf4","#b2ccff","#d1b2ff","#ffb2f5","#bdbdbd","#f15f5f","#f29661","#e5d85c","#bce55c","#5cd1e5","#6699ff","#a366ff","#f261df","#8c8c8c","#980000","#993800","#998a00","#6b9900","#008299","#003399","#3d0099","#990085","#353535","#670000","#662500","#665c00","#476600","#005766","#002266","#290066","#660058","#222222"]:l.colorList,s=[],o='<div class="se-list-inner">';for(let a=0,c=n.length,r;a<c;a++)r=n[a],r&&(typeof r=="string"&&(s.push(r),a<c-1)||(s.length>0&&(o+='<div class="se-selector-color">'+e(s)+"</div>",s=[]),typeof r=="object"&&(o+='<div class="se-selector-color">'+e(r)+"</div>")));return o+='<form class="se-form-group"><input type="text" maxlength="9" class="_se_color_picker_input se-color-input"/><button type="submit" class="se-btn-primary _se_color_picker_submit" title="'+i.dialogBox.submitButton+'" aria-label="'+i.dialogBox.submitButton+'">'+t.icons.checked+'</button><button type="button" class="se-btn _se_color_picker_remove" title="'+i.toolbar.removeFormat+'" aria-label="'+i.toolbar.removeFormat+'">'+t.icons.erase+"</button></form></div>",o},_makeColorList:function(t){let e="";e+='<ul class="se-color-pallet">';for(let l=0,i=t.length,n;l<i;l++)n=t[l],typeof n=="string"&&(e+='<li><button type="button" data-value="'+n+'" title="'+n+'" aria-label="'+n+'" style="background-color:'+n+';"></button></li>');return e+="</ul>",e},init:function(t,e){let l=this.plugins.colorPicker,i=e||l.getColorInNode.call(this,t)||this.context.colorPicker._defaultColor;i=l.isHexColor(i)?i:l.rgb2hex(i)||i;let n=this.context.colorPicker._colorList;if(n)for(let s=0,o=n.length;s<o;s++)i.toLowerCase()===n[s].getAttribute("data-value").toLowerCase()?this.util.addClass(n[s],"active"):this.util.removeClass(n[s],"active");l.setInputText.call(this,l.colorName2hex.call(this,i))},setCurrentColor:function(t){this.context.colorPicker._currentColor=t,this.context.colorPicker._colorInput.style.borderColor=t},setInputText:function(t){t=/^#/.test(t)?t:"#"+t,this.context.colorPicker._colorInput.value=t,this.plugins.colorPicker.setCurrentColor.call(this,t)},getColorInNode:function(t){let e="",l=this.context.colorPicker._styleProperty;for(;t&&!this.util.isWysiwygDiv(t)&&e.length===0;)t.nodeType===1&&t.style[l]&&(e=t.style[l]),t=t.parentNode;return e},isHexColor:function(t){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(t)},rgb2hex:function(t){let e=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""},colorName2hex:function(t){if(/^#/.test(t))return t;var e=this.util.createElement("div");e.style.display="none",e.style.color=t;var l=this._w.getComputedStyle(this._d.body.appendChild(e)).color.match(/\d+/g).map(function(i){return parseInt(i,10)});return this.util.removeItem(e),l.length>=3?"#"+((1<<24)+(l[0]<<16)+(l[1]<<8)+l[2]).toString(16).substr(1):!1}};var Z={name:"fontColor",display:"submenu",add:function(t,e){t.addModule([F]);let l=t.context;l.fontColor={previewEl:null,colorInput:null,colorList:null};let i=this.setSubmenu(t);l.fontColor.colorInput=i.querySelector("._se_color_picker_input"),l.fontColor.colorInput.addEventListener("keyup",this.onChangeInput.bind(t)),i.querySelector("._se_color_picker_submit").addEventListener("click",this.submit.bind(t)),i.querySelector("._se_color_picker_remove").addEventListener("click",this.remove.bind(t)),i.addEventListener("click",this.pickup.bind(t)),l.fontColor.colorList=i.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){let e=t.context.colorPicker.colorListHTML,l=t.util.createElement("DIV");return l.className="se-submenu se-list-layer",l.innerHTML=e,l},on:function(){let t=this.context.colorPicker,e=this.context.fontColor;t._colorInput=e.colorInput;let l=this.wwComputedStyle.color;t._defaultColor=l?this.plugins.colorPicker.isHexColor(l)?l:this.plugins.colorPicker.rgb2hex(l):"#333333",t._styleProperty="color",t._colorList=e.colorList,this.plugins.colorPicker.init.call(this,this.getSelectionNode(),null)},onChangeInput:function(t){this.plugins.colorPicker.setCurrentColor.call(this,t.target.value)},submit:function(){this.plugins.fontColor.applyColor.call(this,this.context.colorPicker._currentColor)},pickup:function(t){t.preventDefault(),t.stopPropagation(),this.plugins.fontColor.applyColor.call(this,t.target.getAttribute("data-value"))},remove:function(){this.nodeChange(null,["color"],["span"],!0),this.submenuOff()},applyColor:function(t){if(!t)return;let e=this.util.createElement("SPAN");e.style.color=t,this.nodeChange(e,["color"],null,null),this.submenuOff()}};var tt={name:"hiliteColor",display:"submenu",add:function(t,e){t.addModule([F]);let l=t.context;l.hiliteColor={previewEl:null,colorInput:null,colorList:null};let i=this.setSubmenu(t);l.hiliteColor.colorInput=i.querySelector("._se_color_picker_input"),l.hiliteColor.colorInput.addEventListener("keyup",this.onChangeInput.bind(t)),i.querySelector("._se_color_picker_submit").addEventListener("click",this.submit.bind(t)),i.querySelector("._se_color_picker_remove").addEventListener("click",this.remove.bind(t)),i.addEventListener("click",this.pickup.bind(t)),l.hiliteColor.colorList=i.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){let e=t.context.colorPicker.colorListHTML,l=t.util.createElement("DIV");return l.className="se-submenu se-list-layer",l.innerHTML=e,l},on:function(){let t=this.context.colorPicker,e=this.context.hiliteColor;t._colorInput=e.colorInput;let l=this.wwComputedStyle.backgroundColor;t._defaultColor=l?this.plugins.colorPicker.isHexColor(l)?l:this.plugins.colorPicker.rgb2hex(l):"#ffffff",t._styleProperty="backgroundColor",t._colorList=e.colorList,this.plugins.colorPicker.init.call(this,this.getSelectionNode(),null)},onChangeInput:function(t){this.plugins.colorPicker.setCurrentColor.call(this,t.target.value)},submit:function(){this.plugins.hiliteColor.applyColor.call(this,this.context.colorPicker._currentColor)},pickup:function(t){t.preventDefault(),t.stopPropagation(),this.plugins.hiliteColor.applyColor.call(this,t.target.getAttribute("data-value"))},remove:function(){this.nodeChange(null,["background-color"],["span"],!0),this.submenuOff()},applyColor:function(t){if(!t)return;let e=this.util.createElement("SPAN");e.style.backgroundColor=t,this.nodeChange(e,["background-color"],null,null),this.submenuOff()}};var et={name:"horizontalRule",display:"submenu",add:function(t,e){t.context.horizontalRule={currentHR:null};let l=this.setSubmenu(t);l.querySelector("ul").addEventListener("click",this.horizontalRulePick.bind(t)),t.initMenuTarget(this.name,e,l),l=null},setSubmenu:function(t){let e=t.lang,l=t.util.createElement("DIV"),i=t.options.hrItems||[{name:e.toolbar.hr_solid,class:"__se__solid"},{name:e.toolbar.hr_dashed,class:"__se__dashed"},{name:e.toolbar.hr_dotted,class:"__se__dotted"}],n="";for(let s=0,o=i.length;s<o;s++)n+='<li><button type="button" class="se-btn-list btn_line" data-command="horizontalRule" data-value="'+i[s].class+'" title="'+i[s].name+'" aria-label="'+i[s].name+'"><hr'+(i[s].class?' class="'+i[s].class+'"':"")+(i[s].style?' style="'+i[s].style+'"':"")+"/></button></li>";return l.className="se-submenu se-list-layer se-list-line",l.innerHTML='<div class="se-list-inner"><ul class="se-list-basic">'+n+"</ul></div>",l},active:function(t){if(!t)this.util.hasClass(this.context.horizontalRule.currentHR,"on")&&this.controllersOff();else if(/HR/i.test(t.nodeName))return this.context.horizontalRule.currentHR=t,this.util.hasClass(t,"on")||(this.util.addClass(t,"on"),this.controllersOn("hr",this.util.removeClass.bind(this.util,t,"on"))),!0;return!1},appendHr:function(t){return this.focus(),this.insertComponent(t.cloneNode(!1),!1,!0,!1)},horizontalRulePick:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,l=e.getAttribute("data-command");for(;!l&&!/UL/i.test(e.tagName);)e=e.parentNode,l=e.getAttribute("data-command");if(!l)return;let i=this.plugins.horizontalRule.appendHr.call(this,e.firstElementChild);i&&(this.setRange(i,0,i,0),this.submenuOff())}};var it={name:"list",display:"submenu",add:function(t,e){let l=t.context;l.list={targetButton:e,_list:null,currentList:"",icons:{bullets:t.icons.list_bullets,number:t.icons.list_number}};let i=this.setSubmenu(t),n=i.querySelector("ul");n.addEventListener("click",this.pickup.bind(t)),l.list._list=n.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null,n=null},setSubmenu:function(t){let e=t.lang,l=t.util.createElement("DIV");return l.className="se-submenu se-list-layer",l.innerHTML='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="se-btn-list se-tooltip" data-command="OL" title="'+e.toolbar.orderList+'" aria-label="'+e.toolbar.orderList+'">'+t.icons.list_number+'</button></li><li><button type="button" class="se-btn-list se-tooltip" data-command="UL" title="'+e.toolbar.unorderList+'" aria-label="'+e.toolbar.unorderList+'">'+t.icons.list_bullets+"</button></li></ul></div>",l},active:function(t){let e=this.context.list.targetButton,l=e.firstElementChild,i=this.util;if(i.isList(t)){let n=t.nodeName;return e.setAttribute("data-focus",n),i.addClass(e,"active"),/UL/i.test(n)?i.changeElement(l,this.context.list.icons.bullets):i.changeElement(l,this.context.list.icons.number),!0}else e.removeAttribute("data-focus"),i.changeElement(l,this.context.list.icons.number),i.removeClass(e,"active");return!1},on:function(){let t=this.context.list,e=t._list,l=t.targetButton.getAttribute("data-focus")||"";if(l!==t.currentList){for(let i=0,n=e.length;i<n;i++)l===e[i].getAttribute("data-command")?this.util.addClass(e[i],"active"):this.util.removeClass(e[i],"active");t.currentList=l}},editList:function(t,e,l){let i=this.getRange(),n=e||this.getSelectedElementsAndComponents(!1);if(n.length===0&&(e||(i=this.getRange_addLine(i,null),n=this.getSelectedElementsAndComponents(!1),n.length===0)))return;let s=this.util;s.sortByDepth(n,!0);let o=n[0],a=n[n.length-1],c=(s.isListCell(o)||s.isComponent(o))&&!o.previousElementSibling?o.parentNode.previousElementSibling:o.previousElementSibling,r=(s.isListCell(a)||s.isComponent(a))&&!a.nextElementSibling?a.parentNode.nextElementSibling:a.nextElementSibling,u=i.collapsed,p={sc:i.startContainer,so:i.startContainer===i.endContainer&&s.onlyZeroWidthSpace(i.startContainer)&&i.startOffset===0&&i.endOffset===1?i.endOffset:i.startOffset,ec:i.endContainer,eo:i.endOffset},f=null,_=!0;for(let h=0,g=n.length;h<g;h++)if(!s.isList(s.getRangeFormatElement(n[h],function(d){return this.getRangeFormatElement(d)&&d!==n[h]}.bind(s)))){_=!1;break}if(_&&(!c||o.tagName!==c.tagName||t!==c.tagName.toUpperCase())&&(!r||a.tagName!==r.tagName||t!==r.tagName.toUpperCase())){if(l){for(let b=0,y=n.length;b<y;b++)for(let x=b-1;x>=0;x--)if(n[x].contains(n[b])){n.splice(b,1),b--,y--;break}}let h=s.getRangeFormatElement(o),g=h&&h.tagName===t,d,m,v=function(b){return!this.isComponent(b)}.bind(s);g||(m=s.createElement(t));for(let b=0,y=n.length,x,C;b<y;b++)C=s.getRangeFormatElement(n[b],v),!(!C||!s.isList(C))&&(x?x!==C?(l&&s.isListCell(C.parentNode)?this.plugins.list._detachNested.call(this,d.f):f=this.detachRangeFormatElement(d.f[0].parentNode,d.f,m,!1,!0),C=n[b].parentNode,g||(m=s.createElement(t)),x=C,d={r:x,f:[s.getParentElement(n[b],"LI")]}):d.f.push(s.getParentElement(n[b],"LI")):(x=C,d={r:x,f:[s.getParentElement(n[b],"LI")]}),b===y-1&&(l&&s.isListCell(C.parentNode)?this.plugins.list._detachNested.call(this,d.f):f=this.detachRangeFormatElement(d.f[0].parentNode,d.f,m,!1,!0)))}else{let h=c&&c.parentNode,g=r&&r.parentNode;c=h&&!s.isWysiwygDiv(h)&&h.nodeName===t?h:c,r=g&&!s.isWysiwygDiv(g)&&g.nodeName===t?g:r;let d=c&&c.tagName===t,m=r&&r.tagName===t,v=d?c:s.createElement(t),b=null,y=null,x=null,C=null,S=function(k){return!this.isComponent(k)&&!this.isList(k)}.bind(s);for(let k=0,I=n.length,z,w,L,E,N,M,T,$,U;k<I;k++){if(w=n[k],w.childNodes.length===0&&!s._isIgnoreNodeChange(w)){s.removeItem(w);continue}if(E=n[k+1],N=w.parentNode,M=E?E.parentNode:null,L=s.isListCell(w),U=s.isRangeFormatElement(N)?N:null,T=L&&!s.isWysiwygDiv(N)?N.parentNode:N,$=L&&!s.isWysiwygDiv(N)?!E||s.isListCell(T)?N:N.nextSibling:w.nextSibling,z=s.createElement("LI"),s.copyFormatAttributes(z,w),k===0&&p.sc===w&&(p.sc=z),k===I-1&&p.ec===w&&(p.ec=z),s.isComponent(w)){let D=/^HR$/i.test(w.nodeName);D||(z.innerHTML="<br>"),z.innerHTML+=w.outerHTML,D&&(z.innerHTML+="<br>")}else{let D=w.childNodes;for(;D[0];)z.appendChild(D[0])}v.appendChild(z),E||(y=v),(!E||T!==M||s.isRangeFormatElement($))&&(b||(b=v),(!d||!E||T!==M)&&!(E&&s.isList(M)&&M===N)&&v.parentNode!==T&&T.insertBefore(v,$)),s.removeItem(w),d&&x===null&&(x=v.children.length-1),E&&(s.getRangeFormatElement(M,S)!==s.getRangeFormatElement(N,S)||s.isList(M)&&s.isList(N)&&s.getElementDepth(M)!==s.getElementDepth(N))&&(v=s.createElement(t)),U&&U.children.length===0&&s.removeItem(U)}x&&(b=b.children[x]),m&&(C=v.children.length-1,v.innerHTML+=r.innerHTML,y=v.children[C],s.removeItem(r))}return this.effectNode=null,u?f:p},_detachNested:function(t){let e=t[0],l=t[t.length-1],i=l.nextElementSibling,n=e.parentNode,s=n.parentNode.nextElementSibling,o=n.parentNode.parentNode;for(let c=0,r=t.length;c<r;c++)o.insertBefore(t[c],s);if(i&&n.children.length>0){let c=n.cloneNode(!1),r=n.childNodes,u=this.util.getPositionIndex(i);for(;r[u];)c.appendChild(r[u]);l.appendChild(c)}n.children.length===0&&this.util.removeItem(n),this.util.mergeSameTags(o);let a=this.util.getEdgeChildNodes(e,l);return{cc:e.parentNode,sc:a.sc,ec:a.ec}},editInsideList:function(t,e){e=e||this.getSelectedElements().filter(function(o){return this.isListCell(o)}.bind(this.util));let l=e.length;if(l===0||!t&&!this.util.isListCell(e[0].previousElementSibling)&&!this.util.isListCell(e[l-1].nextElementSibling))return{sc:e[0],so:0,ec:e[l-1],eo:1};let i=e[0].parentNode,n=e[l-1],s=null;if(t){if(i!==n.parentNode&&this.util.isList(n.parentNode.parentNode)&&n.nextElementSibling)for(n=n.nextElementSibling;n;)e.push(n),n=n.nextElementSibling;s=this.plugins.list.editList.call(this,i.nodeName.toUpperCase(),e,!0)}else{let o=this.util.createElement(i.nodeName),a=e[0].previousElementSibling,c=n.nextElementSibling,r={s:null,e:null,sl:i,el:i};for(let f=0,_=l,h;f<_;f++)h=e[f],h.parentNode!==i&&(this.plugins.list._insiedList.call(this,i,o,a,c,r),i=h.parentNode,o=this.util.createElement(i.nodeName)),a=h.previousElementSibling,c=h.nextElementSibling,o.appendChild(h);this.plugins.list._insiedList.call(this,i,o,a,c,r);let u=this.util.getNodeFromPath(r.s,r.sl),p=this.util.getNodeFromPath(r.e,r.el);s={sc:u,so:0,ec:p,eo:p.textContent.length}}return s},_insiedList:function(t,e,l,i,n){let s=!1;if(l&&e.tagName===l.tagName){let o=e.children;for(;o[0];)l.appendChild(o[0]);e=l,s=!0}if(i&&e.tagName===i.tagName){let o=i.children;for(;o[0];)e.appendChild(o[0]);let a=i.nextElementSibling;i.parentNode.removeChild(i),i=a}if(!s){this.util.isListCell(l)&&(t=l,i=null),t.insertBefore(e,i),n.s||(n.s=this.util.getNodePath(e.firstElementChild.firstChild,t,null),n.sl=t);let o=t.contains(n.sl)?this.util.getNodePath(n.sl,t):null;n.e=this.util.getNodePath(e.lastElementChild.firstChild,t,null),n.el=t,this.util.mergeSameTags(t,[n.s,n.e,o],!1),this.util.mergeNestedTags(t),o&&(n.sl=this.util.getNodeFromPath(o,t))}return e},pickup:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,l="";for(;!l&&!/^UL$/i.test(e.tagName);)l=e.getAttribute("data-command"),e=e.parentNode;if(!l)return;let i=this.plugins.list.editList.call(this,l,null,!1);i&&this.setRange(i.sc,i.so,i.ec,i.eo),this.submenuOff(),this.history.push(!1)}};var lt={name:"table",display:"submenu",add:function(t,e){let l=t.context,i=l.table={_element:null,_tdElement:null,_trElement:null,_trElements:null,_tableXY:[],_maxWidth:!0,_fixedColumn:!1,_rtl:t.options.rtl,cellControllerTop:t.options.tableCellControllerPosition==="top",resizeText:null,headerButton:null,mergeButton:null,splitButton:null,splitMenu:null,maxText:t.lang.controller.maxSize,minText:t.lang.controller.minSize,_physical_cellCnt:0,_logical_cellCnt:0,_rowCnt:0,_rowIndex:0,_physical_cellIndex:0,_logical_cellIndex:0,_current_colSpan:0,_current_rowSpan:0,icons:{expansion:t.icons.expansion,reduction:t.icons.reduction}},n=this.setSubmenu(t),s=n.querySelector(".se-controller-table-picker");i.tableHighlight=n.querySelector(".se-table-size-highlighted"),i.tableUnHighlight=n.querySelector(".se-table-size-unhighlighted"),i.tableDisplay=n.querySelector(".se-table-size-display"),t.options.rtl&&(i.tableHighlight.style.left=10*18-13+"px");let o=this.setController_table(t);i.tableController=o,i.resizeButton=o.querySelector("._se_table_resize"),i.resizeText=o.querySelector("._se_table_resize > span > span"),i.columnFixedButton=o.querySelector("._se_table_fixed_column"),i.headerButton=o.querySelector("._se_table_header");let a=this.setController_tableEditor(t,i.cellControllerTop);i.resizeDiv=a,i.splitMenu=a.querySelector(".se-btn-group-sub"),i.mergeButton=a.querySelector("._se_table_merge_button"),i.splitButton=a.querySelector("._se_table_split_button"),i.insertRowAboveButton=a.querySelector("._se_table_insert_row_a"),i.insertRowBelowButton=a.querySelector("._se_table_insert_row_b"),s.addEventListener("mousemove",this.onMouseMove_tablePicker.bind(t,i)),s.addEventListener("click",this.appendTable.bind(t)),a.addEventListener("click",this.onClick_tableController.bind(t)),o.addEventListener("click",this.onClick_tableController.bind(t)),t.initMenuTarget(this.name,e,n),l.element.relative.appendChild(a),l.element.relative.appendChild(o),n=null,s=null,a=null,o=null,i=null},setSubmenu:function(t){let e=t.util.createElement("DIV");return e.className="se-submenu se-selector-table",e.innerHTML='<div class="se-table-size"><div class="se-table-size-picker se-controller-table-picker"></div><div class="se-table-size-highlighted"></div><div class="se-table-size-unhighlighted"></div></div><div class="se-table-size-display">1 x 1</div>',e},setController_table:function(t){let e=t.lang,l=t.icons,i=t.util.createElement("DIV");return i.className="se-controller se-controller-table",i.innerHTML='<div><div class="se-btn-group"><button type="button" data-command="resize" class="se-btn se-tooltip _se_table_resize">'+l.expansion+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.maxSize+'</span></span></button><button type="button" data-command="layout" class="se-btn se-tooltip _se_table_fixed_column">'+l.fixed_column_width+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.fixedColumnWidth+'</span></span></button><button type="button" data-command="header" class="se-btn se-tooltip _se_table_header">'+l.table_header+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.tableHeader+'</span></span></button><button type="button" data-command="remove" class="se-btn se-tooltip">'+l.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",i},setController_tableEditor:function(t,e){let l=t.lang,i=t.icons,n=t.util.createElement("DIV");return n.className="se-controller se-controller-table-cell",n.innerHTML=(e?"":'<div class="se-arrow se-arrow-up"></div>')+'<div class="se-btn-group"><button type="button" data-command="insert" data-value="row" data-option="up" class="se-btn se-tooltip _se_table_insert_row_a">'+i.insert_row_above+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.insertRowAbove+'</span></span></button><button type="button" data-command="insert" data-value="row" data-option="down" class="se-btn se-tooltip _se_table_insert_row_b">'+i.insert_row_below+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.insertRowBelow+'</span></span></button><button type="button" data-command="delete" data-value="row" class="se-btn se-tooltip">'+i.delete_row+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.deleteRow+'</span></span></button><button type="button" data-command="merge" class="_se_table_merge_button se-btn se-tooltip" disabled>'+i.merge_cell+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.mergeCells+'</span></span></button></div><div class="se-btn-group" style="padding-top: 0;"><button type="button" data-command="insert" data-value="cell" data-option="left" class="se-btn se-tooltip">'+i.insert_column_left+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.insertColumnBefore+'</span></span></button><button type="button" data-command="insert" data-value="cell" data-option="right" class="se-btn se-tooltip">'+i.insert_column_right+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.insertColumnAfter+'</span></span></button><button type="button" data-command="delete" data-value="cell" class="se-btn se-tooltip">'+i.delete_column+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.deleteColumn+'</span></span></button><button type="button" data-command="onsplit" class="_se_table_split_button se-btn se-tooltip">'+i.split_cell+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+l.controller.splitCells+'</span></span></button><div class="se-btn-group-sub sun-editor-common se-list-layer se-table-split"><div class="se-list-inner"><ul class="se-list-basic"><li class="se-btn-list" data-command="split" data-value="vertical" style="line-height:32px;" title="'+l.controller.VerticalSplit+'" aria-label="'+l.controller.VerticalSplit+'">'+l.controller.VerticalSplit+'</li><li class="se-btn-list" data-command="split" data-value="horizontal" style="line-height:32px;" title="'+l.controller.HorizontalSplit+'" aria-label="'+l.controller.HorizontalSplit+'">'+l.controller.HorizontalSplit+"</li></ul></div></div></div>",n},appendTable:function(){let t=this.util.createElement("TABLE"),e=this.plugins.table.createCells,l=this.context.table._tableXY[0],i=this.context.table._tableXY[1],n="<tbody>";for(;i>0;)n+="<tr>"+e.call(this,"td",l)+"</tr>",--i;if(n+="</tbody>",t.innerHTML=n,this.insertComponent(t,!1,!0,!1)){let o=t.querySelector("td div");this.setRange(o,0,o,0),this.plugins.table.reset_table_picker.call(this)}},createCells:function(t,e,l){if(t=t.toLowerCase(),l){let i=this.util.createElement(t);return i.innerHTML="<div><br></div>",i}else{let i="";for(;e>0;)i+="<"+t+"><div><br></div></"+t+">",e--;return i}},onMouseMove_tablePicker:function(t,e){e.stopPropagation();let l=this._w.Math.ceil(e.offsetX/18),i=this._w.Math.ceil(e.offsetY/18);l=l<1?1:l,i=i<1?1:i,t._rtl&&(t.tableHighlight.style.left=l*18-13+"px",l=11-l),t.tableHighlight.style.width=l+"em",t.tableHighlight.style.height=i+"em",this.util.changeTxt(t.tableDisplay,l+" x "+i),t._tableXY=[l,i]},reset_table_picker:function(){if(!this.context.table.tableHighlight)return;let t=this.context.table.tableHighlight.style,e=this.context.table.tableUnHighlight.style;t.width="1em",t.height="1em",e.width="10em",e.height="10em",this.util.changeTxt(this.context.table.tableDisplay,"1 x 1"),this.submenuOff()},init:function(){let t=this.context.table,e=this.plugins.table;if(e._removeEvents.call(this),e._selectedTable){let l=e._selectedTable.querySelectorAll(".se-table-selected-cell");for(let i=0,n=l.length;i<n;i++)this.util.removeClass(l[i],"se-table-selected-cell")}e._toggleEditor.call(this,!0),t._element=null,t._tdElement=null,t._trElement=null,t._trElements=null,t._tableXY=[],t._maxWidth=!0,t._fixedColumn=!1,t._physical_cellCnt=0,t._logical_cellCnt=0,t._rowCnt=0,t._rowIndex=0,t._physical_cellIndex=0,t._logical_cellIndex=0,t._current_colSpan=0,t._current_rowSpan=0,e._shift=!1,e._selectedCells=null,e._selectedTable=null,e._ref=null,e._fixedCell=null,e._selectedCell=null,e._fixedCellName=null},call_controller_tableEdit:function(t){let e=this.plugins.table,l=this.context.table;if(!this.getSelection().isCollapsed&&!e._selectedCell){this.controllersOff(),this.util.removeClass(t,"se-table-selected-cell");return}let i=l._element||this.plugins.table._selectedTable||this.util.getParentElement(t,"TABLE");l._maxWidth=this.util.hasClass(i,"se-table-size-100")||i.style.width==="100%"||!i.style.width&&!this.util.hasClass(i,"se-table-size-auto"),l._fixedColumn=this.util.hasClass(i,"se-table-layout-fixed")||i.style.tableLayout==="fixed",e.setTableStyle.call(this,l._maxWidth?"width|column":"width"),e.setPositionControllerTop.call(this,i),e.setPositionControllerDiv.call(this,t,e._shift),e._shift||this.controllersOn(l.resizeDiv,l.tableController,e.init.bind(this),t,"table")},setPositionControllerTop:function(t){this.setControllerPosition(this.context.table.tableController,t,"top",{left:0,top:0})},setPositionControllerDiv:function(t,e){let l=this.context.table,i=l.resizeDiv;this.plugins.table.setCellInfo.call(this,t,e),l.cellControllerTop?this.setControllerPosition(i,l._element,"top",{left:l.tableController.offsetWidth,top:0}):this.setControllerPosition(i,t,"bottom",{left:0,top:0})},setCellInfo:function(t,e){let l=this.context.table,i=l._element=this.plugins.table._selectedTable||this.util.getParentElement(t,"TABLE");if(/THEAD/i.test(i.firstElementChild.nodeName)?this.util.addClass(l.headerButton,"active"):this.util.removeClass(l.headerButton,"active"),e||l._physical_cellCnt===0){l._tdElement!==t&&(l._tdElement=t,l._trElement=t.parentNode);let n=l._trElements=i.rows,s=t.cellIndex,o=0;for(let u=0,p=n[0].cells,f=n[0].cells.length;u<f;u++)o+=p[u].colSpan;let a=l._rowIndex=l._trElement.rowIndex;l._rowCnt=n.length,l._physical_cellCnt=l._trElement.cells.length,l._logical_cellCnt=o,l._physical_cellIndex=s,l._current_colSpan=l._tdElement.colSpan-1,l._current_rowSpan-l._trElement.cells[s].rowSpan-1;let c=[],r=[];for(let u=0,p,f;u<=a;u++){p=n[u].cells,f=0;for(let _=0,h=p.length,g,d,m,v;_<h;_++){if(g=p[_],d=g.colSpan-1,m=g.rowSpan-1,v=_+f,r.length>0)for(let b=0,y;b<r.length;b++)y=r[b],!(y.row>u)&&(v>=y.index?(f+=y.cs,v+=y.cs,y.rs-=1,y.row=u+1,y.rs<1&&(r.splice(b,1),b--)):_===h-1&&(y.rs-=1,y.row=u+1,y.rs<1&&(r.splice(b,1),b--)));if(u===a&&_===s){l._logical_cellIndex=v;break}m>0&&c.push({index:v,cs:d+1,rs:m,row:-1}),f+=d}r=r.concat(c).sort(function(_,h){return _.index-h.index}),c=[]}c=null,r=null}},editTable:function(t,e){let l=this.plugins.table,i=this.context.table,n=i._element,s=t==="row";if(s){let o=i._trElement.parentNode;if(/^THEAD$/i.test(o.nodeName)){if(e==="up")return;if(!o.nextElementSibling||!/^TBODY$/i.test(o.nextElementSibling.nodeName)){n.innerHTML+="<tbody><tr>"+l.createCells.call(this,"td",i._logical_cellCnt,!1)+"</tr></tbody>";return}}}if(l._ref){let o=i._tdElement,a=l._selectedCells;if(s)if(e)l.setCellInfo.call(this,e==="up"?a[0]:a[a.length-1],!0),l.editRow.call(this,e,o);else{let c=a[0].parentNode,r=[a[0]];for(let u=1,p=a.length,f;u<p;u++)f=a[u],c!==f.parentNode&&(r.push(f),c=f.parentNode);for(let u=0,p=r.length;u<p;u++)l.setCellInfo.call(this,r[u],!0),l.editRow.call(this,e)}else{let c=a[0].parentNode;if(e){let r=null;for(let u=0,p=a.length-1;u<p;u++)if(c!==a[u+1].parentNode){r=a[u];break}l.setCellInfo.call(this,e==="left"?a[0]:r||a[0],!0),l.editCell.call(this,e,o)}else{let r=[a[0]];for(let u=1,p=a.length,f;u<p&&(f=a[u],c===f.parentNode);u++)r.push(f);for(let u=0,p=r.length;u<p;u++)l.setCellInfo.call(this,r[u],!0),l.editCell.call(this,e)}}e||l.init.call(this)}else l[s?"editRow":"editCell"].call(this,e);if(!e){let o=n.children;for(let a=0;a<o.length;a++)o[a].children.length===0&&(this.util.removeItem(o[a]),a--);n.children.length===0&&this.util.removeItem(n)}},editRow:function(t,e){let l=this.context.table,i=!t,n=t==="up",s=l._rowIndex,o=i||n?s:s+l._current_rowSpan+1,a=i?-1:1,c=l._trElements,r=l._logical_cellCnt;for(let u=0,p=s+(i?-1:0),f;u<=p;u++){if(f=c[u].cells,f.length===0)return;for(let _=0,h=f.length,g,d;_<h;_++)g=f[_].rowSpan,d=f[_].colSpan,!(g<2&&d<2)&&g+u>o&&o>u&&(f[_].rowSpan=g+a,r-=d)}if(i){let u=c[s+1];if(u){let p=[],f=c[s].cells,_=0;for(let h=0,g=f.length,d,m;h<g;h++)d=f[h],m=h+_,_+=d.colSpan-1,d.rowSpan>1&&(d.rowSpan-=1,p.push({cell:d.cloneNode(!1),index:m}));if(p.length>0){let h=p.shift();f=u.cells,_=0;for(let g=0,d=f.length,m,v;g<d&&(m=f[g],v=g+_,_+=m.colSpan-1,!(v>=h.index&&(g--,_--,_+=h.cell.colSpan-1,u.insertBefore(h.cell,m),h=p.shift(),!h)));g++);if(h){u.appendChild(h.cell);for(let g=0,d=p.length;g<d;g++)u.appendChild(p[g].cell)}}}l._element.deleteRow(o)}else{let u=l._element.insertRow(o);u.innerHTML=this.plugins.table.createCells.call(this,"td",r,!1)}i?this.controllersOff():this.plugins.table.setPositionControllerDiv.call(this,e||l._tdElement,!0)},editCell:function(t,e){let l=this.context.table,i=this.util,n=!t,s=t==="left",o=l._current_colSpan,a=n||s?l._logical_cellIndex:l._logical_cellIndex+o+1,c=l._trElements,r=[],u=[],p=0,f=[],_=[];for(let h=0,g=l._rowCnt,d,m,v,b,y,x;h<g;h++){d=c[h],m=a,y=!1,v=d.cells,x=0;for(let C=0,S,k=v.length,I,z,w;C<k&&(S=v[C],!!S);C++)if(I=S.rowSpan-1,z=S.colSpan-1,n){if(w=C+x,u.length>0){let L=!v[C+1];for(let E=0,N;E<u.length;E++)N=u[E],!(N.row>h)&&(w>=N.index?(x+=N.cs,w=C+x,N.rs-=1,N.row=h+1,N.rs<1&&(u.splice(E,1),E--)):L&&(N.rs-=1,N.row=h+1,N.rs<1&&(u.splice(E,1),E--)))}I>0&&r.push({rs:I,cs:z+1,index:w,row:-1}),w>=m&&w+z<=m+o?f.push(S):w<=m+o&&w+z>=m?S.colSpan-=i.getOverlapRangeAtIndex(a,a+o,w,w+z):I>0&&(w<m||w+z>m+o)&&_.push({cell:S,i:h,rs:h+I}),x+=z}else{if(C>=m)break;if(z>0){if(p<1&&z+C>=m){S.colSpan+=1,m=null,p=I+1;break}m-=z}if(!y){for(let L=0,E;L<u.length;L++)E=u[L],m-=E.cs,E.rs-=1,E.rs<1&&(u.splice(L,1),L--);y=!0}}if(u=u.concat(r).sort(function(C,S){return C.index-S.index}),r=[],!n){if(p>0){p-=1;continue}m!==null&&v.length>0&&(b=this.plugins.table.createCells.call(this,v[0].nodeName,0,!0),b=d.insertBefore(b,v[m]))}}if(n){let h,g;for(let d=0,m=f.length,v;d<m;d++)v=f[d].parentNode,i.removeItem(f[d]),v.cells.length===0&&(h||(h=i.getArrayIndex(c,v)),g=i.getArrayIndex(c,v),i.removeItem(v));for(let d=0,m=_.length,v;d<m;d++)v=_[d],v.cell.rowSpan=i.getOverlapRangeAtIndex(h,g,v.i,v.rs);this.controllersOff()}else this.plugins.table.setPositionControllerDiv.call(this,e||l._tdElement,!0)},_closeSplitMenu:null,openSplitMenu:function(){this.util.addClass(this.context.table.splitButton,"on"),this.context.table.splitMenu.style.display="inline-table",this.plugins.table._closeSplitMenu=function(){this.util.removeClass(this.context.table.splitButton,"on"),this.context.table.splitMenu.style.display="none",this.removeDocEvent("click",this.plugins.table._closeSplitMenu),this.plugins.table._closeSplitMenu=null}.bind(this),this.addDocEvent("click",this.plugins.table._closeSplitMenu)},splitCells:function(t){let e=this.util,l=t==="vertical",i=this.context.table,n=i._tdElement,s=i._trElements,o=i._trElement,a=i._logical_cellIndex,c=i._rowIndex,r=this.plugins.table.createCells.call(this,n.nodeName,0,!0);if(l){let u=n.colSpan;if(r.rowSpan=n.rowSpan,u>1)r.colSpan=this._w.Math.floor(u/2),n.colSpan=u-r.colSpan,o.insertBefore(r,n.nextElementSibling);else{let p=[],f=[];for(let _=0,h=i._rowCnt,g,d;_<h;_++){g=s[_].cells,d=0;for(let m=0,v=g.length,b,y,x,C;m<v;m++){if(b=g[m],y=b.colSpan-1,x=b.rowSpan-1,C=m+d,f.length>0)for(let S=0,k;S<f.length;S++)k=f[S],!(k.row>_)&&(C>=k.index?(d+=k.cs,C+=k.cs,k.rs-=1,k.row=_+1,k.rs<1&&(f.splice(S,1),S--)):m===v-1&&(k.rs-=1,k.row=_+1,k.rs<1&&(f.splice(S,1),S--)));if(C<=a&&x>0&&p.push({index:C,cs:y+1,rs:x,row:-1}),b!==n&&C<=a&&C+y>=a+u-1){b.colSpan+=1;break}if(C>a)break;d+=y}f=f.concat(p).sort(function(m,v){return m.index-v.index}),p=[]}o.insertBefore(r,n.nextElementSibling)}}else{let u=n.rowSpan;if(r.colSpan=n.colSpan,u>1){r.rowSpan=this._w.Math.floor(u/2);let p=u-r.rowSpan,f=[],_=e.getArrayIndex(s,o)+p;for(let m=0,v,b;m<_;m++){v=s[m].cells,b=0;for(let y=0,x=v.length,C,S,k;y<x&&(k=y+b,!(k>=a));y++)C=v[y],S=C.rowSpan-1,S>0&&S+m>=_&&k<a&&f.push({index:k,cs:C.colSpan}),b+=C.colSpan-1}let h=s[_],g=h.cells,d=f.shift();for(let m=0,v=g.length,b=0,y,x,C,S;m<v;m++){if(C=m+b,y=g[m],x=y.colSpan-1,S=C+x+1,d&&S>=d.index&&(b+=d.cs,S+=d.cs,d=f.shift()),S>=a||m===v-1){h.insertBefore(r,y.nextElementSibling);break}b+=x}n.rowSpan=p}else{r.rowSpan=n.rowSpan;let p=e.createElement("TR");p.appendChild(r);for(let h=0,g;h<c;h++){if(g=s[h].cells,g.length===0)return;for(let d=0,m=g.length;d<m;d++)h+g[d].rowSpan-1>=c&&(g[d].rowSpan+=1)}let f=i._physical_cellIndex,_=o.cells;for(let h=0,g=_.length;h<g;h++)h!==f&&(_[h].rowSpan+=1);o.parentNode.insertBefore(p,o.nextElementSibling)}}this.focusEdge(n),this.plugins.table.setPositionControllerDiv.call(this,n,!0)},mergeCells:function(){let t=this.plugins.table,e=this.context.table,l=this.util,i=t._ref,n=t._selectedCells,s=n[0],o=null,a=null,c=i.ce-i.cs+1,r=i.re-i.rs+1,u="",p=null;for(let f=1,_=n.length,h,g;f<_;f++){h=n[f],p!==h.parentNode&&(p=h.parentNode),g=h.children;for(let d=0,m=g.length;d<m;d++)l.isFormatElement(g[d])&&l.onlyZeroWidthSpace(g[d].textContent)&&l.removeItem(g[d]);u+=h.innerHTML,l.removeItem(h),p.cells.length===0&&(o?a=p:o=p,r-=1)}if(o){let f=e._trElements,_=l.getArrayIndex(f,o),h=l.getArrayIndex(f,a||o),g=[];for(let d=0,m;d<=h;d++){if(m=f[d].cells,m.length===0){g.push(f[d]);continue}for(let v=0,b=m.length,y,x;v<b;v++)y=m[v],x=y.rowSpan-1,x>0&&d+x>=_&&(y.rowSpan-=l.getOverlapRangeAtIndex(_,h,d,d+x))}for(let d=0,m=g.length;d<m;d++)l.removeItem(g[d])}s.innerHTML+=u,s.colSpan=c,s.rowSpan=r,this.controllersOff(),t.setActiveButton.call(this,!0,!1),t.call_controller_tableEdit.call(this,s),l.addClass(s,"se-table-selected-cell"),this.focusEdge(s)},toggleHeader:function(){let t=this.util,e=this.context.table.headerButton,l=t.hasClass(e,"active"),i=this.context.table._element;if(l)t.removeItem(i.querySelector("thead"));else{let n=t.createElement("THEAD");n.innerHTML="<tr>"+this.plugins.table.createCells.call(this,"th",this.context.table._logical_cellCnt,!1)+"</tr>",i.insertBefore(n,i.firstElementChild)}t.toggleClass(e,"active"),/TH/i.test(this.context.table._tdElement.nodeName)?this.controllersOff():this.plugins.table.setPositionControllerDiv.call(this,this.context.table._tdElement,!1)},setTableStyle:function(t){let e=this.context.table,l=e._element,i,n,s,o;t.indexOf("width")>-1&&(i=e.resizeButton.firstElementChild,n=e.resizeText,e._maxWidth?(s=e.icons.reduction,o=e.minText,e.columnFixedButton.style.display="block",this.util.removeClass(l,"se-table-size-auto"),this.util.addClass(l,"se-table-size-100")):(s=e.icons.expansion,o=e.maxText,e.columnFixedButton.style.display="none",this.util.removeClass(l,"se-table-size-100"),this.util.addClass(l,"se-table-size-auto")),this.util.changeElement(i,s),this.util.changeTxt(n,o)),t.indexOf("column")>-1&&(e._fixedColumn?(this.util.removeClass(l,"se-table-layout-auto"),this.util.addClass(l,"se-table-layout-fixed"),this.util.addClass(e.columnFixedButton,"active")):(this.util.removeClass(l,"se-table-layout-fixed"),this.util.addClass(l,"se-table-layout-auto"),this.util.removeClass(e.columnFixedButton,"active")))},setActiveButton:function(t,e){let l=this.context.table;/^TH$/i.test(t.nodeName)?(l.insertRowAboveButton.setAttribute("disabled",!0),l.insertRowBelowButton.setAttribute("disabled",!0)):(l.insertRowAboveButton.removeAttribute("disabled"),l.insertRowBelowButton.removeAttribute("disabled")),!e||t===e?(l.splitButton.removeAttribute("disabled"),l.mergeButton.setAttribute("disabled",!0)):(l.splitButton.setAttribute("disabled",!0),l.mergeButton.removeAttribute("disabled"))},_bindOnSelect:null,_bindOffSelect:null,_bindOffShift:null,_selectedCells:null,_shift:!1,_fixedCell:null,_fixedCellName:null,_selectedCell:null,_selectedTable:null,_ref:null,_toggleEditor:function(t){this.context.element.wysiwyg.setAttribute("contenteditable",t),t?this.util.removeClass(this.context.element.wysiwyg,"se-disabled"):this.util.addClass(this.context.element.wysiwyg,"se-disabled")},_offCellMultiSelect:function(t){t.stopPropagation();let e=this.plugins.table;e._shift?e._initBind&&(this._wd.removeEventListener("touchmove",e._initBind),e._initBind=null):(e._removeEvents.call(this),e._toggleEditor.call(this,!0)),!(!e._fixedCell||!e._selectedTable)&&(e.setActiveButton.call(this,e._fixedCell,e._selectedCell),e.call_controller_tableEdit.call(this,e._selectedCell||e._fixedCell),e._selectedCells=e._selectedTable.querySelectorAll(".se-table-selected-cell"),e._selectedCell&&e._fixedCell&&this.focusEdge(e._selectedCell),e._shift||(e._fixedCell=null,e._selectedCell=null,e._fixedCellName=null))},_onCellMultiSelect:function(t){this._antiBlur=!0;let e=this.plugins.table,l=this.util.getParentElement(t.target,this.util.isCell);if(e._shift)l===e._fixedCell?e._toggleEditor.call(this,!0):e._toggleEditor.call(this,!1);else if(!e._ref){if(l===e._fixedCell)return;e._toggleEditor.call(this,!1)}!l||l===e._selectedCell||e._fixedCellName!==l.nodeName||e._selectedTable!==this.util.getParentElement(l,"TABLE")||(e._selectedCell=l,e._setMultiCells.call(this,e._fixedCell,l))},_setMultiCells:function(t,e){let l=this.plugins.table,i=l._selectedTable.rows,n=this.util,s=l._selectedTable.querySelectorAll(".se-table-selected-cell");for(let u=0,p=s.length;u<p;u++)n.removeClass(s[u],"se-table-selected-cell");if(t===e&&(n.addClass(t,"se-table-selected-cell"),!l._shift))return;let o=!0,a=[],c=[],r=l._ref={_i:0,cs:null,ce:null,rs:null,re:null};for(let u=0,p=i.length,f,_;u<p;u++){f=i[u].cells,_=0;for(let h=0,g=f.length,d,m,v,b;h<g;h++){if(d=f[h],v=d.colSpan-1,b=d.rowSpan-1,m=h+_,a.length>0)for(let y=0,x;y<a.length;y++)x=a[y],!(x.row>u)&&(m>=x.index?(_+=x.cs,m+=x.cs,x.rs-=1,x.row=u+1,x.rs<1&&(a.splice(y,1),y--)):h===g-1&&(x.rs-=1,x.row=u+1,x.rs<1&&(a.splice(y,1),y--)));if(o){if((d===t||d===e)&&(r.cs=r.cs!==null&&r.cs<m?r.cs:m,r.ce=r.ce!==null&&r.ce>m+v?r.ce:m+v,r.rs=r.rs!==null&&r.rs<u?r.rs:u,r.re=r.re!==null&&r.re>u+b?r.re:u+b,r._i+=1),r._i===2){o=!1,a=[],c=[],u=-1;break}}else if(n.getOverlapRangeAtIndex(r.cs,r.ce,m,m+v)&&n.getOverlapRangeAtIndex(r.rs,r.re,u,u+b)){let y=r.cs<m?r.cs:m,x=r.ce>m+v?r.ce:m+v,C=r.rs<u?r.rs:u,S=r.re>u+b?r.re:u+b;if(r.cs!==y||r.ce!==x||r.rs!==C||r.re!==S){r.cs=y,r.ce=x,r.rs=C,r.re=S,u=-1,a=[],c=[];break}n.addClass(d,"se-table-selected-cell")}b>0&&c.push({index:m,cs:v+1,rs:b,row:-1}),_+=d.colSpan-1}a=a.concat(c).sort(function(h,g){return h.index-g.index}),c=[]}},_removeEvents:function(){let t=this.plugins.table;t._initBind&&(this._wd.removeEventListener("touchmove",t._initBind),t._initBind=null),t._bindOnSelect&&(this._wd.removeEventListener("mousedown",t._bindOnSelect),this._wd.removeEventListener("mousemove",t._bindOnSelect),t._bindOnSelect=null),t._bindOffSelect&&(this._wd.removeEventListener("mouseup",t._bindOffSelect),t._bindOffSelect=null),t._bindOffShift&&(this._wd.removeEventListener("keyup",t._bindOffShift),t._bindOffShift=null)},_initBind:null,onTableCellMultiSelect:function(t,e){let l=this.plugins.table;l._removeEvents.call(this),this.controllersOff(),l._shift=e,l._fixedCell=t,l._fixedCellName=t.nodeName,l._selectedTable=this.util.getParentElement(t,"TABLE");let i=l._selectedTable.querySelectorAll(".se-table-selected-cell");for(let n=0,s=i.length;n<s;n++)this.util.removeClass(i[n],"se-table-selected-cell");this.util.addClass(t,"se-table-selected-cell"),l._bindOnSelect=l._onCellMultiSelect.bind(this),l._bindOffSelect=l._offCellMultiSelect.bind(this),e?(l._bindOffShift=function(){this.controllersOn(this.context.table.resizeDiv,this.context.table.tableController,this.plugins.table.init.bind(this),t,"table"),l._ref||this.controllersOff()}.bind(this),this._wd.addEventListener("keyup",l._bindOffShift,!1),this._wd.addEventListener("mousedown",l._bindOnSelect,!1)):this._wd.addEventListener("mousemove",l._bindOnSelect,!1),this._wd.addEventListener("mouseup",l._bindOffSelect,!1),l._initBind=l.init.bind(this),this._wd.addEventListener("touchmove",l._initBind,!1)},onClick_tableController:function(t){t.stopPropagation();let e=t.target.getAttribute("data-command")?t.target:t.target.parentNode;if(e.getAttribute("disabled"))return;let l=e.getAttribute("data-command"),i=e.getAttribute("data-value"),n=e.getAttribute("data-option"),s=this.plugins.table;if(typeof s._closeSplitMenu=="function"&&(s._closeSplitMenu(),l==="onsplit")||!l)return;t.preventDefault();let o=this.context.table;switch(l){case"insert":case"delete":s.editTable.call(this,i,n);break;case"header":s.toggleHeader.call(this);break;case"onsplit":s.openSplitMenu.call(this);break;case"split":s.splitCells.call(this,i);break;case"merge":s.mergeCells.call(this);break;case"resize":o._maxWidth=!o._maxWidth,s.setTableStyle.call(this,"width"),s.setPositionControllerTop.call(this,o._element),s.setPositionControllerDiv.call(this,o._tdElement,s._shift);break;case"layout":o._fixedColumn=!o._fixedColumn,s.setTableStyle.call(this,"column"),s.setPositionControllerTop.call(this,o._element),s.setPositionControllerDiv.call(this,o._tdElement,s._shift);break;case"remove":let a=o._element.parentNode;this.util.removeItem(o._element),this.controllersOff(),a!==this.context.element.wysiwyg&&this.util.removeItemAllParents(a,function(c){return c.childNodes.length===0},null),this.focus()}this.history.push(!1)}};var nt={name:"formatBlock",display:"submenu",add:function(t,e){let l=t.context;l.formatBlock={targetText:e.querySelector(".txt"),targetTooltip:e.parentNode.querySelector(".se-tooltip-text"),_formatList:null,currentFormat:""};let i=this.setSubmenu(t);i.querySelector("ul").addEventListener("click",this.pickUp.bind(t)),l.formatBlock._formatList=i.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){let e=t.options,l=t.lang.toolbar,i=t.util.createElement("DIV");i.className="se-submenu se-list-layer se-list-format";let n=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6"],s=!e.formats||e.formats.length===0?n:e.formats,o='<div class="se-list-inner"><ul class="se-list-basic">';for(let a=0,c=s.length,r,u,p,f,_,h,g;a<c;a++)r=s[a],typeof r=="string"&&n.indexOf(r)>-1?(u=r.toLowerCase(),p=u==="blockquote"?"range":u==="pre"?"free":"replace",_=/^h/.test(u)?u.match(/\d+/)[0]:"",f=l["tag_"+(_?"h":u)]+_,g="",h=""):(u=r.tag.toLowerCase(),p=r.command,f=r.name||u,g=r.class,h=g?' class="'+g+'"':""),o+='<li><button type="button" class="se-btn-list" data-command="'+p+'" data-value="'+u+'" data-class="'+g+'" title="'+f+'" aria-label="'+f+'"><'+u+h+">"+f+"</"+u+"></button></li>";return o+="</ul></div>",i.innerHTML=o,i},active:function(t){let e=this.lang.toolbar.formats,l=this.context.formatBlock.targetText;if(!t)this.util.changeTxt(l,e);else if(this.util.isFormatElement(t)){let n=this.context.formatBlock._formatList,s=t.nodeName.toLowerCase(),o=(t.className.match(/(\s|^)__se__format__[^\s]+/)||[""])[0].trim();for(let a=0,c=n.length,r;a<c;a++)if(r=n[a],s===r.getAttribute("data-value")&&o===r.getAttribute("data-class")){e=r.title;break}return this.util.changeTxt(l,e),l.setAttribute("data-value",s),l.setAttribute("data-class",o),!0}return!1},on:function(){let t=this.context.formatBlock,e=t._formatList,l=t.targetText,i=(l.getAttribute("data-value")||"")+(l.getAttribute("data-class")||"");if(i!==t.currentFormat){for(let n=0,s=e.length,o;n<s;n++)o=e[n],i===o.getAttribute("data-value")+o.getAttribute("data-class")?this.util.addClass(o,"active"):this.util.removeClass(o,"active");t.currentFormat=i}},pickUp:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,l=null,i=null,n=null,s="";for(;!l&&!/UL/i.test(e.tagName);){if(l=e.getAttribute("data-command"),i=e.getAttribute("data-value"),s=e.getAttribute("data-class"),l){n=e.firstChild;break}e=e.parentNode}if(l){if(l==="range"){let o=n.cloneNode(!1);this.applyRangeFormatElement(o)}else{let o=this.getRange(),a=this.getSelectedElementsAndComponents(!1);if(a.length===0&&(o=this.getRange_addLine(o,null),a=this.getSelectedElementsAndComponents(!1),a.length===0))return;let c=o.startOffset,r=o.endOffset,u=this.util,p=a[0],f=a[a.length-1],_=u.getNodePath(o.startContainer,p,null,null),h=u.getNodePath(o.endContainer,f,null,null),g=this.detachList(a,!1);g.sc&&(p=g.sc),g.ec&&(f=g.ec),this.setRange(u.getNodeFromPath(_,p),c,u.getNodeFromPath(h,f),r);let d=this.getSelectedElementsAndComponents(!1);if(l==="free"){let m=d.length-1,v=d[m].parentNode,b=n.cloneNode(!1),y=b;for(let x=m,C,S,k,I,z,w,L=!0;x>=0;x--)if(C=d[x],C!==(d[x+1]?d[x+1].parentNode:null)){if(w=u.isComponent(C),S=w?"":C.innerHTML.replace(/(?!>)\s+(?=<)|\n/g," "),k=u.getParentElement(C,function(E){return E.parentNode===v}),(v!==C.parentNode||w)&&(u.isFormatElement(v)?(v.parentNode.insertBefore(b,v.nextSibling),v=v.parentNode):(v.insertBefore(b,k?k.nextSibling:null),v=C.parentNode),I=b.nextSibling,I&&b.nodeName===I.nodeName&&u.isSameAttributes(b,I)&&(b.innerHTML+="<BR>"+I.innerHTML,u.removeItem(I)),b=n.cloneNode(!1),L=!0),z=b.innerHTML,b.innerHTML=(L||!S||!z||/<br>$/i.test(S)?S:S+"<BR>")+z,x===0){v.insertBefore(b,C),I=C.nextSibling,I&&b.nodeName===I.nodeName&&u.isSameAttributes(b,I)&&(b.innerHTML+="<BR>"+I.innerHTML,u.removeItem(I));let E=b.previousSibling;E&&b.nodeName===E.nodeName&&u.isSameAttributes(b,E)&&(E.innerHTML+="<BR>"+b.innerHTML,u.removeItem(b))}w||u.removeItem(C),S&&(L=!1)}this.setRange(y,0,y,0)}else{for(let m=0,v=d.length,b,y;m<v;m++)b=d[m],(b.nodeName.toLowerCase()!==i.toLowerCase()||(b.className.match(/(\s|^)__se__format__[^\s]+/)||[""])[0].trim()!==s)&&!u.isComponent(b)&&(y=n.cloneNode(!1),u.copyFormatAttributes(y,b),y.innerHTML=b.innerHTML,b.parentNode.replaceChild(y,b)),m===0&&(p=y||b),m===v-1&&(f=y||b),y=null;this.setRange(u.getNodeFromPath(_,p),c,u.getNodeFromPath(h,f),r)}this.history.push(!1)}this.submenuOff()}}};var st={name:"lineHeight",display:"submenu",add:function(t,e){let l=t.context;l.lineHeight={_sizeList:null,currentSize:-1};let i=this.setSubmenu(t),n=i.querySelector("ul");n.addEventListener("click",this.pickup.bind(t)),l.lineHeight._sizeList=n.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null,n=null},setSubmenu:function(t){let e=t.options,l=t.lang,i=t.util.createElement("DIV");i.className="se-submenu se-list-layer";let n=e.lineHeights?e.lineHeights:[{text:"1",value:1},{text:"1.15",value:1.15},{text:"1.5",value:1.5},{text:"2",value:2}],s='<div class="se-list-inner"><ul class="se-list-basic"><li><button type="button" class="default_value se-btn-list" title="'+l.toolbar.default+'" aria-label="'+l.toolbar.default+'">('+l.toolbar.default+")</button></li>";for(let o=0,a=n.length,c;o<a;o++)c=n[o],s+='<li><button type="button" class="se-btn-list" data-value="'+c.value+'" title="'+c.text+'" aria-label="'+c.text+'">'+c.text+"</button></li>";return s+="</ul></div>",i.innerHTML=s,i},on:function(){let t=this.context.lineHeight,e=t._sizeList,l=this.util.getFormatElement(this.getSelectionNode()),i=l?l.style.lineHeight+"":"";if(i!==t.currentSize){for(let n=0,s=e.length;n<s;n++)i===e[n].getAttribute("data-value")?this.util.addClass(e[n],"active"):this.util.removeClass(e[n],"active");t.currentSize=i}},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation();let e=t.target.getAttribute("data-value")||"",l=this.getSelectedElements();for(let i=0,n=l.length;i<n;i++)l[i].style.lineHeight=e;this.submenuOff(),this.history.push(!1)}};var ot={name:"template",display:"submenu",add:function(t,e){let l=t.context;l.template={selectedIndex:-1};let i=this.setSubmenu(t);i.querySelector("ul").addEventListener("click",this.pickup.bind(t)),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){let e=t.options.templates;if(!e||e.length===0)throw Error('[SUNEDITOR.plugins.template.fail] To use the "template" plugin, please define the "templates" option.');let l=t.util.createElement("DIV");l.className="se-list-layer";let i='<div class="se-submenu se-list-inner"><ul class="se-list-basic">';for(let n=0,s=e.length,o;n<s;n++)o=e[n],i+='<li><button type="button" class="se-btn-list" data-value="'+n+'" title="'+o.name+'" aria-label="'+o.name+'">'+o.name+"</button></li>";return i+="</ul></div>",l.innerHTML=i,l},pickup:function(t){if(!/^BUTTON$/i.test(t.target.tagName))return!1;t.preventDefault(),t.stopPropagation(),this.context.template.selectedIndex=t.target.getAttribute("data-value")*1;let e=this.options.templates[this.context.template.selectedIndex];if(e.html)this.setContents(e.html);else throw this.submenuOff(),Error('[SUNEDITOR.template.fail] cause : "templates[i].html not found"');this.submenuOff()}};var at={name:"paragraphStyle",display:"submenu",add:function(t,e){let l=t.context;l.paragraphStyle={_classList:null};let i=this.setSubmenu(t);i.querySelector("ul").addEventListener("click",this.pickUp.bind(t)),l.paragraphStyle._classList=i.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null},setSubmenu:function(t){let e=t.options,l=t.util.createElement("DIV");l.className="se-submenu se-list-layer se-list-format";let i=t.lang.menu,n={spaced:{name:i.spaced,class:"__se__p-spaced",_class:""},bordered:{name:i.bordered,class:"__se__p-bordered",_class:""},neon:{name:i.neon,class:"__se__p-neon",_class:""}},s=!e.paragraphStyles||e.paragraphStyles.length===0?["spaced","bordered","neon"]:e.paragraphStyles,o='<div class="se-list-inner"><ul class="se-list-basic">';for(let a=0,c=s.length,r,u,p,f;a<c;a++){if(r=s[a],typeof r=="string"){let _=n[r.toLowerCase()];if(!_)continue;r=_}u=r.name,p=r.class?' class="'+r.class+'"':"",f=r._class,o+='<li><button type="button" class="se-btn-list'+(f?" "+f:"")+'" data-value="'+r.class+'" title="'+u+'" aria-label="'+u+'"><div'+p+">"+u+"</div></button></li>"}return o+="</ul></div>",l.innerHTML=o,l},on:function(){let e=this.context.paragraphStyle._classList,l=this.util.getFormatElement(this.getSelectionNode());for(let i=0,n=e.length;i<n;i++)this.util.hasClass(l,e[i].getAttribute("data-value"))?this.util.addClass(e[i],"active"):this.util.removeClass(e[i],"active")},pickUp:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,l=null;for(;!/^UL$/i.test(e.tagName)&&(l=e.getAttribute("data-value"),!l);)e=e.parentNode;if(!l)return;let i=this.getSelectedElements();if(i.length===0&&(this.getRange_addLine(this.getRange(),null),i=this.getSelectedElements(),i.length===0))return;let n=this.util.hasClass(e,"active")?this.util.removeClass.bind(this.util):this.util.addClass.bind(this.util);for(let s=0,o=i.length;s<o;s++)n(i[s],l);this.submenuOff(),this.history.push(!1)}};var rt={name:"textStyle",display:"submenu",add:function(t,e){let l=t.context;l.textStyle={_styleList:null};let i=this.setSubmenu(t),n=i.querySelector("ul");n.addEventListener("click",this.pickup.bind(t)),l.textStyle._styleList=i.querySelectorAll("li button"),t.initMenuTarget(this.name,e,i),i=null,n=null},setSubmenu:function(t){let e=t.options,l=t.util.createElement("DIV");l.className="se-submenu se-list-layer se-list-format";let i={code:{name:t.lang.menu.code,class:"__se__t-code",tag:"code"},translucent:{name:t.lang.menu.translucent,style:"opacity: 0.5;",tag:"span"},shadow:{name:t.lang.menu.shadow,class:"__se__t-shadow",tag:"span"}},n=e.textStyles?e.textStyles:t._w.Object.keys(i),s='<div class="se-list-inner"><ul class="se-list-basic">';for(let o=0,a=n.length,c,r,u,p,f,_,h;o<a;o++){if(c=n[o],p="",_="",f=[],typeof c=="string"){let g=i[c.toLowerCase()];if(!g)continue;c=g}u=c.name,r=c.tag||"span",h=c._class,c.style&&(p+=' style="'+c.style+'"',_+=c.style.replace(/:[^;]+(;|$)\s*/g,","),f.push("style")),c.class&&(p+=' class="'+c.class+'"',_+="."+c.class.trim().replace(/\s+/g,",."),f.push("class")),_=_.replace(/,$/,""),s+='<li><button type="button" class="se-btn-list'+(h?" "+h:"")+'" data-command="'+r+'" data-value="'+_+'" title="'+u+'" aria-label="'+u+'"><'+r+p+">"+u+"</"+r+"></button></li>"}return s+="</ul></div>",l.innerHTML=s,l},on:function(){let t=this.util,l=this.context.textStyle._styleList,i=this.getSelectionNode();for(let n=0,s=l.length,o,a,c;n<s;n++){o=l[n],a=o.getAttribute("data-value").split(",");for(let r=0,u,p;r<a.length;r++){for(u=i,c=!1;u&&!t.isFormatElement(u)&&!t.isComponent(u);){if(u.nodeName.toLowerCase()===o.getAttribute("data-command").toLowerCase()&&(p=a[r],/^\./.test(p)?t.hasClass(u,p.replace(/^\./,"")):u.style[p])){c=!0;break}u=u.parentNode}if(!c)break}c?t.addClass(o,"active"):t.removeClass(o,"active")}},pickup:function(t){t.preventDefault(),t.stopPropagation();let e=t.target,l=null,i=null;for(;!l&&!/UL/i.test(e.tagName);){if(l=e.getAttribute("data-command"),l){i=e.firstChild;break}e=e.parentNode}if(!l)return;let n=i.style.cssText.replace(/:.+(;|$)/g,",").split(",");n.pop();let s=i.classList;for(let c=0,r=s.length;c<r;c++)n.push("."+s[c]);let o=this.util.hasClass(e,"active")?null:i.cloneNode(!1),a=o?null:[i.nodeName];this.nodeChange(o,n,a,!0),this.submenuOff()}};var dt=B(A());var ut={name:"selectMenu",add:function(t){t.context.selectMenu={caller:{},callerContext:null}},setForm:function(){return'<div class="se-select-list"></div>'},createList:function(t,e,l){t.form.innerHTML="<ul>"+l+"</ul>",t.items=e,t.menus=t.form.querySelectorAll("li")},initEvent:function(t,e){let l=e.querySelector(".se-select-list"),i=this.context.selectMenu.caller[t]={form:l,items:[],menus:[],index:-1,item:null,clickMethod:null,callerName:t};l.addEventListener("mousedown",this.plugins.selectMenu.onMousedown_list),l.addEventListener("mousemove",this.plugins.selectMenu.onMouseMove_list.bind(this,i)),l.addEventListener("click",this.plugins.selectMenu.onClick_list.bind(this,i))},onMousedown_list:function(t){t.preventDefault(),t.stopPropagation()},onMouseMove_list:function(t,e){this.util.addClass(t.form,"__se_select-menu-mouse-move");let l=e.target.getAttribute("data-index");l&&(t.index=l*1)},onClick_list:function(t,e){let l=e.target.getAttribute("data-index");l&&t.clickMethod.call(this,t.items[l])},moveItem:function(t,e){this.util.removeClass(t.form,"__se_select-menu-mouse-move"),e=t.index+e;let l=t.menus,i=l.length,n=t.index=e>=i?0:e<0?i-1:e;for(let s=0;s<i;s++)s===n?this.util.addClass(l[s],"active"):this.util.removeClass(l[s],"active");t.item=t.items[n]},getItem:function(t,e){return e=!e||e<0?t.index:e,t.items[e]},on:function(t,e){let l=this.context.selectMenu.caller[t];this.context.selectMenu.callerContext=l,l.clickMethod=e,l.callerName=t},open:function(t,e){let l=t.form;l.style.visibility="hidden",l.style.display="block",e(l),l.style.visibility=""},close:function(t){t.form.style.display="none",t.items=[],t.menus=[],t.index=-1,t.item=null},init:function(t){t&&(t.items=[],t.menus=[],t.index=-1,t.item=null,t.callerName="",this.context.selectMenu.callerContext=null)}};var P={name:"anchor",add:function(t){t.addModule([ut]),t.context.anchor={caller:{},forms:this.setDialogForm(t),host:(t._w.location.origin+t._w.location.pathname).replace(/\/$/,""),callerContext:null}},setDialogForm:function(t){let e=t.lang,l=t.options.linkRel,i=(t.options.linkRelDefault.default||"").split(" "),n=t.icons,s=t.util.createElement("DIV"),o='<div class="se-dialog-body"><div class="se-dialog-form"><label>'+e.dialogBox.linkBox.url+'</label><div class="se-dialog-form-files"><input class="se-input-form se-input-url" type="text" placeholder="'+(t.options.protocol||"")+'" /><button type="button" class="se-btn se-dialog-files-edge-button _se_bookmark_button" title="'+e.dialogBox.linkBox.bookmark+'" aria-label="'+e.dialogBox.linkBox.bookmark+'">'+n.bookmark+"</button>"+t.plugins.selectMenu.setForm()+'</div><div class="se-anchor-preview-form"><span class="se-svg se-anchor-preview-icon _se_anchor_bookmark_icon">'+n.bookmark+'</span><span class="se-svg se-anchor-preview-icon _se_anchor_download_icon">'+n.download+'</span><pre class="se-link-preview"></pre></div></div><div class="se-dialog-form"><label>'+e.dialogBox.linkBox.text+'</label><input class="se-input-form _se_anchor_text" type="text" /></div><div class="se-dialog-form-footer"><label><input type="checkbox" class="se-dialog-btn-check _se_anchor_check" />&nbsp;'+e.dialogBox.linkBox.newWindowCheck+'</label><label><input type="checkbox" class="se-dialog-btn-check _se_anchor_download" />&nbsp;'+e.dialogBox.linkBox.downloadLinkCheck+"</label>";if(l.length>0){o+='<div class="se-anchor-rel"><button type="button" class="se-btn se-btn-select se-anchor-rel-btn">&lt;rel&gt;</button><div class="se-anchor-rel-wrapper"><pre class="se-link-preview se-anchor-rel-preview"></pre></div><div class="se-list-layer"><div class="se-list-inner"><ul class="se-list-basic se-list-checked">';for(let a=0,c=l.length,r;a<c;a++)r=l[a],o+='<li><button type="button" class="se-btn-list'+(i.indexOf(r)>-1?" se-checked":"")+'" data-command="'+r+'" title="'+r+'" aria-label="'+r+'"><span class="se-svg">'+n.checked+"</span>"+r+"</button></li>";o+="</ul></div></div></div>"}return o+="</div></div>",s.innerHTML=o,s},initEvent:function(t,e){let l=this.plugins.anchor,i=this.context.anchor.caller[t]={modal:e,urlInput:null,linkDefaultRel:this.options.linkRelDefault,defaultRel:this.options.linkRelDefault.default||"",currentRel:[],linkAnchor:null,linkValue:"",_change:!1,callerName:t};typeof i.linkDefaultRel.default=="string"&&(i.linkDefaultRel.default=i.linkDefaultRel.default.trim()),typeof i.linkDefaultRel.check_new_window=="string"&&(i.linkDefaultRel.check_new_window=i.linkDefaultRel.check_new_window.trim()),typeof i.linkDefaultRel.check_bookmark=="string"&&(i.linkDefaultRel.check_bookmark=i.linkDefaultRel.check_bookmark.trim()),i.urlInput=e.querySelector(".se-input-url"),i.anchorText=e.querySelector("._se_anchor_text"),i.newWindowCheck=e.querySelector("._se_anchor_check"),i.downloadCheck=e.querySelector("._se_anchor_download"),i.download=e.querySelector("._se_anchor_download_icon"),i.preview=e.querySelector(".se-link-preview"),i.bookmark=e.querySelector("._se_anchor_bookmark_icon"),i.bookmarkButton=e.querySelector("._se_bookmark_button"),this.plugins.selectMenu.initEvent.call(this,t,e);let n=this.context.selectMenu.caller[t];this.options.linkRel.length>0&&(i.relButton=e.querySelector(".se-anchor-rel-btn"),i.relList=e.querySelector(".se-list-layer"),i.relPreview=e.querySelector(".se-anchor-rel-preview"),i.relButton.addEventListener("click",l.onClick_relButton.bind(this,i)),i.relList.addEventListener("click",l.onClick_relList.bind(this,i))),i.newWindowCheck.addEventListener("change",l.onChange_newWindowCheck.bind(this,i)),i.downloadCheck.addEventListener("change",l.onChange_downloadCheck.bind(this,i)),i.anchorText.addEventListener("input",l.onChangeAnchorText.bind(this,i)),i.urlInput.addEventListener("input",l.onChangeUrlInput.bind(this,i)),i.urlInput.addEventListener("keydown",l.onKeyDownUrlInput.bind(this,n)),i.urlInput.addEventListener("focus",l.onFocusUrlInput.bind(this,i,n)),i.urlInput.addEventListener("blur",l.onBlurUrlInput.bind(this,n)),i.bookmarkButton.addEventListener("click",l.onClick_bookmarkButton.bind(this,i))},on:function(t,e){let l=this.plugins.anchor;if(!e)l.init.call(this,t),t.anchorText.value=this.getSelection().toString().trim(),t.newWindowCheck.checked=this.options.linkTargetNewWindow;else if(t.linkAnchor){this.context.dialog.updateModal=!0;let i=t.linkAnchor.getAttribute("href");t.linkValue=t.preview.textContent=t.urlInput.value=l.selfPathBookmark.call(this,i)?i.substr(i.lastIndexOf("#")):i,t.anchorText.value=t.linkAnchor.textContent,t.newWindowCheck.checked=!!/_blank/i.test(t.linkAnchor.target),t.downloadCheck.checked=t.linkAnchor.download}this.context.anchor.callerContext=t,l.setRel.call(this,t,e&&t.linkAnchor?t.linkAnchor.rel:t.defaultRel),l.setLinkPreview.call(this,t,t.linkValue),this.plugins.selectMenu.on.call(this,t.callerName,this.plugins.anchor.setHeaderBookmark)},selfPathBookmark:function(t){let e=this._w.location.href.replace(/\/$/,"");return t.indexOf("#")===0||t.indexOf(e)===0&&t.indexOf("#")===(e.indexOf("#")===-1?e.length:e.substr(0,e.indexOf("#")).length)},_closeRelMenu:null,toggleRelList:function(t,e){if(!e)this.plugins.anchor._closeRelMenu&&this.plugins.anchor._closeRelMenu();else{let l=t.relButton,i=t.relList;this.util.addClass(l,"active"),i.style.visibility="hidden",i.style.display="block",this.options.rtl?i.style.left=l.offsetLeft-i.offsetWidth-1+"px":i.style.left=l.offsetLeft+l.offsetWidth+1+"px",i.style.top=l.offsetTop+l.offsetHeight/2-i.offsetHeight/2+"px",i.style.visibility="",this.plugins.anchor._closeRelMenu=function(n,s,o){o&&(n.relButton.contains(o.target)||n.relList.contains(o.target))||(this.util.removeClass(s,"active"),n.relList.style.display="none",this.modalForm.removeEventListener("click",this.plugins.anchor._closeRelMenu),this.plugins.anchor._closeRelMenu=null)}.bind(this,t,l),this.modalForm.addEventListener("click",this.plugins.anchor._closeRelMenu)}},onClick_relButton:function(t,e){this.plugins.anchor.toggleRelList.call(this,t,!this.util.hasClass(e.target,"active"))},onClick_relList:function(t,e){let l=e.target,i=l.getAttribute("data-command");if(!i)return;let n=t.currentRel,s=this.util.toggleClass(l,"se-checked"),o=n.indexOf(i);s?o===-1&&n.push(i):o>-1&&n.splice(o,1),t.relPreview.title=t.relPreview.textContent=n.join(" ")},setRel:function(t,e){let l=t.relList,i=t.currentRel=e?e.split(" "):[];if(!l)return;let n=l.querySelectorAll("button");for(let s=0,o=n.length,a;s<o;s++)a=n[s].getAttribute("data-command"),i.indexOf(a)>-1?this.util.addClass(n[s],"se-checked"):this.util.removeClass(n[s],"se-checked");t.relPreview.title=t.relPreview.textContent=i.join(" ")},createHeaderList:function(t,e,l){let i=this.util.getListChildren(this.context.element.wysiwyg,function(a){return/h[1-6]/i.test(a.nodeName)});if(i.length===0)return;let n=new this._w.RegExp("^"+l.replace(/^#/,""),"i"),s=[],o="";for(let a=0,c=i.length,r;a<c;a++)r=i[a],n.test(r.textContent)&&(s.push(r),o+='<li class="se-select-item" data-index="'+a+'">'+r.textContent+"</li>");s.length===0?this.plugins.selectMenu.close.call(this,e):(this.plugins.selectMenu.createList(e,s,o),this.plugins.selectMenu.open.call(this,e,this.plugins.anchor._setMenuListPosition.bind(this,t)))},_setMenuListPosition:function(t,e){e.style.top=t.urlInput.offsetHeight+1+"px"},onKeyDownUrlInput:function(t,e){switch(e.keyCode){case 38:e.preventDefault(),e.stopPropagation(),this.plugins.selectMenu.moveItem.call(this,t,-1);break;case 40:e.preventDefault(),e.stopPropagation(),this.plugins.selectMenu.moveItem.call(this,t,1);break;case 13:t.index>-1&&(e.preventDefault(),e.stopPropagation(),this.plugins.anchor.setHeaderBookmark.call(this,this.plugins.selectMenu.getItem(t,null)));break}},setHeaderBookmark:function(t){let e=this.context.anchor.callerContext,l=t.id||"h_"+this._w.Math.random().toString().replace(/.+\./,"");t.id=l,e.urlInput.value="#"+l,(!e.anchorText.value.trim()||!e._change)&&(e.anchorText.value=t.textContent),this.plugins.anchor.setLinkPreview.call(this,e,e.urlInput.value),this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext),this.context.anchor.callerContext.urlInput.focus()},onChangeAnchorText:function(t,e){t._change=!!e.target.value.trim()},onChangeUrlInput:function(t,e){let l=e.target.value.trim();this.plugins.anchor.setLinkPreview.call(this,t,l),this.plugins.anchor.selfPathBookmark.call(this,l)?this.plugins.anchor.createHeaderList.call(this,t,this.context.selectMenu.callerContext,l):this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext)},onFocusUrlInput:function(t,e){let l=t.urlInput.value;this.plugins.anchor.selfPathBookmark.call(this,l)&&this.plugins.anchor.createHeaderList.call(this,t,e,l)},onBlurUrlInput:function(t){this.plugins.selectMenu.close.call(this,t)},setLinkPreview:function(t,e){let l=t.preview,i=this.options.linkProtocol,n=this.options.linkNoPrefix,s=/^(mailto\:|tel\:|sms\:|https*\:\/\/|#)/.test(e)||e.indexOf(i)===0,o=i?this._w.RegExp("^"+this.util.escapeStringRegexp(e.substr(0,i.length))).test(i):!1;e=t.linkValue=l.textContent=e?n?e:i&&!s&&!o?i+e:s?e:/^www\./.test(e)?"http://"+e:this.context.anchor.host+(/^\//.test(e)?"":"/")+e:"",this.plugins.anchor.selfPathBookmark.call(this,e)?(t.bookmark.style.display="block",this.util.addClass(t.bookmarkButton,"active")):(t.bookmark.style.display="none",this.util.removeClass(t.bookmarkButton,"active")),!this.plugins.anchor.selfPathBookmark.call(this,e)&&t.downloadCheck.checked?t.download.style.display="block":t.download.style.display="none"},setCtx:function(t,e){t&&(e.linkAnchor=t,e.linkValue=t.href,e.currentRel=t.rel.split(" "))},updateAnchor:function(t,e,l,i,n){!this.plugins.anchor.selfPathBookmark.call(this,e)&&i.downloadCheck.checked?t.setAttribute("download",l||e):t.removeAttribute("download"),i.newWindowCheck.checked?t.target="_blank":t.removeAttribute("target");let s=i.currentRel.join(" ");s?t.rel=s:t.removeAttribute("rel"),t.href=e,n?t.children.length===0&&(t.textContent=""):t.textContent=l},createAnchor:function(t,e){if(t.linkValue.length===0)return null;let l=t.linkValue,i=t.anchorText,n=i.value.length===0?l:i.value,s=t.linkAnchor||this.util.createElement("A");return this.plugins.anchor.updateAnchor.call(this,s,l,n,t,e),t.linkValue=t.preview.textContent=t.urlInput.value=t.anchorText.value="",s},onClick_bookmarkButton:function(t){let e=t.urlInput.value;this.plugins.anchor.selfPathBookmark.call(this,e)?(e=e.substr(1),t.bookmark.style.display="none",this.util.removeClass(t.bookmarkButton,"active"),this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext)):(e="#"+e,t.bookmark.style.display="block",this.util.addClass(t.bookmarkButton,"active"),t.downloadCheck.checked=!1,t.download.style.display="none",this.plugins.anchor.createHeaderList.call(this,t,this.context.selectMenu.callerContext,e)),t.urlInput.value=e,this.plugins.anchor.setLinkPreview.call(this,t,e),t.urlInput.focus()},onChange_newWindowCheck:function(t,e){typeof t.linkDefaultRel.check_new_window=="string"&&(e.target.checked?this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relMerge.call(this,t,t.linkDefaultRel.check_new_window)):this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relDelete.call(this,t,t.linkDefaultRel.check_new_window)))},onChange_downloadCheck:function(t,e){e.target.checked?(t.download.style.display="block",t.bookmark.style.display="none",this.util.removeClass(t.bookmarkButton,"active"),t.linkValue=t.preview.textContent=t.urlInput.value=t.urlInput.value.replace(/^\#+/,""),typeof t.linkDefaultRel.check_bookmark=="string"&&this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relMerge.call(this,t,t.linkDefaultRel.check_bookmark))):(t.download.style.display="none",typeof t.linkDefaultRel.check_bookmark=="string"&&this.plugins.anchor.setRel.call(this,t,this.plugins.anchor._relDelete.call(this,t,t.linkDefaultRel.check_bookmark)))},_relMerge:function(t,e){let l=t.currentRel;if(!e)return l.join(" ");if(/^only\:/.test(e))return e=e.replace(/^only\:/,"").trim(),t.currentRel=e.split(" "),e;let i=e.split(" ");for(let n=0,s=i.length,o;n<s;n++)o=l.indexOf(i[n]),o===-1&&l.push(i[n]);return l.join(" ")},_relDelete:function(t,e){if(!e)return t.currentRel.join(" ");/^only\:/.test(e)&&(e=e.replace(/^only\:/,"").trim());let l=t.currentRel.join(" ").replace(this._w.RegExp(e+"\\s*"),"");return t.currentRel=l.split(" "),l},init:function(t){t.linkAnchor=null,t.linkValue=t.preview.textContent=t.urlInput.value="",t.anchorText.value="",t.newWindowCheck.checked=!1,t.downloadCheck.checked=!1,t._change=!1,this.plugins.anchor.setRel.call(this,t,t.defaultRel),t.relList&&this.plugins.anchor.toggleRelList.call(this,t,!1),this.context.anchor.callerContext=null,this.plugins.selectMenu.init.call(this,this.context.selectMenu.callerContext)}};var ht={name:"link",display:"dialog",add:function(t){t.addModule([dt.default,P]);let e=t.context,l=e.link={focusElement:null,_linkAnchor:null,anchorCtx:null},i=this.setDialog(t);l.modal=i;let n=this.setController_LinkButton(t);l.linkController=n,i.querySelector("form").addEventListener("submit",this.submit.bind(t)),n.addEventListener("click",this.onClick_linkController.bind(t)),e.dialog.modal.appendChild(i),e.element.relative.appendChild(n),t.plugins.anchor.initEvent.call(t,"link",i),l.focusElement=e.anchor.caller.link.urlInput,i=null,n=null},setDialog:function(t){let e=t.lang,l=t.util.createElement("DIV"),i=t.icons;l.className="se-dialog-content",l.style.display="none";let n='<form><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="'+e.dialogBox.close+'" aria-label="'+e.dialogBox.close+'">'+i.cancel+'</button><span class="se-modal-title">'+e.dialogBox.linkBox.title+"</span></div>"+t.context.anchor.forms.innerHTML+'<div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="'+e.dialogBox.submitButton+'" aria-label="'+e.dialogBox.submitButton+'"><span>'+e.dialogBox.submitButton+"</span></button></div></form>";return l.innerHTML=n,l},setController_LinkButton:function(t){let e=t.lang,l=t.icons,i=t.util.createElement("DIV");return i.className="se-controller se-controller-link",i.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="link-content"><span><a target="_blank" href=""></a>&nbsp;</span><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-btn se-tooltip">'+l.edit+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="unlink" tabindex="-1" class="se-btn se-tooltip">'+l.unlink+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.unlink+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-btn se-tooltip">'+l.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",i},open:function(){this.plugins.dialog.open.call(this,"link",this.currentControllerName==="link")},submit:function(t){this.showLoading(),t.preventDefault(),t.stopPropagation();try{let e=this.plugins.anchor.createAnchor.call(this,this.context.anchor.caller.link,!1);if(e===null)return;if(this.context.dialog.updateModal){let l=this.context.link._linkAnchor.childNodes[0];this.setRange(l,0,l,l.textContent.length)}else{let l=this.getSelectedElements();if(l.length>1){let i=this.util.createElement(l[0].nodeName);if(i.appendChild(e),!this.insertNode(i,null,!0))return}else if(!this.insertNode(e,null,!0))return;this.setRange(e.childNodes[0],0,e.childNodes[0],e.textContent.length)}}finally{this.plugins.dialog.close.call(this),this.closeLoading(),this.history.push(!1)}return!1},active:function(t){if(!t)this.controllerArray.indexOf(this.context.link.linkController)>-1&&this.controllersOff();else if(this.util.isAnchor(t)&&t.getAttribute("data-image-link")===null)return this.controllerArray.indexOf(this.context.link.linkController)<0&&this.plugins.link.call_controller.call(this,t),!0;return!1},on:function(t){this.plugins.anchor.on.call(this,this.context.anchor.caller.link,t)},call_controller:function(t){this.editLink=this.context.link._linkAnchor=this.context.anchor.caller.link.linkAnchor=t;let e=this.context.link.linkController,l=e.querySelector("a");l.href=t.href,l.title=t.textContent,l.textContent=t.textContent,this.util.addClass(t,"on"),this.setControllerPosition(e,t,"bottom",{left:0,top:0}),this.controllersOn(e,t,"link",this.util.removeClass.bind(this.util,this.context.link._linkAnchor,"on"))},onClick_linkController:function(t){t.stopPropagation();let e=t.target.getAttribute("data-command")||t.target.parentNode.getAttribute("data-command");if(e){if(t.preventDefault(),/update/.test(e))this.plugins.dialog.open.call(this,"link",!0);else if(/unlink/.test(e)){let l=this.util.getChildElement(this.context.link._linkAnchor,function(n){return n.childNodes.length===0||n.nodeType===3},!1),i=this.util.getChildElement(this.context.link._linkAnchor,function(n){return n.childNodes.length===0||n.nodeType===3},!0);this.setRange(l,0,i,i.textContent.length),this.nodeChange(null,null,["A"],!1)}else this.util.removeItem(this.context.link._linkAnchor),this.context.anchor.caller.link.linkAnchor=null,this.focus(),this.history.push(!1);this.controllersOff()}},init:function(){this.context.link.linkController.style.display="none",this.plugins.anchor.init.call(this,this.context.anchor.caller.link)}};var mt=B(A());var _t=B(q()),bt=B(j()),vt=B(Y()),yt={name:"image",display:"dialog",add:function(t){t.addModule([mt.default,P,_t.default,bt.default,vt.default]);let e=t.options,l=t.context,i=l.image={_infoList:[],_infoIndex:0,_uploadFileLength:0,focusElement:null,sizeUnit:e._imageSizeUnit,_linkElement:"",_altText:"",_align:"none",_floatClassRegExp:"__se__float\\-[a-z]+",_v_src:{_linkValue:""},svgDefaultSize:"30%",base64RenderIndex:0,_element:null,_cover:null,_container:null,inputX:null,inputY:null,_element_w:1,_element_h:1,_element_l:0,_element_t:0,_defaultSizeX:"auto",_defaultSizeY:"auto",_origin_w:e.imageWidth==="auto"?"":e.imageWidth,_origin_h:e.imageHeight==="auto"?"":e.imageHeight,_proportionChecked:!0,_resizing:e.imageResizing,_resizeDotHide:!e.imageHeightShow,_rotation:e.imageRotation,_alignHide:!e.imageAlignShow,_onlyPercentage:e.imageSizeOnlyPercentage,_ratio:!1,_ratioX:1,_ratioY:1,_captionShow:!0,_captionChecked:!1,_caption:null,captionCheckEl:null},n=this.setDialog(t);i.modal=n,i.imgInputFile=n.querySelector("._se_image_file"),i.imgUrlFile=n.querySelector("._se_image_url"),i.focusElement=i.imgInputFile||i.imgUrlFile,i.altText=n.querySelector("._se_image_alt"),i.captionCheckEl=n.querySelector("._se_image_check_caption"),i.previewSrc=n.querySelector("._se_tab_content_image .se-link-preview"),n.querySelector(".se-dialog-tabs").addEventListener("click",this.openTab.bind(t)),n.querySelector("form").addEventListener("submit",this.submit.bind(t)),i.imgInputFile&&n.querySelector(".se-file-remove").addEventListener("click",this._removeSelectedFiles.bind(i.imgInputFile,i.imgUrlFile,i.previewSrc)),i.imgUrlFile&&i.imgUrlFile.addEventListener("input",this._onLinkPreview.bind(i.previewSrc,i._v_src,e.linkProtocol)),i.imgInputFile&&i.imgUrlFile&&i.imgInputFile.addEventListener("change",this._fileInputChange.bind(i));let s=n.querySelector(".__se__gallery");s&&s.addEventListener("click",this._openGallery.bind(t)),i.proportion={},i.inputX={},i.inputY={},e.imageResizing&&(i.proportion=n.querySelector("._se_image_check_proportion"),i.inputX=n.querySelector("._se_image_size_x"),i.inputY=n.querySelector("._se_image_size_y"),i.inputX.value=e.imageWidth,i.inputY.value=e.imageHeight,i.inputX.addEventListener("keyup",this.setInputSize.bind(t,"x")),i.inputY.addEventListener("keyup",this.setInputSize.bind(t,"y")),i.inputX.addEventListener("change",this.setRatio.bind(t)),i.inputY.addEventListener("change",this.setRatio.bind(t)),i.proportion.addEventListener("change",this.setRatio.bind(t)),n.querySelector(".se-dialog-btn-revert").addEventListener("click",this.sizeRevert.bind(t))),l.dialog.modal.appendChild(n),t.plugins.anchor.initEvent.call(t,"image",n.querySelector("._se_tab_content_url")),i.anchorCtx=t.context.anchor.caller.image,n=null},setDialog:function(t){let e=t.options,l=t.lang,i=t.util.createElement("DIV");i.className="se-dialog-content se-dialog-image",i.style.display="none";let n='<div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" class="close" title="'+l.dialogBox.close+'" aria-label="'+l.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+l.dialogBox.imageBox.title+'</span></div><div class="se-dialog-tabs"><button type="button" class="_se_tab_link active" data-tab-link="image">'+l.toolbar.image+'</button><button type="button" class="_se_tab_link" data-tab-link="url">'+l.toolbar.link+'</button></div><form method="post" enctype="multipart/form-data"><div class="_se_tab_content _se_tab_content_image"><div class="se-dialog-body"><div style="border-bottom: 1px dashed #ccc;">';if(e.imageFileInput&&(n+='<div class="se-dialog-form"><label>'+l.dialogBox.imageBox.file+'</label><div class="se-dialog-form-files"><input class="se-input-form _se_image_file" type="file" accept="'+e.imageAccept+'"'+(e.imageMultipleFile?' multiple="multiple"':"")+'/><button type="button" class="se-btn se-dialog-files-edge-button se-file-remove" title="'+l.controller.remove+'" aria-label="'+l.controller.remove+'">'+t.icons.cancel+"</button></div></div>"),e.imageUrlInput&&(n+='<div class="se-dialog-form"><label>'+l.dialogBox.imageBox.url+'</label><div class="se-dialog-form-files"><input class="se-input-form se-input-url _se_image_url" type="text" />'+(e.imageGalleryUrl&&t.plugins.imageGallery?'<button type="button" class="se-btn se-dialog-files-edge-button __se__gallery" title="'+l.toolbar.imageGallery+'" aria-label="'+l.toolbar.imageGallery+'">'+t.icons.image_gallery+"</button>":"")+'</div><pre class="se-link-preview"></pre></div>'),n+='</div><div class="se-dialog-form"><label>'+l.dialogBox.imageBox.altText+'</label><input class="se-input-form _se_image_alt" type="text" /></div>',e.imageResizing){let s=e.imageSizeOnlyPercentage,o=s?' style="display: none !important;"':"",a=e.imageHeightShow?"":' style="display: none !important;"';n+='<div class="se-dialog-form">',s||!e.imageHeightShow?n+='<div class="se-dialog-size-text"><label class="size-w">'+l.dialogBox.size+"</label></div>":n+='<div class="se-dialog-size-text"><label class="size-w">'+l.dialogBox.width+'</label><label class="se-dialog-size-x">&nbsp;</label><label class="size-h">'+l.dialogBox.height+"</label></div>",n+='<input class="se-input-control _se_image_size_x" placeholder="auto"'+(s?' type="number" min="1"':'type="text"')+(s?' max="100"':"")+' /><label class="se-dialog-size-x"'+a+">"+(s?"%":"x")+'</label><input type="text" class="se-input-control _se_image_size_y" placeholder="auto"'+o+(s?' max="100"':"")+a+"/><label"+o+a+'><input type="checkbox" class="se-dialog-btn-check _se_image_check_proportion" checked/>&nbsp;'+l.dialogBox.proportion+'</label><button type="button" title="'+l.dialogBox.revertButton+'" aria-label="'+l.dialogBox.revertButton+'" class="se-btn se-dialog-btn-revert" style="float: right;">'+t.icons.revert+"</button></div>"}return n+='<div class="se-dialog-form se-dialog-form-footer"><label><input type="checkbox" class="se-dialog-btn-check _se_image_check_caption" />&nbsp;'+l.dialogBox.caption+'</label></div></div></div><div class="_se_tab_content _se_tab_content_url" style="display: none">'+t.context.anchor.forms.innerHTML+'</div><div class="se-dialog-footer"><div'+(e.imageAlignShow?"":' style="display: none"')+'><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="none" checked>'+l.dialogBox.basic+'</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="left">'+l.dialogBox.left+'</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="center">'+l.dialogBox.center+'</label><label><input type="radio" name="suneditor_image_radio" class="se-dialog-btn-radio" value="right">'+l.dialogBox.right+'</label></div><button type="submit" class="se-btn-primary" title="'+l.dialogBox.submitButton+'" aria-label="'+l.dialogBox.submitButton+'"><span>'+l.dialogBox.submitButton+"</span></button></div></form>",i.innerHTML=n,i},_fileInputChange:function(){this.imgInputFile.value?(this.imgUrlFile.setAttribute("disabled",!0),this.previewSrc.style.textDecoration="line-through"):(this.imgUrlFile.removeAttribute("disabled"),this.previewSrc.style.textDecoration="")},_removeSelectedFiles:function(t,e){this.value="",t&&(t.removeAttribute("disabled"),e.style.textDecoration="")},_openGallery:function(){this.callPlugin("imageGallery",this.plugins.imageGallery.open.bind(this,this.plugins.image._setUrlInput.bind(this.context.image)),null)},_setUrlInput:function(t){this.altText.value=t.alt,this._v_src._linkValue=this.previewSrc.textContent=this.imgUrlFile.value=t.getAttribute("data-value")||t.src,this.imgUrlFile.focus()},_onLinkPreview:function(t,e,l){let i=l.target.value.trim();t._linkValue=this.textContent=i?e&&i.indexOf("://")===-1&&i.indexOf("#")!==0?e+i:i.indexOf("://")===-1?"/"+i:i:""},fileTags:["img"],select:function(t){this.plugins.image.onModifyMode.call(this,t,this.plugins.resizing.call_controller_resize.call(this,t,"image"))},destroy:function(t){let e=t||this.context.image._element,l=this.util.getParentElement(e,this.util.isMediaComponent)||e,i=e.getAttribute("data-index")*1;if(typeof this.functions.onImageDeleteBefore=="function"&&this.functions.onImageDeleteBefore(e,l,i,this)===!1)return;let n=l.previousElementSibling||l.nextElementSibling,s=l.parentNode;this.util.removeItem(l),this.plugins.image.init.call(this),this.controllersOff(),s!==this.context.element.wysiwyg&&this.util.removeItemAllParents(s,function(o){return o.childNodes.length===0},null),this.focusEdge(n),this.plugins.fileManager.deleteInfo.call(this,"image",i,this.functions.onImageUpload),this.history.push(!1)},on:function(t){let e=this.context.image;t?e.imgInputFile&&this.options.imageMultipleFile&&e.imgInputFile.removeAttribute("multiple"):(e.inputX.value=e._origin_w=this.options.imageWidth===e._defaultSizeX?"":this.options.imageWidth,e.inputY.value=e._origin_h=this.options.imageHeight===e._defaultSizeY?"":this.options.imageHeight,e.imgInputFile&&this.options.imageMultipleFile&&e.imgInputFile.setAttribute("multiple","multiple")),this.plugins.anchor.on.call(this,e.anchorCtx,t)},open:function(){this.plugins.dialog.open.call(this,"image",this.currentControllerName==="image")},openTab:function(t){let e=this.context.image.modal,l=t==="init"?e.querySelector("._se_tab_link"):t.target;if(!/^BUTTON$/i.test(l.tagName))return!1;let i=l.getAttribute("data-tab-link"),n="_se_tab_content",s,o,a;for(o=e.getElementsByClassName(n),s=0;s<o.length;s++)o[s].style.display="none";for(a=e.getElementsByClassName("_se_tab_link"),s=0;s<a.length;s++)this.util.removeClass(a[s],"active");return e.querySelector("."+n+"_"+i).style.display="block",this.util.addClass(l,"active"),i==="image"&&this.context.image.focusElement?this.context.image.focusElement.focus():i==="url"&&this.context.anchor.caller.image.urlInput.focus(),!1},submit:function(t){let e=this.context.image,l=this.plugins.image;t.preventDefault(),t.stopPropagation(),e._altText=e.altText.value,e._align=e.modal.querySelector('input[name="suneditor_image_radio"]:checked').value,e._captionChecked=e.captionCheckEl.checked,e._resizing&&(e._proportionChecked=e.proportion.checked);try{this.context.dialog.updateModal&&l.update_image.call(this,!1,!0,!1),e.imgInputFile&&e.imgInputFile.files.length>0?(this.showLoading(),l.submitAction.call(this,this.context.image.imgInputFile.files)):e.imgUrlFile&&e._v_src._linkValue.length>0&&(this.showLoading(),l.onRender_imgUrl.call(this,e._v_src._linkValue))}catch(i){throw this.closeLoading(),Error('[SUNEDITOR.image.submit.fail] cause : "'+i.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(t){if(t.length===0)return;let e=0,l=[];for(let a=0,c=t.length;a<c;a++)/image/i.test(t[a].type)&&(l.push(t[a]),e+=t[a].size);let i=this.options.imageUploadSizeLimit;if(i>0){let a=0,c=this.context.image._infoList;for(let r=0,u=c.length;r<u;r++)a+=c[r].size*1;if(e+a>i){this.closeLoading();let r="[SUNEDITOR.imageUpload.fail] Size of uploadable total images: "+i/1e3+"KB";(typeof this.functions.onImageUploadError!="function"||this.functions.onImageUploadError(r,{limitSize:i,currentSize:a,uploadSize:e},this))&&this.functions.noticeOpen(r);return}}let n=this.context.image;n._uploadFileLength=l.length;let o={anchor:this.plugins.anchor.createAnchor.call(this,n.anchorCtx,!0),inputWidth:n.inputX.value,inputHeight:n.inputY.value,align:n._align,isUpdate:this.context.dialog.updateModal,alt:n._altText,element:n._element};if(typeof this.functions.onImageUploadBefore=="function"){let a=this.functions.onImageUploadBefore(l,o,this,function(c){c&&this._w.Array.isArray(c.result)?this.plugins.image.register.call(this,o,c):this.plugins.image.upload.call(this,o,c)}.bind(this));if(typeof a>"u")return;if(!a){this.closeLoading();return}this._w.Array.isArray(a)&&a.length>0&&(l=a)}this.plugins.image.upload.call(this,o,l)},error:function(t,e){if(this.closeLoading(),typeof this.functions.onImageUploadError!="function"||this.functions.onImageUploadError(t,e,this))throw this.functions.noticeOpen(t),Error("[SUNEDITOR.plugin.image.error] response: "+t)},upload:function(t,e){if(!e){this.closeLoading();return}if(typeof e=="string"){this.plugins.image.error.call(this,e,null);return}let l=this.options.imageUploadUrl,i=this.context.dialog.updateModal?1:e.length;if(typeof l=="string"&&l.length>0){let n=new FormData;for(let s=0;s<i;s++)n.append("file-"+s,e[s]);this.plugins.fileManager.upload.call(this,l,this.options.imageUploadHeader,n,this.plugins.image.callBack_imgUpload.bind(this,t),this.functions.onImageUploadError)}else this.plugins.image.setup_reader.call(this,e,t.anchor,t.inputWidth,t.inputHeight,t.align,t.alt,i,t.isUpdate)},callBack_imgUpload:function(t,e){if(typeof this.functions.imageUploadHandler=="function")this.functions.imageUploadHandler(e,t,this);else{let l=JSON.parse(e.responseText);l.errorMessage?this.plugins.image.error.call(this,l.errorMessage,l):this.plugins.image.register.call(this,t,l)}},register:function(t,e){let l=e.result;for(let i=0,n=l.length,s;i<n;i++)if(s={name:l[i].name,size:l[i].size},t.isUpdate){this.plugins.image.update_src.call(this,l[i].url,t.element,s);break}else this.plugins.image.create_image.call(this,l[i].url,t.anchor,t.inputWidth,t.inputHeight,t.align,s,t.alt);this.closeLoading()},setup_reader:function(t,e,l,i,n,s,o,a){try{if(o===0){this.closeLoading(),console.warn("[SUNEDITOR.image.base64.fail] cause : No applicable files");return}this.context.image.base64RenderIndex=o;let c=this._w.FileReader,r=[o];this.context.image.inputX.value=l,this.context.image.inputY.value=i;for(let u=0,p,f;u<o;u++)p=new c,f=t[u],p.onload=function(_,h,g,d,m){r[m]={result:_.result,file:d},--this.context.image.base64RenderIndex===0&&(this.plugins.image.onRender_imgBase64.call(this,h,r,g,e,l,i,n,s),this.closeLoading())}.bind(this,p,a,this.context.image._element,f,u),p.readAsDataURL(f)}catch(c){throw this.closeLoading(),Error('[SUNEDITOR.image.setup_reader.fail] cause : "'+c.message+'"')}},onRender_imgBase64:function(t,e,l,i,n,s,o,a){let c=this.plugins.image.update_src,r=this.plugins.image.create_image;for(let u=0,p=e.length;u<p;u++)t?(this.context.image._element.setAttribute("data-file-name",e[u].file.name),this.context.image._element.setAttribute("data-file-size",e[u].file.size),c.call(this,e[u].result,l,e[u].file)):r.call(this,e[u].result,i,n,s,o,e[u].file,a)},onRender_imgUrl:function(t){if(t||(t=this.context.image._v_src._linkValue),!t)return!1;let e=this.context.image;try{let l={name:t.split("/").pop(),size:0};this.context.dialog.updateModal?this.plugins.image.update_src.call(this,t,e._element,l):this.plugins.image.create_image.call(this,t,this.plugins.anchor.createAnchor.call(this,e.anchorCtx,!0),e.inputX.value,e.inputY.value,e._align,l,e._altText)}catch(l){throw Error('[SUNEDITOR.image.URLRendering.fail] cause : "'+l.message+'"')}finally{this.closeLoading()}},onRender_link:function(t,e){return e?(e.setAttribute("data-image-link","image"),t.setAttribute("data-image-link",e.href),e.appendChild(t),e):t},setInputSize:function(t,e){if(e&&e.keyCode===32){e.preventDefault();return}this.plugins.resizing._module_setInputSize.call(this,this.context.image,t)},setRatio:function(){this.plugins.resizing._module_setRatio.call(this,this.context.image)},checkFileInfo:function(){let t=this.plugins.image,e=this.context.image,l=function(i){t.onModifyMode.call(this,i,null),t.openModify.call(this,!0),e.inputX.value=e._origin_w,e.inputY.value=e._origin_h;let n=this.util.getFormatElement(i);n&&(e._align=n.style.textAlign||n.style.float),this.util.isAnchor(i.parentNode)&&!e.anchorCtx.linkValue&&(e.anchorCtx.linkValue=" "),t.update_image.call(this,!0,!1,!0),t.init.call(this)}.bind(this);this.plugins.fileManager.checkInfo.call(this,"image",["img"],this.functions.onImageUpload,l,!0)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"image",this.functions.onImageUpload)},create_image:function(t,e,l,i,n,s,o){let a=this.plugins.image,c=this.context.image;this.context.resizing._resize_plugin="image";let r=this.util.createElement("IMG");r.src=t,r.alt=o,r.setAttribute("data-rotate","0"),e=a.onRender_link.call(this,r,e?e.cloneNode(!1):null),c._resizing&&r.setAttribute("data-proportion",c._proportionChecked);let u=this.plugins.component.set_cover.call(this,e),p=this.plugins.component.set_container.call(this,u,"se-image-container");c._captionChecked&&(c._caption=this.plugins.component.create_caption.call(this),u.appendChild(c._caption)),c._element=r,c._cover=u,c._container=p,a.applySize.call(this,l,i),a.setAlign.call(this,n,r,u,p),r.onload=a._image_create_onload.bind(this,r,c.svgDefaultSize,p),this.insertComponent(p,!0,!0,!0)&&this.plugins.fileManager.setInfo.call(this,"image",r,this.functions.onImageUpload,s,!0),this.context.resizing._resize_plugin=""},_image_create_onload:function(t,e,l){if(t.offsetWidth===0&&this.plugins.image.applySize.call(this,e,""),this.options.mediaAutoSelect)this.selectComponent(t,"image");else{let i=this.appendFormatTag(l,null);i&&this.setRange(i,0,i,0)}},update_image:function(t,e,l){let i=this.context.image,n=i._element,s=i._cover,o=i._container,a=!1;s===null&&(a=!0,n=i._element.cloneNode(!0),s=this.plugins.component.set_cover.call(this,n)),o===null?(s=s.cloneNode(!0),n=s.querySelector("img"),a=!0,o=this.plugins.component.set_container.call(this,s,"se-image-container")):a&&(o.innerHTML="",o.appendChild(s),i._cover=s,i._element=n,a=!1);let c,r=this.util.isNumber(i.inputX.value)?i.inputX.value+i.sizeUnit:i.inputX.value,u=this.util.isNumber(i.inputY.value)?i.inputY.value+i.sizeUnit:i.inputY.value;/%$/.test(n.style.width)?c=r!==o.style.width||u!==o.style.height:c=r!==n.style.width||u!==n.style.height,n.alt=i._altText;let p=!1;i._captionChecked?i._caption||(i._caption=this.plugins.component.create_caption.call(this),s.appendChild(i._caption),p=!0):i._caption&&(this.util.removeItem(i._caption),i._caption=null,p=!0);let f=null,_=this.plugins.anchor.createAnchor.call(this,i.anchorCtx,!0);if(_)i._linkElement!==_||a&&!o.contains(_)?(i._linkElement=_.cloneNode(!1),s.insertBefore(this.plugins.image.onRender_link.call(this,n,i._linkElement),i._caption),f=i._element):i._linkElement.setAttribute("data-image-link","image");else if(i._linkElement!==null){let g=n;if(g.setAttribute("data-image-link",""),s.contains(i._linkElement)){let d=g.cloneNode(!0);s.removeChild(i._linkElement),s.insertBefore(d,i._caption),i._element=n=d}}let h=null;if(a){if(h=this.util.isRangeFormatElement(i._element.parentNode)||this.util.isWysiwygDiv(i._element.parentNode)?i._element:this.util.isAnchor(i._element.parentNode)?i._element.parentNode:this.util.getFormatElement(i._element)||i._element,this.util.getParentElement(i._element,this.util.isNotCheckingNode))h=f?_:i._element,h.parentNode.replaceChild(o,h);else if(this.util.isListCell(h)){let g=this.util.getParentElement(i._element,function(d){return d.parentNode===h});h.insertBefore(o,g),this.util.removeItem(i._element),this.util.removeEmptyNode(g,null,!0)}else if(this.util.isFormatElement(h)){let g=this.util.getParentElement(i._element,function(d){return d.parentNode===h});h=this.util.splitElement(h,g),h.parentNode.insertBefore(o,h),this.util.removeItem(i._element),this.util.removeEmptyNode(h,null,!0),h.children.length===0&&(h.innerHTML=this.util.htmlRemoveWhiteSpace(h.innerHTML))}else if(this.util.isFormatElement(h.parentNode)){let g=h.parentNode;g.parentNode.insertBefore(o,h.previousSibling?g.nextElementSibling:g),i.__updateTags.map(function(d){return h.contains(d)}).length===0&&this.util.removeItem(h)}else h=this.util.isFigures(h.parentNode)?h.parentNode:h,h.parentNode.replaceChild(o,h);n=o.querySelector("img"),i._element=n,i._cover=s,i._container=o}f&&(a?(this.util.removeItem(f),this.util.getListChildren(_,function(g){return/IMG/i.test(g.tagName)}).length===0&&this.util.removeItem(_)):this.util.removeItem(_)),(p||!i._onlyPercentage&&c)&&!t&&(/\d+/.test(n.style.height)||this.context.resizing._rotateVertical&&i._captionChecked)&&(/%$/.test(i.inputX.value)||/%$/.test(i.inputY.value)?this.plugins.resizing.resetTransform.call(this,n):this.plugins.resizing.setTransformSize.call(this,n,this.util.getNumber(i.inputX.value,0),this.util.getNumber(i.inputY.value,0))),i._resizing&&(n.setAttribute("data-proportion",i._proportionChecked),c&&this.plugins.image.applySize.call(this)),this.plugins.image.setAlign.call(this,null,n,null,null),t&&this.plugins.fileManager.setInfo.call(this,"image",n,this.functions.onImageUpload,null,!0),e&&this.selectComponent(n,"image"),l||this.history.push(!1)},update_src:function(t,e,l){e.src=t,this._w.setTimeout(this.plugins.fileManager.setInfo.bind(this,"image",e,this.functions.onImageUpload,l,!0)),this.selectComponent(e,"image")},onModifyMode:function(t,e){if(!t)return;let l=this.context.image;l._linkElement=l.anchorCtx.linkAnchor=this.util.isAnchor(t.parentNode)?t.parentNode:null,l._element=t,l._cover=this.util.getParentElement(t,"FIGURE"),l._container=this.util.getParentElement(t,this.util.isMediaComponent),l._caption=this.util.getChildElement(l._cover,"FIGCAPTION"),l._align=t.getAttribute("data-align")||t.style.float||"none",t.style.float="",this.plugins.anchor.setCtx(l._linkElement,l.anchorCtx),e&&(l._element_w=e.w,l._element_h=e.h,l._element_t=e.t,l._element_l=e.l);let i=l._element.getAttribute("data-size")||l._element.getAttribute("data-origin"),n,s;i?(i=i.split(","),n=i[0],s=i[1]):e&&(n=e.w,s=e.h),l._origin_w=n||t.style.width||t.width||"",l._origin_h=s||t.style.height||t.height||""},openModify:function(t){let e=this.context.image;e.imgUrlFile&&(e._v_src._linkValue=e.previewSrc.textContent=e.imgUrlFile.value=e._element.src),e._altText=e.altText.value=e._element.alt,(e.modal.querySelector('input[name="suneditor_image_radio"][value="'+e._align+'"]')||e.modal.querySelector('input[name="suneditor_image_radio"][value="none"]')).checked=!0,e._align=e.modal.querySelector('input[name="suneditor_image_radio"]:checked').value,e._captionChecked=e.captionCheckEl.checked=!!e._caption,e._resizing&&this.plugins.resizing._module_setModifyInputSize.call(this,e,this.plugins.image),t||this.plugins.dialog.open.call(this,"image",!0)},applySize:function(t,e){let l=this.context.image;return t||(t=l.inputX.value||this.options.imageWidth),e||(e=l.inputY.value||this.options.imageHeight),l._onlyPercentage&&t||/%$/.test(t)?(this.plugins.image.setPercentSize.call(this,t,e),!0):((!t||t==="auto")&&(!e||e==="auto")?this.plugins.image.setAutoSize.call(this):this.plugins.image.setSize.call(this,t,e,!1),!1)},sizeRevert:function(){this.plugins.resizing._module_sizeRevert.call(this,this.context.image)},setSize:function(t,e,l,i){let n=this.context.image,s=/^(rw|lw)$/.test(i)&&/\d+/.test(n._element.style.height);/^(th|bh)$/.test(i)&&/\d+/.test(n._element.style.width)||(n._element.style.width=this.util.isNumber(t)?t+n.sizeUnit:t,this.plugins.image.cancelPercentAttr.call(this)),s||(n._element.style.height=this.util.isNumber(e)?e+n.sizeUnit:/%$/.test(e)?"":e),n._align==="center"&&this.plugins.image.setAlign.call(this,null,null,null,null),l||n._element.removeAttribute("data-percentage"),this.plugins.resizing._module_saveCurrentSize.call(this,n)},setAutoSize:function(){let t=this.context.image;t._caption&&(t._caption.style.marginTop=""),this.plugins.resizing.resetTransform.call(this,t._element),this.plugins.image.cancelPercentAttr.call(this),t._element.style.maxWidth="",t._element.style.width="",t._element.style.height="",t._cover.style.width="",t._cover.style.height="",this.plugins.image.setAlign.call(this,null,null,null,null),t._element.setAttribute("data-percentage","auto,auto"),this.plugins.resizing._module_saveCurrentSize.call(this,t)},setOriginSize:function(){let t=this.context.image;t._element.removeAttribute("data-percentage"),this.plugins.resizing.resetTransform.call(this,t._element),this.plugins.image.cancelPercentAttr.call(this);let e=(t._element.getAttribute("data-origin")||"").split(","),l=e[0],i=e[1];e&&(t._onlyPercentage||/%$/.test(l)&&(/%$/.test(i)||!/\d/.test(i))?this.plugins.image.setPercentSize.call(this,l,i):this.plugins.image.setSize.call(this,l,i),this.plugins.resizing._module_saveCurrentSize.call(this,t))},setPercentSize:function(t,e){let l=this.context.image;e=e&&!/%$/.test(e)&&!this.util.getNumber(e,0)?this.util.isNumber(e)?e+"%":e:this.util.isNumber(e)?e+l.sizeUnit:e||"";let i=/%$/.test(e);l._container.style.width=this.util.isNumber(t)?t+"%":t,l._container.style.height="",l._cover.style.width="100%",l._cover.style.height=i?e:"",l._element.style.width="100%",l._element.style.height=i?"":e,l._element.style.maxWidth="",l._align==="center"&&this.plugins.image.setAlign.call(this,null,null,null,null),l._element.setAttribute("data-percentage",t+","+e),this.plugins.resizing.setCaptionPosition.call(this,l._element),this.plugins.resizing._module_saveCurrentSize.call(this,l)},cancelPercentAttr:function(){let t=this.context.image;t._cover.style.width="",t._cover.style.height="",t._container.style.width="",t._container.style.height="",this.util.removeClass(t._container,this.context.image._floatClassRegExp),this.util.addClass(t._container,"__se__float-"+t._align),t._align==="center"&&this.plugins.image.setAlign.call(this,null,null,null,null)},setAlign:function(t,e,l,i){let n=this.context.image;t||(t=n._align),e||(e=n._element),l||(l=n._cover),i||(i=n._container),/%$/.test(e.style.width)&&t==="center"?(i.style.minWidth="100%",l.style.width=i.style.width):(i.style.minWidth="",l.style.width=this.context.resizing._rotateVertical?e.style.height||e.offsetHeight:!e.style.width||e.style.width==="auto"?"":e.style.width||"100%"),this.util.hasClass(i,"__se__float-"+t)||(this.util.removeClass(i,n._floatClassRegExp),this.util.addClass(i,"__se__float-"+t)),e.setAttribute("data-align",t)},init:function(){let t=this.context.image;t.imgInputFile&&(t.imgInputFile.value=""),t.imgUrlFile&&(t._v_src._linkValue=t.previewSrc.textContent=t.imgUrlFile.value=""),t.imgInputFile&&t.imgUrlFile&&(t.imgUrlFile.removeAttribute("disabled"),t.previewSrc.style.textDecoration=""),t.altText.value="",t.modal.querySelector('input[name="suneditor_image_radio"][value="none"]').checked=!0,t.captionCheckEl.checked=!1,t._element=null,this.plugins.image.openTab.call(this,"init"),t._resizing&&(t.inputX.value=this.options.imageWidth===t._defaultSizeX?"":this.options.imageWidth,t.inputY.value=this.options.imageHeight===t._defaultSizeY?"":this.options.imageHeight,t.proportion.checked=!0,t._ratio=!1,t._ratioX=1,t._ratioY=1),this.plugins.anchor.init.call(this,t.anchorCtx)}};var xt=B(A()),Ct=B(q()),wt=B(j()),St=B(Y()),kt={name:"video",display:"dialog",add:function(t){t.addModule([xt.default,Ct.default,wt.default,St.default]);let e=t.options,l=t.context,i=l.video={_infoList:[],_infoIndex:0,_uploadFileLength:0,focusElement:null,sizeUnit:e._videoSizeUnit,_align:"none",_floatClassRegExp:"__se__float\\-[a-z]+",_youtubeQuery:e.youtubeQuery,_vimeoQuery:e.vimeoQuery,_videoRatio:e.videoRatio*100+"%",_defaultRatio:e.videoRatio*100+"%",_linkValue:"",_element:null,_cover:null,_container:null,inputX:null,inputY:null,_element_w:1,_element_h:1,_element_l:0,_element_t:0,_defaultSizeX:"100%",_defaultSizeY:e.videoRatio*100+"%",_origin_w:e.videoWidth==="100%"?"":e.videoWidth,_origin_h:e.videoHeight==="56.25%"?"":e.videoHeight,_proportionChecked:!0,_resizing:e.videoResizing,_resizeDotHide:!e.videoHeightShow,_rotation:e.videoRotation,_alignHide:!e.videoAlignShow,_onlyPercentage:e.videoSizeOnlyPercentage,_ratio:!1,_ratioX:1,_ratioY:1,_captionShow:!1},n=this.setDialog(t);i.modal=n,i.videoInputFile=n.querySelector("._se_video_file"),i.videoUrlFile=n.querySelector(".se-input-url"),i.focusElement=i.videoUrlFile||i.videoInputFile,i.preview=n.querySelector(".se-link-preview"),n.querySelector("form").addEventListener("submit",this.submit.bind(t)),i.videoInputFile&&n.querySelector(".se-dialog-files-edge-button").addEventListener("click",this._removeSelectedFiles.bind(i.videoInputFile,i.videoUrlFile,i.preview)),i.videoInputFile&&i.videoUrlFile&&i.videoInputFile.addEventListener("change",this._fileInputChange.bind(i)),i.videoUrlFile&&i.videoUrlFile.addEventListener("input",this._onLinkPreview.bind(i.preview,i,e.linkProtocol)),i.proportion={},i.videoRatioOption={},i.inputX={},i.inputY={},e.videoResizing&&(i.proportion=n.querySelector("._se_video_check_proportion"),i.videoRatioOption=n.querySelector(".se-video-ratio"),i.inputX=n.querySelector("._se_video_size_x"),i.inputY=n.querySelector("._se_video_size_y"),i.inputX.value=e.videoWidth,i.inputY.value=e.videoHeight,i.inputX.addEventListener("keyup",this.setInputSize.bind(t,"x")),i.inputY.addEventListener("keyup",this.setInputSize.bind(t,"y")),i.inputX.addEventListener("change",this.setRatio.bind(t)),i.inputY.addEventListener("change",this.setRatio.bind(t)),i.proportion.addEventListener("change",this.setRatio.bind(t)),i.videoRatioOption.addEventListener("change",this.setVideoRatio.bind(t)),n.querySelector(".se-dialog-btn-revert").addEventListener("click",this.sizeRevert.bind(t))),l.dialog.modal.appendChild(n),n=null},setDialog:function(t){let e=t.options,l=t.lang,i=t.util.createElement("DIV");i.className="se-dialog-content",i.style.display="none";let n='<form method="post" enctype="multipart/form-data"><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="'+l.dialogBox.close+'" aria-label="'+l.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+l.dialogBox.videoBox.title+'</span></div><div class="se-dialog-body">';if(e.videoFileInput&&(n+='<div class="se-dialog-form"><label>'+l.dialogBox.videoBox.file+'</label><div class="se-dialog-form-files"><input class="se-input-form _se_video_file" type="file" accept="'+e.videoAccept+'"'+(e.videoMultipleFile?' multiple="multiple"':"")+'/><button type="button" data-command="filesRemove" class="se-btn se-dialog-files-edge-button se-file-remove" title="'+l.controller.remove+'" aria-label="'+l.controller.remove+'">'+t.icons.cancel+"</button></div></div>"),e.videoUrlInput&&(n+='<div class="se-dialog-form"><label>'+l.dialogBox.videoBox.url+'</label><input class="se-input-form se-input-url" type="text" /><pre class="se-link-preview"></pre></div>'),e.videoResizing){let s=e.videoRatioList||[{name:"16:9",value:.5625},{name:"4:3",value:.75},{name:"21:9",value:.4285}],o=e.videoRatio,a=e.videoSizeOnlyPercentage,c=a?' style="display: none !important;"':"",r=e.videoHeightShow?"":' style="display: none !important;"',u=e.videoRatioShow?"":' style="display: none !important;"',p=!a&&!e.videoHeightShow&&!e.videoRatioShow?' style="display: none !important;"':"";n+='<div class="se-dialog-form"><div class="se-dialog-size-text"><label class="size-w">'+l.dialogBox.width+'</label><label class="se-dialog-size-x">&nbsp;</label><label class="size-h"'+r+">"+l.dialogBox.height+'</label><label class="size-h"'+u+">("+l.dialogBox.ratio+')</label></div><input class="se-input-control _se_video_size_x" placeholder="100%"'+(a?' type="number" min="1"':'type="text"')+(a?' max="100"':"")+'/><label class="se-dialog-size-x"'+p+">"+(a?"%":"x")+'</label><input class="se-input-control _se_video_size_y" placeholder="'+e.videoRatio*100+'%"'+(a?' type="number" min="1"':'type="text"')+(a?' max="100"':"")+r+'/><select class="se-input-select se-video-ratio" title="'+l.dialogBox.ratio+'" aria-label="'+l.dialogBox.ratio+'"'+u+">",r||(n+='<option value=""> - </option>');for(let f=0,_=s.length;f<_;f++)n+='<option value="'+s[f].value+'"'+(o.toString()===s[f].value.toString()?" selected":"")+">"+s[f].name+"</option>";n+='</select><button type="button" title="'+l.dialogBox.revertButton+'" aria-label="'+l.dialogBox.revertButton+'" class="se-btn se-dialog-btn-revert" style="float: right;">'+t.icons.revert+'</button></div><div class="se-dialog-form se-dialog-form-footer"'+c+p+'><label><input type="checkbox" class="se-dialog-btn-check _se_video_check_proportion" checked/>&nbsp;'+l.dialogBox.proportion+"</label></div>"}return n+='</div><div class="se-dialog-footer"><div'+(e.videoAlignShow?"":' style="display: none"')+'><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="none" checked>'+l.dialogBox.basic+'</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="left">'+l.dialogBox.left+'</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="center">'+l.dialogBox.center+'</label><label><input type="radio" name="suneditor_video_radio" class="se-dialog-btn-radio" value="right">'+l.dialogBox.right+'</label></div><button type="submit" class="se-btn-primary" title="'+l.dialogBox.submitButton+'" aria-label="'+l.dialogBox.submitButton+'"><span>'+l.dialogBox.submitButton+"</span></button></div></form>",i.innerHTML=n,i},_fileInputChange:function(){this.videoInputFile.value?(this.videoUrlFile.setAttribute("disabled",!0),this.preview.style.textDecoration="line-through"):(this.videoUrlFile.removeAttribute("disabled"),this.preview.style.textDecoration="")},_removeSelectedFiles:function(t,e){this.value="",t&&(t.removeAttribute("disabled"),e.style.textDecoration="")},_onLinkPreview:function(t,e,l){let i=l.target.value.trim();/^<iframe.*\/iframe>$/.test(i)?(t._linkValue=i,this.textContent='<IFrame :src=".."></IFrame>'):t._linkValue=this.textContent=i?e&&i.indexOf("://")===-1&&i.indexOf("#")!==0?e+i:i.indexOf("://")===-1?"/"+i:i:""},_setTagAttrs:function(t){t.setAttribute("controls",!0);let e=this.options.videoTagAttrs;if(e)for(let l in e)this.util.hasOwn(e,l)&&t.setAttribute(l,e[l])},createVideoTag:function(){let t=this.util.createElement("VIDEO");return this.plugins.video._setTagAttrs.call(this,t),t},_setIframeAttrs:function(t){t.frameBorder="0",t.allowFullscreen=!0;let e=this.options.videoIframeAttrs;if(e)for(let l in e)this.util.hasOwn(e,l)&&t.setAttribute(l,e[l])},createIframeTag:function(){let t=this.util.createElement("IFRAME");return this.plugins.video._setIframeAttrs.call(this,t),t},fileTags:["iframe","video"],select:function(t){this.plugins.video.onModifyMode.call(this,t,this.plugins.resizing.call_controller_resize.call(this,t,"video"))},destroy:function(t){let e=t||this.context.video._element,l=this.context.video._container,i=e.getAttribute("data-index")*1;if(typeof this.functions.onVideoDeleteBefore=="function"&&this.functions.onVideoDeleteBefore(e,l,i,this)===!1)return;let n=l.previousElementSibling||l.nextElementSibling,s=l.parentNode;this.util.removeItem(l),this.plugins.video.init.call(this),this.controllersOff(),s!==this.context.element.wysiwyg&&this.util.removeItemAllParents(s,function(o){return o.childNodes.length===0},null),this.focusEdge(n),this.plugins.fileManager.deleteInfo.call(this,"video",i,this.functions.onVideoUpload),this.history.push(!1)},on:function(t){let e=this.context.video;t?e.videoInputFile&&this.options.videoMultipleFile&&e.videoInputFile.removeAttribute("multiple"):(e.inputX.value=e._origin_w=this.options.videoWidth===e._defaultSizeX?"":this.options.videoWidth,e.inputY.value=e._origin_h=this.options.videoHeight===e._defaultSizeY?"":this.options.videoHeight,e.proportion.disabled=!0,e.videoInputFile&&this.options.videoMultipleFile&&e.videoInputFile.setAttribute("multiple","multiple")),e._resizing&&this.plugins.video.setVideoRatioSelect.call(this,e._origin_h||e._defaultRatio)},open:function(){this.plugins.dialog.open.call(this,"video",this.currentControllerName==="video")},setVideoRatio:function(t){let e=this.context.video,l=t.target.options[t.target.selectedIndex].value;e._defaultSizeY=e._videoRatio=l?l*100+"%":e._defaultSizeY,e.inputY.placeholder=l?l*100+"%":"",e.inputY.value=""},setInputSize:function(t,e){if(e&&e.keyCode===32){e.preventDefault();return}let l=this.context.video;this.plugins.resizing._module_setInputSize.call(this,l,t),t==="y"&&this.plugins.video.setVideoRatioSelect.call(this,e.target.value||l._defaultRatio)},setRatio:function(){this.plugins.resizing._module_setRatio.call(this,this.context.video)},submit:function(t){let e=this.context.video,l=this.plugins.video;t.preventDefault(),t.stopPropagation(),e._align=e.modal.querySelector('input[name="suneditor_video_radio"]:checked').value;try{e.videoInputFile&&e.videoInputFile.files.length>0?(this.showLoading(),l.submitAction.call(this,this.context.video.videoInputFile.files)):e.videoUrlFile&&e._linkValue.length>0&&(this.showLoading(),l.setup_url.call(this,e._linkValue))}catch(i){throw this.closeLoading(),Error('[SUNEDITOR.video.submit.fail] cause : "'+i.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(t){if(t.length===0)return;let e=0,l=[];for(let o=0,a=t.length;o<a;o++)/video/i.test(t[o].type)&&(l.push(t[o]),e+=t[o].size);let i=this.options.videoUploadSizeLimit;if(i>0){let o=0,a=this.context.video._infoList;for(let c=0,r=a.length;c<r;c++)o+=a[c].size*1;if(e+o>i){this.closeLoading();let c="[SUNEDITOR.videoUpload.fail] Size of uploadable total videos: "+i/1e3+"KB";(typeof this.functions.onVideoUploadError!="function"||this.functions.onVideoUploadError(c,{limitSize:i,currentSize:o,uploadSize:e},this))&&this.functions.noticeOpen(c);return}}let n=this.context.video;n._uploadFileLength=l.length;let s={inputWidth:n.inputX.value,inputHeight:n.inputY.value,align:n._align,isUpdate:this.context.dialog.updateModal,element:n._element};if(typeof this.functions.onVideoUploadBefore=="function"){let o=this.functions.onVideoUploadBefore(l,s,this,function(a){a&&this._w.Array.isArray(a.result)?this.plugins.video.register.call(this,s,a):this.plugins.video.upload.call(this,s,a)}.bind(this));if(typeof o>"u")return;if(!o){this.closeLoading();return}typeof o=="object"&&o.length>0&&(l=o)}this.plugins.video.upload.call(this,s,l)},error:function(t,e){if(this.closeLoading(),typeof this.functions.onVideoUploadError!="function"||this.functions.onVideoUploadError(t,e,this))throw this.functions.noticeOpen(t),Error("[SUNEDITOR.plugin.video.error] response: "+t)},upload:function(t,e){if(!e){this.closeLoading();return}if(typeof e=="string"){this.plugins.video.error.call(this,e,null);return}let l=this.options.videoUploadUrl,i=this.context.dialog.updateModal?1:e.length;if(typeof l=="string"&&l.length>0){let n=new FormData;for(let s=0;s<i;s++)n.append("file-"+s,e[s]);this.plugins.fileManager.upload.call(this,l,this.options.videoUploadHeader,n,this.plugins.video.callBack_videoUpload.bind(this,t),this.functions.onVideoUploadError)}else throw Error('[SUNEDITOR.videoUpload.fail] cause : There is no "videoUploadUrl" option.')},callBack_videoUpload:function(t,e){if(typeof this.functions.videoUploadHandler=="function")this.functions.videoUploadHandler(e,t,this);else{let l=JSON.parse(e.responseText);l.errorMessage?this.plugins.video.error.call(this,l.errorMessage,l):this.plugins.video.register.call(this,t,l)}},register:function(t,e){let l=e.result,i=this.plugins.video.createVideoTag.call(this);for(let n=0,s=l.length,o;n<s;n++)o={name:l[n].name,size:l[n].size},this.plugins.video.create_video.call(this,t.isUpdate?t.element:i.cloneNode(!1),l[n].url,t.inputWidth,t.inputHeight,t.align,o,t.isUpdate);this.closeLoading()},setup_url:function(t){try{let e=this.context.video;if(t||(t=e._linkValue),!t||/^<iframe.*\/iframe>$/.test(t)&&(t=new this._w.DOMParser().parseFromString(t,"text/html").querySelector("iframe").src,t.length===0))return!1;if(/youtu\.?be/.test(t)){if(/^http/.test(t)||(t="https://"+t),t=t.replace("watch?v=",""),/^\/\/.+\/embed\//.test(t)||(t=t.replace(t.match(/\/\/.+\//)[0],"//www.youtube.com/embed/").replace("&","?&")),e._youtubeQuery.length>0)if(/\?/.test(t)){let l=t.split("?");t=l[0]+"?"+e._youtubeQuery+"&"+l[1]}else t+="?"+e._youtubeQuery}else if(/vimeo\.com/.test(t)&&(t.endsWith("/")&&(t=t.slice(0,-1)),t="https://player.vimeo.com/video/"+t.slice(t.lastIndexOf("/")+1),e._vimeoQuery.length>0))if(/\?/.test(t)){let l=t.split("?");t=l[0]+"?"+e._vimeoQuery+"&"+l[1]}else t+="?"+e._vimeoQuery;this.plugins.video.create_video.call(this,this.plugins.video[!/embed|iframe|player|\/e\/|\.php|\.html?/.test(t)&&!/vimeo\.com/.test(t)?"createVideoTag":"createIframeTag"].call(this),t,e.inputX.value,e.inputY.value,e._align,null,this.context.dialog.updateModal)}catch(e){throw Error('[SUNEDITOR.video.upload.fail] cause : "'+e.message+'"')}finally{this.closeLoading()}},create_video:function(t,e,l,i,n,s,o){this.context.resizing._resize_plugin="video";let a=this.context.video,c=null,r=null,u=!1;if(o){if(t=a._element,t.src!==e){u=!0;let g=/youtu\.?be/.test(e),d=/vimeo\.com/.test(e);if((g||d)&&!/^iframe$/i.test(t.nodeName)){let m=this.plugins.video.createIframeTag.call(this);m.src=e,t.parentNode.replaceChild(m,t),a._element=t=m}else if(!g&&!d&&!/^video$/i.test(t.nodeName)){let m=this.plugins.video.createVideoTag.call(this);m.src=e,t.parentNode.replaceChild(m,t),a._element=t=m}else t.src=e}r=a._container,c=this.util.getParentElement(t,"FIGURE")}else u=!0,t.src=e,a._element=t,c=this.plugins.component.set_cover.call(this,t),r=this.plugins.component.set_container.call(this,c,"se-video-container");a._cover=c,a._container=r;let p=this.plugins.resizing._module_getSizeX.call(this,a)!==(l||a._defaultSizeX)||this.plugins.resizing._module_getSizeY.call(this,a)!==(i||a._videoRatio),f=!o||p;a._resizing&&(this.context.video._proportionChecked=a.proportion.checked,t.setAttribute("data-proportion",a._proportionChecked));let _=!1;f&&(_=this.plugins.video.applySize.call(this)),_&&n==="center"||this.plugins.video.setAlign.call(this,null,t,c,r);let h=!0;if(o)a._resizing&&this.context.resizing._rotateVertical&&f&&this.plugins.resizing.setTransformSize.call(this,t,null,null);else if(h=this.insertComponent(r,!1,!0,!this.options.mediaAutoSelect),!this.options.mediaAutoSelect){let g=this.appendFormatTag(r,null);g&&this.setRange(g,0,g,0)}h&&(u&&this.plugins.fileManager.setInfo.call(this,"video",t,this.functions.onVideoUpload,s,!0),o&&(this.selectComponent(t,"video"),this.history.push(!1))),this.context.resizing._resize_plugin=""},_update_videoCover:function(t){if(!t)return;let e=this.context.video;/^video$/i.test(t.nodeName)?this.plugins.video._setTagAttrs.call(this,t):this.plugins.video._setIframeAttrs.call(this,t);let l=this.util.isRangeFormatElement(t.parentNode)||this.util.isWysiwygDiv(t.parentNode)?t:this.util.getFormatElement(t)||t,i=t;e._element=t=t.cloneNode(!0);let n=e._cover=this.plugins.component.set_cover.call(this,t),s=e._container=this.plugins.component.set_container.call(this,n,"se-video-container");try{let o=l.querySelector("figcaption"),a=null;o&&(a=this.util.createElement("DIV"),a.innerHTML=o.innerHTML,this.util.removeItem(o));let c=(t.getAttribute("data-size")||t.getAttribute("data-origin")||"").split(",");this.plugins.video.applySize.call(this,c[0]||i.style.width||i.width||"",c[1]||i.style.height||i.height||"");let r=this.util.getFormatElement(i);if(r&&(e._align=r.style.textAlign||r.style.float),this.plugins.video.setAlign.call(this,null,t,n,s),this.util.getParentElement(i,this.util.isNotCheckingNode))i.parentNode.replaceChild(s,i);else if(this.util.isListCell(l)){let u=this.util.getParentElement(i,function(p){return p.parentNode===l});l.insertBefore(s,u),this.util.removeItem(i),this.util.removeEmptyNode(u,null,!0)}else if(this.util.isFormatElement(l)){let u=this.util.getParentElement(i,function(p){return p.parentNode===l});l=this.util.splitElement(l,u),l.parentNode.insertBefore(s,l),this.util.removeItem(i),this.util.removeEmptyNode(l,null,!0),l.children.length===0&&(l.innerHTML=this.util.htmlRemoveWhiteSpace(l.innerHTML))}else l.parentNode.replaceChild(s,l);a&&l.parentNode.insertBefore(a,s.nextElementSibling)}catch(o){console.warn("[SUNEDITOR.video.error] Maybe the video tag is nested.",o)}this.plugins.fileManager.setInfo.call(this,"video",t,this.functions.onVideoUpload,null,!0),this.plugins.video.init.call(this)},onModifyMode:function(t,e){let l=this.context.video;l._element=t,l._cover=this.util.getParentElement(t,"FIGURE"),l._container=this.util.getParentElement(t,this.util.isMediaComponent),l._align=t.style.float||t.getAttribute("data-align")||"none",t.style.float="",e&&(l._element_w=e.w,l._element_h=e.h,l._element_t=e.t,l._element_l=e.l);let i=l._element.getAttribute("data-size")||l._element.getAttribute("data-origin"),n,s;i?(i=i.split(","),n=i[0],s=i[1]):e&&(n=e.w,s=e.h),l._origin_w=n||t.style.width||t.width||"",l._origin_h=s||t.style.height||t.height||""},openModify:function(t){let e=this.context.video;if(e.videoUrlFile&&(e._linkValue=e.preview.textContent=e.videoUrlFile.value=e._element.src||(e._element.querySelector("source")||"").src||""),(e.modal.querySelector('input[name="suneditor_video_radio"][value="'+e._align+'"]')||e.modal.querySelector('input[name="suneditor_video_radio"][value="none"]')).checked=!0,e._resizing){this.plugins.resizing._module_setModifyInputSize.call(this,e,this.plugins.video);let l=e._videoRatio=this.plugins.resizing._module_getSizeY.call(this,e);this.plugins.video.setVideoRatioSelect.call(this,l)||(e.inputY.value=e._onlyPercentage?this.util.getNumber(l,2):l)}t||this.plugins.dialog.open.call(this,"video",!0)},setVideoRatioSelect:function(t){let e=!1,l=this.context.video,i=l.videoRatioOption.options;/%$/.test(t)||l._onlyPercentage?t=this.util.getNumber(t,2)/100+"":(!this.util.isNumber(t)||t*1>=1)&&(t=""),l.inputY.placeholder="";for(let n=0,s=i.length;n<s;n++)i[n].value===t?(e=i[n].selected=!0,l.inputY.placeholder=t?t*100+"%":""):i[n].selected=!1;return e},checkFileInfo:function(){this.plugins.fileManager.checkInfo.call(this,"video",["iframe","video"],this.functions.onVideoUpload,this.plugins.video._update_videoCover.bind(this),!0)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"video",this.functions.onVideoUpload)},applySize:function(t,e){let l=this.context.video;return t||(t=l.inputX.value||this.options.videoWidth),e||(e=l.inputY.value||this.options.videoHeight),l._onlyPercentage||/%$/.test(t)||!t?(this.plugins.video.setPercentSize.call(this,t||"100%",e||(/%$/.test(l._videoRatio)?l._videoRatio:l._defaultRatio)),!0):((!t||t==="auto")&&(!e||e==="auto")?this.plugins.video.setAutoSize.call(this):this.plugins.video.setSize.call(this,t,e||l._videoRatio||l._defaultRatio,!1),!1)},sizeRevert:function(){this.plugins.resizing._module_sizeRevert.call(this,this.context.video)},setSize:function(t,e,l,i){let n=this.context.video,s=/^(rw|lw)$/.test(i),o=/^(th|bh)$/.test(i);o||(t=this.util.getNumber(t,0)),s||(e=this.util.isNumber(e)?e+n.sizeUnit:e||""),t=t?t+n.sizeUnit:"",o||(n._element.style.width=t),s||(n._cover.style.paddingBottom=n._cover.style.height=e),!o&&!/%$/.test(t)&&(n._cover.style.width=t,n._container.style.width=""),!s&&!/%$/.test(e)?n._element.style.height=e:n._element.style.height="",l||n._element.removeAttribute("data-percentage"),this.plugins.resizing._module_saveCurrentSize.call(this,n)},setAutoSize:function(){this.plugins.video.setPercentSize.call(this,100,this.context.video._defaultRatio)},setOriginSize:function(t){let e=this.context.video;e._element.removeAttribute("data-percentage"),this.plugins.resizing.resetTransform.call(this,e._element),this.plugins.video.cancelPercentAttr.call(this);let l=((t?e._element.getAttribute("data-size"):"")||e._element.getAttribute("data-origin")||"").split(",");if(l){let i=l[0],n=l[1];e._onlyPercentage||/%$/.test(i)&&(/%$/.test(n)||!/\d/.test(n))?this.plugins.video.setPercentSize.call(this,i,n):this.plugins.video.setSize.call(this,i,n),this.plugins.resizing._module_saveCurrentSize.call(this,e)}},setPercentSize:function(t,e){let l=this.context.video;e=e&&!/%$/.test(e)&&!this.util.getNumber(e,0)?this.util.isNumber(e)?e+"%":e:this.util.isNumber(e)?e+l.sizeUnit:e||l._defaultRatio,l._container.style.width=this.util.isNumber(t)?t+"%":t,l._container.style.height="",l._cover.style.width="100%",l._cover.style.height=e,l._cover.style.paddingBottom=e,l._element.style.width="100%",l._element.style.height="100%",l._element.style.maxWidth="",l._align==="center"&&this.plugins.video.setAlign.call(this,null,null,null,null),l._element.setAttribute("data-percentage",t+","+e),this.plugins.resizing._module_saveCurrentSize.call(this,l)},cancelPercentAttr:function(){let t=this.context.video;t._cover.style.width="",t._cover.style.height="",t._cover.style.paddingBottom="",t._container.style.width="",t._container.style.height="",this.util.removeClass(t._container,this.context.video._floatClassRegExp),this.util.addClass(t._container,"__se__float-"+t._align),t._align==="center"&&this.plugins.video.setAlign.call(this,null,null,null,null)},setAlign:function(t,e,l,i){let n=this.context.video;t||(t=n._align),e||(e=n._element),l||(l=n._cover),i||(i=n._container),/%$/.test(e.style.width)&&t==="center"?(i.style.minWidth="100%",l.style.width=i.style.width,l.style.height=l.style.height,l.style.paddingBottom=/%$/.test(l.style.height)?this.util.getNumber(this.util.getNumber(l.style.height,2)/100*this.util.getNumber(l.style.width,2),2)+"%":l.style.height):(i.style.minWidth="",l.style.width=this.context.resizing._rotateVertical?e.style.height||e.offsetHeight:e.style.width||"100%",l.style.paddingBottom=l.style.height),this.util.hasClass(i,"__se__float-"+t)||(this.util.removeClass(i,n._floatClassRegExp),this.util.addClass(i,"__se__float-"+t)),e.setAttribute("data-align",t)},init:function(){let t=this.context.video;t.videoInputFile&&(t.videoInputFile.value=""),t.videoUrlFile&&(t._linkValue=t.preview.textContent=t.videoUrlFile.value=""),t.videoInputFile&&t.videoUrlFile&&(t.videoUrlFile.removeAttribute("disabled"),t.preview.style.textDecoration=""),t._origin_w=this.options.videoWidth,t._origin_h=this.options.videoHeight,t.modal.querySelector('input[name="suneditor_video_radio"][value="none"]').checked=!0,t._resizing&&(t.inputX.value=this.options.videoWidth===t._defaultSizeX?"":this.options.videoWidth,t.inputY.value=this.options.videoHeight===t._defaultSizeY?"":this.options.videoHeight,t.proportion.checked=!0,t.proportion.disabled=!0,this.plugins.video.setVideoRatioSelect.call(this,t._defaultRatio))}};var Et=B(A()),zt=B(q()),Lt=B(Y()),It={name:"audio",display:"dialog",add:function(t){t.addModule([Et.default,zt.default,Lt.default]);let e=t.context,l=e.audio={_infoList:[],_infoIndex:0,_uploadFileLength:0,focusElement:null,targetSelect:null,_origin_w:t.options.audioWidth,_origin_h:t.options.audioHeight,_linkValue:"",_element:null,_cover:null,_container:null},i=this.setDialog(t);l.modal=i,l.audioInputFile=i.querySelector("._se_audio_files"),l.audioUrlFile=i.querySelector(".se-input-url"),l.focusElement=l.audioInputFile||l.audioUrlFile,l.preview=i.querySelector(".se-link-preview");let n=this.setController(t);l.controller=n,i.querySelector("form").addEventListener("submit",this.submit.bind(t)),l.audioInputFile&&i.querySelector(".se-dialog-files-edge-button").addEventListener("click",this._removeSelectedFiles.bind(l.audioInputFile,l.audioUrlFile,l.preview)),l.audioInputFile&&l.audioUrlFile&&l.audioInputFile.addEventListener("change",this._fileInputChange.bind(l)),n.addEventListener("click",this.onClick_controller.bind(t)),l.audioUrlFile&&l.audioUrlFile.addEventListener("input",this._onLinkPreview.bind(l.preview,l,t.options.linkProtocol)),e.dialog.modal.appendChild(i),e.element.relative.appendChild(n),i=null,n=null},setDialog:function(t){let e=t.options,l=t.lang,i=t.util.createElement("DIV");i.className="se-dialog-content",i.style.display="none";let n='<form method="post" enctype="multipart/form-data"><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="'+l.dialogBox.close+'" aria-label="'+l.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+l.dialogBox.audioBox.title+'</span></div><div class="se-dialog-body">';return e.audioFileInput&&(n+='<div class="se-dialog-form"><label>'+l.dialogBox.audioBox.file+'</label><div class="se-dialog-form-files"><input class="se-input-form _se_audio_files" type="file" accept="'+e.audioAccept+'"'+(e.audioMultipleFile?' multiple="multiple"':"")+'/><button type="button" data-command="filesRemove" class="se-btn se-dialog-files-edge-button se-file-remove" title="'+l.controller.remove+'" aria-label="'+l.controller.remove+'">'+t.icons.cancel+"</button></div></div>"),e.audioUrlInput&&(n+='<div class="se-dialog-form"><label>'+l.dialogBox.audioBox.url+'</label><input class="se-input-form se-input-url" type="text" /><pre class="se-link-preview"></pre></div>'),n+='</div><div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="'+l.dialogBox.submitButton+'" aria-label="'+l.dialogBox.submitButton+'"><span>'+l.dialogBox.submitButton+"</span></button></div></form>",i.innerHTML=n,i},setController:function(t){let e=t.lang,l=t.icons,i=t.util.createElement("DIV");return i.className="se-controller se-controller-link",i.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="link-content"><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-tooltip">'+l.edit+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-tooltip">'+l.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",i},_fileInputChange:function(){this.audioInputFile.value?(this.audioUrlFile.setAttribute("disabled",!0),this.preview.style.textDecoration="line-through"):(this.audioUrlFile.removeAttribute("disabled"),this.preview.style.textDecoration="")},_removeSelectedFiles:function(t,e){this.value="",t&&(t.removeAttribute("disabled"),e.style.textDecoration="")},_createAudioTag:function(){let t=this.util.createElement("AUDIO");this.plugins.audio._setTagAttrs.call(this,t);let e=this.context.audio._origin_w,l=this.context.audio._origin_h;return t.setAttribute("origin-size",e+","+l),t.style.cssText=(e?"width:"+e+"; ":"")+(l?"height:"+l+";":""),t},_setTagAttrs:function(t){t.setAttribute("controls",!0);let e=this.options.audioTagAttrs;if(e)for(let l in e)this.util.hasOwn(e,l)&&t.setAttribute(l,e[l])},_onLinkPreview:function(t,e,l){let i=l.target.value.trim();t._linkValue=this.textContent=i?e&&i.indexOf("://")===-1&&i.indexOf("#")!==0?e+i:i.indexOf("://")===-1?"/"+i:i:""},fileTags:["audio"],select:function(t){this.plugins.audio.onModifyMode.call(this,t)},destroy:function(t){t=t||this.context.audio._element;let e=this.util.getParentElement(t,this.util.isComponent)||t,l=t.getAttribute("data-index")*1;if(typeof this.functions.onAudioDeleteBefore=="function"&&this.functions.onAudioDeleteBefore(t,e,l,this)===!1)return;let i=e.previousElementSibling||e.nextElementSibling,n=e.parentNode;this.util.removeItem(e),this.plugins.audio.init.call(this),this.controllersOff(),n!==this.context.element.wysiwyg&&this.util.removeItemAllParents(n,function(s){return s.childNodes.length===0},null),this.focusEdge(i),this.plugins.fileManager.deleteInfo.call(this,"audio",l,this.functions.onAudioUpload),this.history.push(!1)},checkFileInfo:function(){this.plugins.fileManager.checkInfo.call(this,"audio",["audio"],this.functions.onAudioUpload,this.plugins.audio.updateCover.bind(this),!1)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"audio",this.functions.onAudioUpload)},on:function(t){let e=this.context.audio;t?e._element?(this.context.dialog.updateModal=!0,e._linkValue=e.preview.textContent=e.audioUrlFile.value=e._element.src,e.audioInputFile&&this.options.audioMultipleFile&&e.audioInputFile.removeAttribute("multiple")):e.audioInputFile&&this.options.audioMultipleFile&&e.audioInputFile.removeAttribute("multiple"):(this.plugins.audio.init.call(this),e.audioInputFile&&this.options.audioMultipleFile&&e.audioInputFile.setAttribute("multiple","multiple"))},open:function(){this.plugins.dialog.open.call(this,"audio",this.currentControllerName==="audio")},submit:function(t){let e=this.context.audio;t.preventDefault(),t.stopPropagation();try{e.audioInputFile&&e.audioInputFile.files.length>0?(this.showLoading(),this.plugins.audio.submitAction.call(this,e.audioInputFile.files)):e.audioUrlFile&&e._linkValue.length>0&&(this.showLoading(),this.plugins.audio.setupUrl.call(this,e._linkValue))}catch(l){throw this.closeLoading(),Error('[SUNEDITOR.audio.submit.fail] cause : "'+l.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(t){if(t.length===0)return;let e=0,l=[];for(let o=0,a=t.length;o<a;o++)/audio/i.test(t[o].type)&&(l.push(t[o]),e+=t[o].size);let i=this.options.audioUploadSizeLimit;if(i>0){let o=0,a=this.context.audio._infoList;for(let c=0,r=a.length;c<r;c++)o+=a[c].size*1;if(e+o>i){this.closeLoading();let c="[SUNEDITOR.audioUpload.fail] Size of uploadable total audios: "+i/1e3+"KB";(typeof this.functions.onAudioUploadError!="function"||this.functions.onAudioUploadError(c,{limitSize:i,currentSize:o,uploadSize:e},this))&&this.functions.noticeOpen(c);return}}let n=this.context.audio;n._uploadFileLength=l.length;let s={isUpdate:this.context.dialog.updateModal,element:n._element};if(typeof this.functions.onAudioUploadBefore=="function"){let o=this.functions.onAudioUploadBefore(l,s,this,function(a){a&&this._w.Array.isArray(a.result)?this.plugins.audio.register.call(this,s,a):this.plugins.audio.upload.call(this,s,a)}.bind(this));if(typeof o>"u")return;if(!o){this.closeLoading();return}typeof o=="object"&&o.length>0&&(l=o)}this.plugins.audio.upload.call(this,s,l)},error:function(t,e){if(this.closeLoading(),typeof this.functions.onAudioUploadError!="function"||this.functions.onAudioUploadError(t,e,this))throw this.functions.noticeOpen(t),Error("[SUNEDITOR.plugin.audio.exception] response: "+t)},upload:function(t,e){if(!e){this.closeLoading();return}if(typeof e=="string"){this.plugins.audio.error.call(this,e,null);return}let l=this.options.audioUploadUrl,i=this.context.dialog.updateModal?1:e.length,n=new FormData;for(let s=0;s<i;s++)n.append("file-"+s,e[s]);this.plugins.fileManager.upload.call(this,l,this.options.audioUploadHeader,n,this.plugins.audio.callBack_upload.bind(this,t),this.functions.onAudioUploadError)},callBack_upload:function(t,e){if(typeof this.functions.audioUploadHandler=="function")this.functions.audioUploadHandler(e,t,this);else{let l=JSON.parse(e.responseText);l.errorMessage?this.plugins.audio.error.call(this,l.errorMessage,l):this.plugins.audio.register.call(this,t,l)}},register:function(t,e){let l=e.result;for(let i=0,n=l.length,s,o;i<n;i++)t.isUpdate?o=t.element:o=this.plugins.audio._createAudioTag.call(this),s={name:l[i].name,size:l[i].size},this.plugins.audio.create_audio.call(this,o,l[i].url,s,t.isUpdate);this.closeLoading()},setupUrl:function(t){try{if(t.length===0)return!1;this.plugins.audio.create_audio.call(this,this.plugins.audio._createAudioTag.call(this),t,null,this.context.dialog.updateModal)}catch(e){throw Error('[SUNEDITOR.audio.audio.fail] cause : "'+e.message+'"')}finally{this.closeLoading()}},create_audio:function(t,e,l,i){let n=this.context.audio;if(i)if(n._element&&(t=n._element),t&&t.src!==e)t.src=e,this.selectComponent(t,"audio");else{this.selectComponent(t,"audio");return}else{t.src=e;let s=this.plugins.component.set_cover.call(this,t),o=this.plugins.component.set_container.call(this,s,"");if(!this.insertComponent(o,!1,!0,!this.options.mediaAutoSelect)){this.focus();return}if(!this.options.mediaAutoSelect){let a=this.appendFormatTag(o,null);a&&this.setRange(a,0,a,0)}}this.plugins.fileManager.setInfo.call(this,"audio",t,this.functions.onAudioUpload,l,!1),i&&this.history.push(!1)},updateCover:function(t){let e=this.context.audio;this.plugins.audio._setTagAttrs.call(this,t);let l=this.util.isRangeFormatElement(t.parentNode)||this.util.isWysiwygDiv(t.parentNode)?t:this.util.getFormatElement(t)||t,i=t;e._element=t=t.cloneNode(!1);let n=this.plugins.component.set_cover.call(this,t),s=this.plugins.component.set_container.call(this,n,"se-audio-container");try{if(this.util.getParentElement(i,this.util.isNotCheckingNode))i.parentNode.replaceChild(s,i);else if(this.util.isListCell(l)){let o=this.util.getParentElement(i,function(a){return a.parentNode===l});l.insertBefore(s,o),this.util.removeItem(i),this.util.removeEmptyNode(o,null,!0)}else if(this.util.isFormatElement(l)){let o=this.util.getParentElement(i,function(a){return a.parentNode===l});l=this.util.splitElement(l,o),l.parentNode.insertBefore(s,l),this.util.removeItem(i),this.util.removeEmptyNode(l,null,!0),l.children.length===0&&(l.innerHTML=this.util.htmlRemoveWhiteSpace(l.innerHTML))}else l.parentNode.replaceChild(s,l)}catch(o){console.warn("[SUNEDITOR.audio.error] Maybe the audio tag is nested.",o)}this.plugins.fileManager.setInfo.call(this,"audio",t,this.functions.onAudioUpload,null,!1),this.plugins.audio.init.call(this)},onModifyMode:function(t){let e=this.context.audio;this.setControllerPosition(e.controller,t,"bottom",{left:0,top:0}),this.controllersOn(e.controller,t,this.plugins.audio.onControllerOff.bind(this,t),"audio"),this.util.addClass(t,"active"),e._element=t,e._cover=this.util.getParentElement(t,"FIGURE"),e._container=this.util.getParentElement(t,this.util.isComponent)},openModify:function(t){if(this.context.audio.audioUrlFile){let e=this.context.audio;e._linkValue=e.preview.textContent=e.audioUrlFile.value=e._element.src}t||this.plugins.dialog.open.call(this,"audio",!0)},onClick_controller:function(t){t.stopPropagation();let e=t.target.getAttribute("data-command");e&&(t.preventDefault(),/update/.test(e)?this.plugins.audio.openModify.call(this,!1):this.plugins.audio.destroy.call(this,this.context.audio._element),this.controllersOff())},onControllerOff:function(t){this.util.removeClass(t,"active"),this.context.audio.controller.style.display="none"},init:function(){if(this.context.dialog.updateModal)return;let t=this.context.audio;t.audioInputFile&&(t.audioInputFile.value=""),t.audioUrlFile&&(t._linkValue=t.preview.textContent=t.audioUrlFile.value=""),t.audioInputFile&&t.audioUrlFile&&(t.audioUrlFile.removeAttribute("disabled"),t.preview.style.textDecoration=""),t._element=null}};var Bt=B(A()),Nt="https://katex.org/docs/supported.html",Mt={name:"math",display:"dialog",add:function(t){t.addModule([Bt.default]);let e=t.context;e.math={focusElement:null,previewElement:null,fontSizeElement:null,defaultFontSize:"",_mathExp:null};let l=this.setDialog(t);e.math.modal=l,e.math.focusElement=l.querySelector(".se-math-exp"),e.math.previewElement=l.querySelector(".se-math-preview"),e.math.fontSizeElement=l.querySelector(".se-math-size"),e.math.focusElement.addEventListener("paste",function(n){typeof t.functions.onPasteMath=="function"&&t.functions.onPasteMath(n,t)},!1),e.math.focusElement.addEventListener(t.util.isIE?"textinput":"input",this._renderMathExp.bind(t,e.math),!1),e.math.fontSizeElement.addEventListener("change",function(n){this.fontSize=n.target.value}.bind(e.math.previewElement.style),!1);let i=this.setController_MathButton(t);e.math.mathController=i,e.math._mathExp=null,l.querySelector("form").addEventListener("submit",this.submit.bind(t),!1),i.addEventListener("click",this.onClick_mathController.bind(t)),e.math.previewElement.style.fontSize=e.math.defaultFontSize,e.dialog.modal.appendChild(l),e.element.relative.appendChild(i),l=null,i=null},setDialog:function(t){let e=t.lang,l=t.util.createElement("DIV"),i=t.options.mathFontSize,n=i[0].value;l.className="se-dialog-content",l.style.display="none";let s='<form><div class="se-dialog-header"><button type="button" data-command="close" class="se-btn se-dialog-close" title="'+e.dialogBox.close+'" aria-label="'+e.dialogBox.close+'">'+t.icons.cancel+'</button><span class="se-modal-title">'+e.dialogBox.mathBox.title+'</span></div><div class="se-dialog-body"><div class="se-dialog-form"><label>'+e.dialogBox.mathBox.inputLabel+' (<a href="'+Nt+'" target="_blank">KaTeX</a>)</label><textarea class="se-input-form se-math-exp" type="text"></textarea></div><div class="se-dialog-form"><label>'+e.dialogBox.mathBox.fontSizeLabel+'</label><select class="se-input-select se-math-size">';for(let o=0,a=i.length,c;o<a;o++)c=i[o],c.default&&(n=c.value),s+='<option value="'+c.value+'"'+(c.default?" selected":"")+">"+c.text+"</option>";return s+='</select></div><div class="se-dialog-form"><label>'+e.dialogBox.mathBox.previewLabel+'</label><p class="se-math-preview"></p></div></div><div class="se-dialog-footer"><button type="submit" class="se-btn-primary" title="'+e.dialogBox.submitButton+'" aria-label="'+e.dialogBox.submitButton+'"><span>'+e.dialogBox.submitButton+"</span></button></div></form>",t.context.math.defaultFontSize=n,l.innerHTML=s,l},setController_MathButton:function(t){let e=t.lang,l=t.util.createElement("DIV");return l.className="se-controller se-controller-link",l.innerHTML='<div class="se-arrow se-arrow-up"></div><div class="link-content"><div class="se-btn-group"><button type="button" data-command="update" tabindex="-1" class="se-btn se-tooltip">'+t.icons.edit+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.edit+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="se-btn se-tooltip">'+t.icons.delete+'<span class="se-tooltip-inner"><span class="se-tooltip-text">'+e.controller.remove+"</span></span></button></div></div>",l},open:function(){this.plugins.dialog.open.call(this,"math",this.currentControllerName==="math")},managedTags:function(){return{className:"katex",method:function(t){if(!t.getAttribute("data-exp")||!this.options.katex)return;let e=this._d.createRange().createContextualFragment(this.plugins.math._renderer.call(this,this.util.HTMLDecoder(t.getAttribute("data-exp"))));t.innerHTML=e.querySelector(".katex").innerHTML,t.setAttribute("contenteditable",!1)}}},_renderer:function(t){let e="";try{this.util.removeClass(this.context.math.focusElement,"se-error"),e=this.options.katex.src.renderToString(t,{throwOnError:!0,displayMode:!0})}catch(l){this.util.addClass(this.context.math.focusElement,"se-error"),e='<span class="se-math-katex-error">Katex syntax error. (Refer <a href="'+Nt+'" target="_blank">KaTeX</a>)</span>',console.warn("[SUNEDITOR.math.Katex.error] ",l)}return e},_renderMathExp:function(t,e){t.previewElement.innerHTML=this.plugins.math._renderer.call(this,e.target.value)},submit:function(t){this.showLoading(),t.preventDefault(),t.stopPropagation();let e=function(){if(this.context.math.focusElement.value.trim().length===0)return!1;let l=this.context.math,i=l.focusElement.value,n=l.previewElement.querySelector(".katex");if(!n)return!1;if(n.className="__se__katex "+n.className,n.setAttribute("contenteditable",!1),n.setAttribute("data-exp",this.util.HTMLEncoder(i)),n.setAttribute("data-font-size",l.fontSizeElement.value),n.style.fontSize=l.fontSizeElement.value,this.context.dialog.updateModal){let s=this.util.getParentElement(l._mathExp,".katex");s.parentNode.replaceChild(n,s),this.setRange(n,0,n,1)}else{let s=this.getSelectedElements();if(s.length>1){let a=this.util.createElement(s[0].nodeName);if(a.appendChild(n),!this.insertNode(a,null,!0))return!1}else if(!this.insertNode(n,null,!0))return!1;let o=this.util.createTextNode(this.util.zeroWidthSpace);n.parentNode.insertBefore(o,n.nextSibling),this.setRange(n,0,n,1)}return l.focusElement.value="",l.fontSizeElement.value="1em",l.previewElement.style.fontSize="1em",l.previewElement.innerHTML="",!0}.bind(this);try{e()&&(this.plugins.dialog.close.call(this),this.history.push(!1))}catch{this.plugins.dialog.close.call(this)}finally{this.closeLoading()}return!1},active:function(t){if(!t)this.controllerArray.indexOf(this.context.math.mathController)>-1&&this.controllersOff();else if(t.getAttribute("data-exp"))return this.controllerArray.indexOf(this.context.math.mathController)<0&&(this.setRange(t,0,t,1),this.plugins.math.call_controller.call(this,t)),!0;return!1},on:function(t){if(!t)this.plugins.math.init.call(this);else{let e=this.context.math;if(e._mathExp){let l=this.util.HTMLDecoder(e._mathExp.getAttribute("data-exp")),i=e._mathExp.getAttribute("data-font-size")||"1em";this.context.dialog.updateModal=!0,e.focusElement.value=l,e.fontSizeElement.value=i,e.previewElement.innerHTML=this.plugins.math._renderer.call(this,l),e.previewElement.style.fontSize=i}}},call_controller:function(t){this.context.math._mathExp=t;let e=this.context.math.mathController;this.setControllerPosition(e,t,"bottom",{left:0,top:0}),this.controllersOn(e,t,"math")},onClick_mathController:function(t){t.stopPropagation();let e=t.target.getAttribute("data-command")||t.target.parentNode.getAttribute("data-command");e&&(t.preventDefault(),/update/.test(e)?(this.context.math.focusElement.value=this.util.HTMLDecoder(this.context.math._mathExp.getAttribute("data-exp")),this.plugins.dialog.open.call(this,"math",!0)):(this.util.removeItem(this.context.math._mathExp),this.context.math._mathExp=null,this.focus(),this.history.push(!1)),this.controllersOff())},init:function(){let t=this.context.math;t.mathController.style.display="none",t._mathExp=null,t.focusElement.value="",t.previewElement.innerHTML=""}};var Dt=B(At()),Rt={name:"imageGallery",add:function(t){t.addModule([Dt.default]);let e=t.context;e.imageGallery={title:t.lang.toolbar.imageGallery,url:t.options.imageGalleryUrl,header:t.options.imageGalleryHeader,listClass:"se-image-list",itemTemplateHandler:this.drawItems,selectorHandler:this.setImage.bind(t),columnSize:4}},open:function(t){this.plugins.fileBrowser.open.call(this,"imageGallery",t)},drawItems:function(t){let e=t.src.split("/").pop();return'<div class="se-file-item-img"><img src="'+(t.thumbnail||t.src)+'" alt="'+(t.alt||e)+'" data-command="pick" data-value="'+(t.src||t.thumbnail)+'"><div class="se-file-img-name se-file-name-back"></div><div class="se-file-img-name __se__img_name">'+(t.name||e)+"</div></div>"},setImage:function(t,e){this.callPlugin("image",function(){let l={name:e,size:0};this.plugins.image.create_image.call(this,t.getAttribute("data-value"),null,this.context.image._origin_w,this.context.image._origin_h,"none",l,t.alt)}.bind(this),null)}};var Be={blockquote:G,align:K,font:Q,fontSize:J,fontColor:Z,hiliteColor:tt,horizontalRule:et,list:it,table:lt,formatBlock:nt,lineHeight:st,template:ot,paragraphStyle:at,textStyle:rt,link:ht,image:yt,video:kt,audio:It,math:Mt,imageGallery:Rt};export{K as align,It as audio,G as blockquote,Be as default,Q as font,Z as fontColor,J as fontSize,nt as formatBlock,tt as hiliteColor,et as horizontalRule,yt as image,Rt as imageGallery,st as lineHeight,ht as link,it as list,Mt as math,at as paragraphStyle,lt as table,ot as template,rt as textStyle,kt as video};
