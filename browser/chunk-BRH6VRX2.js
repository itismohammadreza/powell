import{b as k}from"./chunk-GU3KQCTF.js";import{Aa as V,fa as j,ga as A,za as _}from"./chunk-X3VERKXV.js";import{Bb as y,Cb as M,Db as O,Eb as E,Fb as s,Gb as c,Hb as m,Kb as h,Nb as L,Ob as f,Sb as P,Tb as $,Ub as C,Vb as S,Wa as a,Wc as R,X as v,Xb as b,Xc as W,_b as F,aa as x,cb as u,db as w,ec as Q,fc as D,ic as N,ra as I,tb as r,va as T,vb as p,yb as g}from"./chunk-IIASZPON.js";import"./chunk-TSRGIXR5.js";var B=["anchor"],G=(e,i,t,n)=>({$implicit:e,index:i,first:t,last:n}),J=e=>({width:e});function K(e,i){e&1&&h(0)}function U(e,i){if(e&1&&r(0,K,1,0,"ng-container",3),e&2){let t=i.$implicit,n=i.$index,o=i.$count,l=f();p("ngTemplateOutlet",l.templateMap.content)("ngTemplateOutletContext",N(2,G,t,n,n===0,n===o-1))}}function X(e,i){e&1&&h(0)}function Y(e,i){if(e&1&&r(0,X,1,0,"ng-container",5),e&2){let t=f(2);p("ngTemplateOutlet",t.templateMap.loading)}}function Z(e,i){if(e&1&&m(0,"p-progressSpinner"),e&2){let t=f(2);g(D(2,J,t.spinnerWidth))}}function ee(e,i){if(e&1&&r(0,Y,1,1,"ng-container")(1,Z,1,4,"p-progressSpinner",4),e&2){let t=f();y(t.templateMap.loading?0:1)}}var z=(()=>{class e{el=x(T);data;style;spinnerWidth="40px";scrolled=new I;anchor;templates;loading;templateMap={};observer;ngAfterContentInit(){this.templates.forEach(t=>{let n=t.type;this.templateMap[n]=t.templateRef}),this.observer=new IntersectionObserver(([t])=>{this.loading||t.isIntersecting&&(this.showLoading(),this.scrolled.emit(this.hideLoading))},{root:this.isHostScrollable()?this.el.nativeElement:null}),this.observer.observe(this.anchor.nativeElement)}showLoading=()=>{this.loading=!0};hideLoading=()=>{this.loading=!1};isHostScrollable(){let t=window.getComputedStyle(this.el.nativeElement);return t.getPropertyValue("overflow")==="auto"||t.getPropertyValue("overflow-y")==="scroll"}ngOnDestroy(){this.observer.disconnect()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["pw-infinite-scroll"]],contentQueries:function(n,o,l){if(n&1&&P(l,_,4),n&2){let d;C(d=S())&&(o.templates=d)}},viewQuery:function(n,o){if(n&1&&$(B,7),n&2){let l;C(l=S())&&(o.anchor=l.first)}},inputs:{data:"data",style:"style",spinnerWidth:"spinnerWidth"},outputs:{scrolled:"scrolled"},standalone:!1,decls:7,vars:2,consts:[["anchor",""],[1,"infinite-scroll-wrapper",3,"ngStyle"],[1,"loading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"style"],[4,"ngTemplateOutlet"]],template:function(n,o){n&1&&(s(0,"div",1),O(1,U,1,7,"ng-container",null,M),s(3,"div",2),r(4,ee,2,1),c(),m(5,"div",null,0),c()),n&2&&(p("ngStyle",o.style),a(),E(o.data),a(3),y(o.loading?4:-1))},dependencies:[j,W,R],encapsulation:2})}return e})();var H=(()=>{class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=w({type:e});static \u0275inj=v({imports:[A,V]})}return e})();var ne=()=>({height:"500px"});function ie(e,i){if(e&1&&(s(0,"p"),b(1),c()),e&2){let t=i.$implicit,n=i.index;a(),F("",n+1," - ",t,"")}}function oe(e,i){e&1&&m(0,"i",4)}var we=(()=>{class e{list=[];ngOnInit(){this.initListLazy()}initListLazy(){setTimeout(()=>{this.list.push(...this.generateList())},2e3)}onScroll(t){setTimeout(()=>{this.list.push(...this.generateList()),t()},2e3)}generateList(){return Array.from(Array(20).keys(),()=>"item")}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["infinite-scroll-page"]],decls:4,vars:4,consts:[["component","InfiniteScroll","description","InfiniteScroll is a container to implement infinitely loading data."],[3,"scrolled","data"],["pwTemplate","content"],["pwTemplate","loading"],[1,"pi","pi-spinner","pi-spin","!text-2xl"]],template:function(n,o){n&1&&(s(0,"preview",0)(1,"pw-infinite-scroll",1),L("scrolled",function(d){return o.onScroll(d)}),r(2,ie,2,2,"ng-template",2)(3,oe,1,0,"ng-template",3),c()()),n&2&&(a(),g(Q(3,ne)),p("data",o.list))},dependencies:[H,z,_,k],encapsulation:2})}return e})();export{we as InfiniteScrollPage};
