import{a as k}from"./chunk-PW7OIW2Q.js";import{Ca as g,Da as V,a as j,ea as W,fa as H}from"./chunk-Q3WIMKDI.js";import{$ as x,$b as v,Cb as C,Db as h,Eb as b,Fb as L,Gb as E,Hb as c,Ib as a,Jb as s,Kb as m,Qb as S,Tb as P,Ua as r,Vb as f,X as T,Yb as D,Zb as Q,_b as I,dc as d,fc as F,gb as u,hb as O,ic as $,mb as p,pb as M,pc as A,qc as N,tc as R,wa as w}from"./chunk-F47FGTOE.js";import"./chunk-HZ6M6AS2.js";var G=["anchor"],J=(e,t,n,i)=>({$implicit:e,index:t,first:n,last:i}),K=e=>({width:e});function U(e,t){e&1&&S(0)}function X(e,t){if(e&1&&p(0,U,1,0,"ng-container",3),e&2){let n=t.$implicit,i=t.$index,o=t.$count,l=f();c("ngTemplateOutlet",l.templateMap.content)("ngTemplateOutletContext",R(2,J,n,i,i===0,i===o-1))}}function Y(e,t){e&1&&S(0)}function Z(e,t){if(e&1&&p(0,Y,1,0,"ng-container",5),e&2){let n=f(2);c("ngTemplateOutlet",n.templateMap.loading)}}function ee(e,t){if(e&1&&m(0,"p-progressSpinner"),e&2){let n=f(2);d(N(2,K,n.spinnerWidth))}}function te(e,t){if(e&1&&C(0,Z,1,1,"ng-container")(1,ee,1,4,"p-progressSpinner",4),e&2){let n=f();h(n.templateMap.loading?0:1)}}var _=class e{el=x(w);data;style;spinnerWidth="40px";scrolled=new M;anchor;templates;loading=!1;templateMap={};observer;ngAfterContentInit(){this.templates?.forEach(t=>{let n=t.type;this.templateMap[n]=t.templateRef}),this.observer=new IntersectionObserver(([t])=>{this.loading||t.isIntersecting&&(this.showLoading(),this.scrolled.emit(this.hideLoading))},{root:this.isHostScrollable()?this.el.nativeElement:null}),this.observer.observe(this.anchor.nativeElement)}showLoading=()=>{this.loading=!0};hideLoading=()=>{this.loading=!1};isHostScrollable(){let t=window.getComputedStyle(this.el.nativeElement);return t.getPropertyValue("overflow")==="auto"||t.getPropertyValue("overflow-y")==="scroll"}ngOnDestroy(){this.observer.disconnect()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["pw-infinite-scroll"]],contentQueries:function(n,i,o){if(n&1&&D(o,g,4),n&2){let l;I(l=v())&&(i.templates=l)}},viewQuery:function(n,i){if(n&1&&Q(G,7),n&2){let o;I(o=v())&&(i.anchor=o.first)}},inputs:{data:"data",style:"style",spinnerWidth:"spinnerWidth"},outputs:{scrolled:"scrolled"},standalone:!1,decls:7,vars:3,consts:[["anchor",""],[1,"infinite-scroll-wrapper"],[1,"loading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"style"],[4,"ngTemplateOutlet"]],template:function(n,i){n&1&&(a(0,"div",1),L(1,X,1,7,"ng-container",null,b),a(3,"div",2),C(4,te,2,1),s(),m(5,"div",null,0),s()),n&2&&(d(i.style),r(),E(i.data),r(3),h(i.loading?4:-1))},dependencies:[W,j],encapsulation:2})};var y=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=O({type:e});static \u0275inj=T({imports:[H,V]})};var ie=()=>({height:"500px"});function oe(e,t){if(e&1&&(a(0,"p"),F(1),s()),e&2){let n=t.$implicit,i=t.index;r(),$("",i+1," - ",n)}}function le(e,t){e&1&&m(0,"i",4)}var z=class e{list=[];ngOnInit(){this.initListLazy()}initListLazy(){setTimeout(()=>{this.list.push(...this.generateList())},2e3)}onScroll(t){setTimeout(()=>{this.list.push(...this.generateList()),t()},2e3)}generateList(){return Array.from(Array(20).keys(),()=>"item")}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=u({type:e,selectors:[["app-infinite-scroll-page"]],decls:4,vars:4,consts:[["component","InfiniteScroll","description","InfiniteScroll is a container to implement infinitely loading data."],[3,"scrolled","data"],["pwTemplate","content"],["pwTemplate","loading"],[1,"pi","pi-spinner","pi-spin","!text-2xl"]],template:function(n,i){n&1&&(a(0,"app-preview",0)(1,"pw-infinite-scroll",1),P("scrolled",function(l){return i.onScroll(l)}),p(2,oe,2,2,"ng-template",2)(3,le,1,0,"ng-template",3),s()()),n&2&&(r(),d(A(3,ie)),c("data",i.list))},dependencies:[y,_,g,k],encapsulation:2})};export{z as InfiniteScrollPage};
